#include "sensor_ov7670.h"
#include "drv_l1_i2c.h"
#include "drv_l2_sensor.h"
#include "drv_l1_cdsp.h"

//=== This is for code configuration DON'T REMOVE or MODIFY it ===//
#if (USE_SENSOR_NAME == SENSOR_OV7670)
//================================================================//

#define OV7670_MAX_EXPOSURE_TIME			0x0220//768
#define OV7670_MIN_EXPOSURE_TIME			0x0008
#define OV7670_MAX_ANALOG_GAIN				(4*256)//(4*256) suggestion
#define OV7670_MIN_ANALOG_GAIN				(0*256)
#define OV7670_MAX_DIGITAL_GAIN			(4*256)//0x3=4x
#define OV7670_MIN_DIGITAL_GAIN 			0X00//0: no digital gain


/**************************************************************************
 *                         G L O B A L    D A T A  For CDSP using                          *
 **************************************************************************/
INT8U g_OV7670_LiTable_rgb[48]=
{	//R*16,Gb/Gr*16,B*16
	0x1e,0x2e,0x3e,0x4e,0x5e,0x6e,0x7e,0x8e,
	0x9e,0xae,0xbe,0xce,0xde,0xee,0xfe,0xff,
	0x0f,0x1f,0x2f,0x3f,0x4f,0x5f,0x6f,0x7f,
	0x8f,0x9f,0xaf,0xbf,0xcf,0xdf,0xef,0xff,
	0x07,0x17,0x27,0x37,0x47,0x57,0x67,0x77,
	0x87,0x97,0xa7,0xb7,0xc7,0xd7,0xe7,0xf7
};

INT16U g_OV7670_MaxTan8[32]=
{
	0x0C0,0x155,0x154,0x0C1,0x0BF,0x156,0x153,0x0C2,
	0x0BF,0x154,0x153,0x0C0,0x0BE,0x155,0x152,0x0C1,
	0x0BE,0x153,0x152,0x0BF,0x0BD,0x154,0x151,0x0C0,
	0x0BD,0x152,0x151,0x0BE,0x0BC,0x153,0x150,0x0BF	
};

INT16U g_OV7670_Slope4[16]=
{
	0x155,0x154,0x153,0x152,0x151,0x152,0x153,0x154,
	0x155,0x154,0x153,0x152,0x151,0x152,0x153,0x154	
};

INT16U g_OV7670_CLPoint[8]=		//Sensor Center is Weight/2, Hight/2 for RGB
{
	#if 1	//for VGA
		//R Center
		0x140,//X=320
		0x0F0,//Y=
		//Gr Center
		0x13F,//
		0x0F0,//
		0x140,
		0x0EF,
		0x13F,
		0x0EF
	#else	//For XQGA
		0x400,
		0x300,
		0x400,
		0x300,
		0x400,
		0x300,
		0x400,
		0x300
	#endif	
};

INT16U g_OV7670_Radius_File_0[512]=
{
	0x100,0x101,0x102,0x103,0x104,0x105,0x106,0x107,
	0x102,0x103,0x104,0x105,0x106,0x107,0x108,0x109,
	0x104,0x105,0x106,0x107,0x108,0x109,0x10a,0x10b,
	0x106,0x107,0x108,0x109,0x10a,0x10b,0x10c,0x10d,
	0x108,0x109,0x10a,0x10b,0x10c,0x10d,0x10e,0x10f,
	0x10a,0x10b,0x10c,0x10d,0x10e,0x10f,0x110,0x111,
	0x10c,0x10d,0x10e,0x10f,0x110,0x111,0x112,0x113,
	0x10e,0x10f,0x110,0x111,0x112,0x113,0x114,0x115,
	0x110,0x111,0x112,0x113,0x114,0x115,0x116,0x117,
	0x112,0x113,0x114,0x115,0x116,0x117,0x118,0x119,
	0x114,0x115,0x116,0x117,0x118,0x119,0x11a,0x11b,
	0x116,0x117,0x118,0x119,0x11a,0x11b,0x11c,0x11d,
	0x118,0x119,0x11a,0x11b,0x11c,0x11d,0x11e,0x11f,
	0x11a,0x11b,0x11c,0x11d,0x11e,0x11f,0x120,0x121,
	0x11c,0x11d,0x11e,0x11f,0x120,0x121,0x122,0x123,
	0x11e,0x11f,0x120,0x121,0x122,0x123,0x124,0x125,
	0x102,0x103,0x104,0x105,0x106,0x107,0x108,0x109,
	0x104,0x105,0x106,0x107,0x108,0x109,0x10a,0x10b,
	0x106,0x107,0x108,0x109,0x10a,0x10b,0x10c,0x10d,
	0x108,0x109,0x10a,0x10b,0x10c,0x10d,0x10e,0x10f,
	0x10a,0x10b,0x10c,0x10d,0x10e,0x10f,0x110,0x111,
	0x10c,0x10d,0x10e,0x10f,0x110,0x111,0x112,0x113,
	0x10e,0x10f,0x110,0x111,0x112,0x113,0x114,0x115,
	0x110,0x111,0x112,0x113,0x114,0x115,0x116,0x117,
	0x112,0x113,0x114,0x115,0x116,0x117,0x118,0x119,
	0x114,0x115,0x116,0x117,0x118,0x119,0x11a,0x11b,
	0x116,0x117,0x118,0x119,0x11a,0x11b,0x11c,0x11d,
	0x118,0x119,0x11a,0x11b,0x11c,0x11d,0x11e,0x11f,
	0x11a,0x11b,0x11c,0x11d,0x11e,0x11f,0x120,0x121,
	0x11c,0x11d,0x11e,0x11f,0x120,0x121,0x122,0x123,
	0x11e,0x11f,0x120,0x121,0x122,0x123,0x124,0x125,
	0x120,0x121,0x122,0x123,0x124,0x125,0x126,0x127,
	0x104,0x105,0x106,0x107,0x108,0x109,0x10a,0x10b,
	0x106,0x107,0x108,0x109,0x10a,0x10b,0x10c,0x10d,
	0x108,0x109,0x10a,0x10b,0x10c,0x10d,0x10e,0x10f,
	0x10a,0x10b,0x10c,0x10d,0x10e,0x10f,0x110,0x111,
	0x10c,0x10d,0x10e,0x10f,0x110,0x111,0x112,0x113,
	0x10e,0x10f,0x110,0x111,0x112,0x113,0x114,0x115,
	0x110,0x111,0x112,0x113,0x114,0x115,0x116,0x117,
	0x112,0x113,0x114,0x115,0x116,0x117,0x118,0x119,
	0x114,0x115,0x116,0x117,0x118,0x119,0x11a,0x11b,
	0x116,0x117,0x118,0x119,0x11a,0x11b,0x11c,0x11d,
	0x118,0x119,0x11a,0x11b,0x11c,0x11d,0x11e,0x11f,
	0x11a,0x11b,0x11c,0x11d,0x11e,0x11f,0x120,0x121,
	0x11c,0x11d,0x11e,0x11f,0x120,0x121,0x122,0x123,
	0x11e,0x11f,0x120,0x121,0x122,0x123,0x124,0x125,
	0x120,0x121,0x122,0x123,0x124,0x125,0x126,0x127,
	0x122,0x123,0x124,0x125,0x126,0x127,0x128,0x129,
	0x106,0x107,0x108,0x109,0x10a,0x10b,0x10c,0x10d,
	0x108,0x109,0x10a,0x10b,0x10c,0x10d,0x10e,0x10f,
	0x10a,0x10b,0x10c,0x10d,0x10e,0x10f,0x110,0x111,
	0x10c,0x10d,0x10e,0x10f,0x110,0x111,0x112,0x113,
	0x10e,0x10f,0x110,0x111,0x112,0x113,0x114,0x115,
	0x110,0x111,0x112,0x113,0x114,0x115,0x116,0x117,
	0x112,0x113,0x114,0x115,0x116,0x117,0x118,0x119,
	0x114,0x115,0x116,0x117,0x118,0x119,0x11a,0x11b,
	0x116,0x117,0x118,0x119,0x11a,0x11b,0x11c,0x11d,
	0x118,0x119,0x11a,0x11b,0x11c,0x11d,0x11e,0x11f,
	0x11a,0x11b,0x11c,0x11d,0x11e,0x11f,0x120,0x121,
	0x11c,0x11d,0x11e,0x11f,0x120,0x121,0x122,0x123,
	0x11e,0x11f,0x120,0x121,0x122,0x123,0x124,0x125,
	0x120,0x121,0x122,0x123,0x124,0x125,0x126,0x127,
	0x122,0x123,0x124,0x125,0x126,0x127,0x128,0x129,
	0x124,0x125,0x126,0x127,0x128,0x129,0x12a,0x12b
};

INT16U g_OV7670_Radius_File_1[512]=
{
0x101,
0x102,
0x103,
0x104,
0x105,
0x106,
0x107,
0x108,
0x103,
0x104,
0x105,
0x106,
0x107,
0x108,
0x109,
0x10a,
0x105,
0x106,
0x107,
0x108,
0x109,
0x10a,
0x10b,
0x10c,
0x107,
0x108,
0x109,
0x10a,
0x10b,
0x10c,
0x10d,
0x10e,
0x109,
0x10a,
0x10b,
0x10c,
0x10d,
0x10e,
0x10f,
0x110,
0x10b,
0x10c,
0x10d,
0x10e,
0x10f,
0x110,
0x111,
0x112,
0x10d,
0x10e,
0x10f,
0x110,
0x111,
0x112,
0x113,
0x114,
0x10f,
0x110,
0x111,
0x112,
0x113,
0x114,
0x115,
0x116,
0x111,
0x112,
0x113,
0x114,
0x115,
0x116,
0x117,
0x118,
0x113,
0x114,
0x115,
0x116,
0x117,
0x118,
0x119,
0x11a,
0x115,
0x116,
0x117,
0x118,
0x119,
0x11a,
0x11b,
0x11c,
0x117,
0x118,
0x119,
0x11a,
0x11b,
0x11c,
0x11d,
0x11e,
0x119,
0x11a,
0x11b,
0x11c,
0x11d,
0x11e,
0x11f,
0x120,
0x11b,
0x11c,
0x11d,
0x11e,
0x11f,
0x120,
0x121,
0x122,
0x11d,
0x11e,
0x11f,
0x120,
0x121,
0x122,
0x123,
0x124,
0x11f,
0x120,
0x121,
0x122,
0x123,
0x124,
0x125,
0x126,
0x103,
0x104,
0x105,
0x106,
0x107,
0x108,
0x109,
0x10a,
0x105,
0x106,
0x107,
0x108,
0x109,
0x10a,
0x10b,
0x10c,
0x107,
0x108,
0x109,
0x10a,
0x10b,
0x10c,
0x10d,
0x10e,
0x109,
0x10a,
0x10b,
0x10c,
0x10d,
0x10e,
0x10f,
0x110,
0x10b,
0x10c,
0x10d,
0x10e,
0x10f,
0x110,
0x111,
0x112,
0x10d,
0x10e,
0x10f,
0x110,
0x111,
0x112,
0x113,
0x114,
0x10f,
0x110,
0x111,
0x112,
0x113,
0x114,
0x115,
0x116,
0x111,
0x112,
0x113,
0x114,
0x115,
0x116,
0x117,
0x118,
0x113,
0x114,
0x115,
0x116,
0x117,
0x118,
0x119,
0x11a,
0x115,
0x116,
0x117,
0x118,
0x119,
0x11a,
0x11b,
0x11c,
0x117,
0x118,
0x119,
0x11a,
0x11b,
0x11c,
0x11d,
0x11e,
0x119,
0x11a,
0x11b,
0x11c,
0x11d,
0x11e,
0x11f,
0x120,
0x11b,
0x11c,
0x11d,
0x11e,
0x11f,
0x120,
0x121,
0x122,
0x11d,
0x11e,
0x11f,
0x120,
0x121,
0x122,
0x123,
0x124,
0x11f,
0x120,
0x121,
0x122,
0x123,
0x124,
0x125,
0x126,
0x121,
0x122,
0x123,
0x124,
0x125,
0x126,
0x127,
0x128,
0x105,
0x106,
0x107,
0x108,
0x109,
0x10a,
0x10b,
0x10c,
0x107,
0x108,
0x109,
0x10a,
0x10b,
0x10c,
0x10d,
0x10e,
0x109,
0x10a,
0x10b,
0x10c,
0x10d,
0x10e,
0x10f,
0x110,
0x10b,
0x10c,
0x10d,
0x10e,
0x10f,
0x110,
0x111,
0x112,
0x10d,
0x10e,
0x10f,
0x110,
0x111,
0x112,
0x113,
0x114,
0x10f,
0x110,
0x111,
0x112,
0x113,
0x114,
0x115,
0x116,
0x111,
0x112,
0x113,
0x114,
0x115,
0x116,
0x117,
0x118,
0x113,
0x114,
0x115,
0x116,
0x117,
0x118,
0x119,
0x11a,
0x115,
0x116,
0x117,
0x118,
0x119,
0x11a,
0x11b,
0x11c,
0x117,
0x118,
0x119,
0x11a,
0x11b,
0x11c,
0x11d,
0x11e,
0x119,
0x11a,
0x11b,
0x11c,
0x11d,
0x11e,
0x11f,
0x120,
0x11b,
0x11c,
0x11d,
0x11e,
0x11f,
0x120,
0x121,
0x122,
0x11d,
0x11e,
0x11f,
0x120,
0x121,
0x122,
0x123,
0x124,
0x11f,
0x120,
0x121,
0x122,
0x123,
0x124,
0x125,
0x126,
0x121,
0x122,
0x123,
0x124,
0x125,
0x126,
0x127,
0x128,
0x123,
0x124,
0x125,
0x126,
0x127,
0x128,
0x129,
0x12a,
0x107,
0x108,
0x109,
0x10a,
0x10b,
0x10c,
0x10d,
0x10e,
0x109,
0x10a,
0x10b,
0x10c,
0x10d,
0x10e,
0x10f,
0x110,
0x10b,
0x10c,
0x10d,
0x10e,
0x10f,
0x110,
0x111,
0x112,
0x10d,
0x10e,
0x10f,
0x110,
0x111,
0x112,
0x113,
0x114,
0x10f,
0x110,
0x111,
0x112,
0x113,
0x114,
0x115,
0x116,
0x111,
0x112,
0x113,
0x114,
0x115,
0x116,
0x117,
0x118,
0x113,
0x114,
0x115,
0x116,
0x117,
0x118,
0x119,
0x11a,
0x115,
0x116,
0x117,
0x118,
0x119,
0x11a,
0x11b,
0x11c,
0x117,
0x118,
0x119,
0x11a,
0x11b,
0x11c,
0x11d,
0x11e,
0x119,
0x11a,
0x11b,
0x11c,
0x11d,
0x11e,
0x11f,
0x120,
0x11b,
0x11c,
0x11d,
0x11e,
0x11f,
0x120,
0x121,
0x122,
0x11d,
0x11e,
0x11f,
0x120,
0x121,
0x122,
0x123,
0x124,
0x11f,
0x120,
0x121,
0x122,
0x123,
0x124,
0x125,
0x126,
0x121,
0x122,
0x123,
0x124,
0x125,
0x126,
0x127,
0x128,
0x123,
0x124,
0x125,
0x126,
0x127,
0x128,
0x129,
0x12a,
0x125,
0x126,
0x127,
0x128,
0x129,
0x12a,
0x12b,
0x12c
};

static const unsigned short g_OV7670_r_b_gain[96][2] = 
{ // { r gain, b gain }
{0,	225},
{0,	223},                     
{4, 220},                    
{8, 218},                    
{12, 216},                    
{16, 213},                    
{20, 211},                    
{23, 208},                    
{27, 206},                    
{31, 203},                    
{34, 201},                    
{37, 198},                    
{40, 196},                    
{44, 193},                    
{47, 191},                    
{50, 188},                    
{52, 186},                    
{55, 184},                    
{58, 181},                    
{61, 179},                    
{63, 176},                    
{65, 174},                    
{68, 171},                    
{70, 169},                    
{72, 166},                    
{74, 164},                    
{76, 161},                    
{78, 159},                    
{80, 156},                    
{81, 154},                    
{83, 151},                    
{84, 149},                    
{86, 146},                    
{87, 144},                    
{88, 141},                    
{89, 139},                    
{90, 137},                    
{90, 134},                    
{91, 132},                    
{91, 129},                    
{91, 127},
{92, 124},
{92, 122},
{93, 119},
{93, 117},
{93, 114},
{94, 112},
{94, 109},
{94, 107},
{94, 104},
{94, 102},
{94, 99},
{93, 97},
{93, 94},
{93, 92},
{92, 89},
{92, 87},
{91, 84},
{90, 82},
{90, 79},
{89, 77},
{88, 74},
{87, 72},
{86, 69},
{85, 67},
{83, 64},
{82, 62},
{81, 59},
{79, 57},
{78, 54},
{76, 52},
{74, 49},
{72, 47},
{71, 44},
{69, 42},
{67, 39},
{65, 36},
{62, 34},
{60, 31},
{58, 29},
{55, 26},
{53, 24},
{50, 21},
{48, 19},
{45, 16},
{42, 14},
{39, 11},
{36, 9},
{33, 6},
{30, 4},
{27, 1},
{24, 0},
{21, 0},
{17, 0},
{14, 0},
{10, 0}
};

// form 1000k ~ 13000k, step = 100k
static const unsigned short g_OV7670_r_b_gain_org[121][2] = 
{ // { r gain, b gain }
{16, 171},
{18, 170},
{21, 170},
{24, 169},
{26, 169},
{29, 168},
{32, 168},
{34, 167},
{36, 166},
{39, 166},
{41, 165},
{43, 164},
{45, 163},
{48, 162},
{50, 161},
{52, 160},
{54, 159},
{56, 158},
{57, 157},
{59, 156},
{61, 155},
{63, 154},
{64, 153},
{66, 151},
{67, 150},
{69, 149},
{70, 147},
{72, 146},
{73, 144},
{74, 143},
{76, 141},
{77, 140},
{78, 138},
{79, 137},
{80, 135},
{81, 133},
{82, 132},
{83, 130},
{83, 128},
{84, 126},
{85, 124},
{85, 122},
{86, 120},
{86, 118},
{87, 116},
{87, 114},
{88, 112},
{88, 110},
{88, 108},
{88, 105},
{89, 103},
{89, 101},
{89, 98 },
{89, 96 },
{89, 94 },
{88, 91 },
{88, 89 },
{88, 86 },
{88, 83 },
{87, 81 },
{87, 78 },
{87, 75 },
{86, 73 },
{85, 70 },
{85, 67 },
{84, 64 },
{83, 61 },
{83, 59 },
{82, 56 },
{81, 53 },
{80, 50 },
{79, 46 },
{78, 43 },
{77, 40 },
{76, 37 },
{75, 34 },
{73, 31 },
{72, 27 },
{71, 24 },
{69, 21 },
{68, 17 },
{66, 14 },
{65, 10 },
{63, 7  },
{61, 3  },
{59, 0  },
{58, 0  },
{56, 0  },
{54, 0  },
{52, 0  },
{50, 0  },
{48, 0  },
{46, 0  },
{44, 0  },
{41, 0  },
{39, 0  },
{37, 0  },
{34, 0  },
{32, 0  },
{29, 0  },
{27, 0  },
{24, 0  },
{21, 0  },
{19, 0  },
{16, 0  },
{13, 0  },
{10, 0  },
{7 , 0  },
{4 , 0  },
{1 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  },
{0 , 0  }
};



static const unsigned int g_OV7670_gamma_045_table_org[] = 
{
	0x000000, 0x000000, 0x000000, 0x000000, 0x114400, 0x111405, 0x11140a, 0x11440f, 
	0x144513, 0x045118, 0x11141d, 0x044521, 0x111126, 0x04512a, 0x04442f, 0x111433, 
	0x111137, 0x11113b, 0x11113f, 0x041143, 0x044447, 0x10444b, 0x11114e, 0x044452, 
	0x111155, 0x044459, 0x04115c, 0x111060, 0x104463, 0x104166, 0x044169, 0x04416c, 
	0x10416f, 0x104172, 0x110475, 0x010478, 0x04107b, 0x10417d, 0x010480, 0x101083, 
	0x010485, 0x104088, 0x04048a, 0x00418c, 0x10108f, 0x041091, 0x010493, 0x010195, 
	0x004197, 0x00409a, 0x00409c, 0x00409e, 0x0040a0, 0x0101a1, 0x0101a3, 0x0404a5, 
	0x1010a7, 0x0040a9, 0x0100ab, 0x0401ac, 0x0010ae, 0x0100b0, 0x1004b1, 0x0040b3, 
	0x0401b4, 0x0010b6, 0x0400b8, 0x0010b9, 0x0401ba, 0x0040bc, 0x1001bd, 0x0040bf, 
	0x0004c0, 0x0400c2, 0x0010c3, 0x1001c4, 0x0100c6, 0x0010c7, 0x1001c8, 0x0100ca, 
	0x0010cb, 0x0004cc, 0x0400ce, 0x0040cf, 0x0004d0, 0x0400d2, 0x0100d3, 0x0010d4, 
	0x1001d5, 0x0100d7, 0x0010d8, 0x1001d9, 0x0100db, 0x0010dc, 0x1001dd, 0x0100df, 
	0x0010e0, 0x1001e1, 0x0040e3, 0x0004e4, 0x0100e6, 0x0010e7, 0x0400e9, 0x0010ea, 
	0x0401eb, 0x0010ed, 0x0100ef, 0x0004f0, 0x0040f2, 0x0401f3, 0x0010f5, 0x0100f7, 
	0x0401f8, 0x1004fa, 0x0010fc, 0x0040fe, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 
	0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 
};


static const unsigned int g_OV7670_gamma_045_table[] = 
{
	0x11140c, 0x045110, 0x044415, 0x111119, 0x11111d, 0x111121, 0x111125, 0x111129, 
0x11112d, 0x044431, 0x044435, 0x111138, 0x04443c, 0x111040, 0x044443, 0x011146, 
0x11044a, 0x10444d, 0x044150, 0x041153, 0x041156, 0x04105a, 0x04115c, 0x04415f, 
0x104162, 0x010465, 0x041068, 0x10416a, 0x01046d, 0x101070, 0x010472, 0x104075, 
0x040477, 0x010179, 0x10407c, 0x04107e, 0x040480, 0x010182, 0x010184, 0x010186, 
0x004089, 0x01018a, 0x01018c, 0x01018e, 0x040490, 0x100492, 0x001094, 0x004096, 
0x040197, 0x101099, 0x00409b, 0x04019c, 0x00109e, 0x0400a0, 0x0010a1, 0x0400a3, 
0x0010a4, 0x0401a5, 0x0040a7, 0x1004a8, 0x0100aa, 0x0010ab, 0x1001ac, 0x0100ae, 
0x0040af, 0x0004b0, 0x1000b2, 0x0100b3, 0x0040b4, 0x0004b5, 0x0001b6, 0x1000b8, 
0x0400b9, 0x0100ba, 0x0040bb, 0x0010bc, 0x0004bd, 0x0001be, 0x1000c0, 0x0400c1, 
0x0400c2, 0x0100c3, 0x0040c4, 0x0010c5, 0x0010c6, 0x0004c7, 0x0001c8, 0x0000ca, 
0x1000cb, 0x0400cc, 0x0100cd, 0x0040ce, 0x0010cf, 0x0004d0, 0x0001d1, 0x1000d3, 
0x0400d4, 0x0040d5, 0x0010d6, 0x0004d7, 0x1000d9, 0x0100da, 0x0010db, 0x0004dc, 
0x0400de, 0x0040df, 0x0004e0, 0x0400e2, 0x0010e3, 0x1001e4, 0x0040e6, 0x1004e7, 
0x0100e9, 0x1004ea, 0x0040ec, 0x0401ed, 0x0010ef, 0x0100f1, 0x1004f2, 0x0010f4, 
0x0040f6, 0x0101f7, 0x0404f9, 0x1004fb, 0x1010fd, 0x0000ff, 0x0000ff, 0x0000ff
};

static const unsigned int g_OV7670_gamma_050_table[] = 
{
0x000000, 0x000000, 0x000000, 0x000000, 0x100000, 0x114402, 0x144407, 0x04510b, 
0x111110, 0x144415, 0x111119, 0x04441e, 0x114422, 0x111126, 0x11112a, 0x11112e, 
0x111132, 0x111136, 0x11113a, 0x01113e, 0x044442, 0x111046, 0x041149, 0x11044d, 
0x044150, 0x111054, 0x104457, 0x04415a, 0x04115d, 0x041061, 0x011064, 0x011067, 
0x04106a, 0x04106d, 0x10416f, 0x104172, 0x010475, 0x041078, 0x00417a, 0x04107d, 
0x10417f, 0x041082, 0x010184, 0x101087, 0x040489, 0x01018b, 0x00408e, 0x101090, 
0x041092, 0x040494, 0x040496, 0x040498, 0x04049a, 0x04049c, 0x04049e, 0x1010a0, 
0x0010a2, 0x0040a4, 0x0100a6, 0x0401a7, 0x1010a9, 0x0040ab, 0x0401ac, 0x1004ae, 
0x0040b0, 0x0401b1, 0x0010b3, 0x0100b5, 0x0004b6, 0x0100b8, 0x0004b9, 0x0100bb, 
0x0004bc, 0x0100be, 0x0010bf, 0x0400c1, 0x0010c2, 0x1001c3, 0x0040c5, 0x0004c6, 
0x0100c8, 0x0010c9, 0x1001ca, 0x0040cc, 0x0004cd, 0x0400cf, 0x0040d0, 0x1001d1, 
0x0100d3, 0x0010d4, 0x0400d6, 0x0040d7, 0x1004d8, 0x0100da, 0x0010db, 0x0400dd, 
0x0010de, 0x0401df, 0x0040e1, 0x1001e2, 0x0040e4, 0x1001e5, 0x0040e7, 0x0401e8, 
0x0010ea, 0x0100ec, 0x1004ed, 0x0040ef, 0x0401f0, 0x1004f2, 0x0040f4, 0x0101f5, 
0x0404f7, 0x1010f9, 0x0010fb, 0x0040fd, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 
0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 

};


static const unsigned int g_OV7670_gamma_055_table[] = 
{
0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x111401, 0x044505, 0x11140a, 
0x11110e, 0x044413, 0x044417, 0x11141b, 0x11111f, 0x111123, 0x011127, 0x04442b, 
0x04442f, 0x111033, 0x011136, 0x04443a, 0x11113d, 0x044441, 0x011144, 0x110448, 
0x04414b, 0x04114e, 0x011052, 0x110455, 0x110458, 0x11045b, 0x11045e, 0x010461, 
0x011064, 0x041067, 0x104169, 0x11046c, 0x04046f, 0x104171, 0x010474, 0x041077, 
0x010479, 0x10107c, 0x01047e, 0x004180, 0x101083, 0x040485, 0x010187, 0x00408a, 
0x10108c, 0x04108e, 0x040490, 0x040492, 0x040494, 0x040496, 0x040498, 0x04049a, 
0x10049c, 0x10109e, 0x0010a0, 0x0040a2, 0x0100a4, 0x0401a5, 0x1004a7, 0x0040a9, 
0x0100ab, 0x0404ac, 0x0010ae, 0x0100b0, 0x0401b1, 0x0010b3, 0x0100b5, 0x1004b6, 
0x0040b8, 0x0401b9, 0x0040bb, 0x0401bc, 0x0010be, 0x0400c0, 0x0010c1, 0x0100c3, 
0x0010c4, 0x0100c6, 0x0010c7, 0x0100c9, 0x0010ca, 0x0400cc, 0x0010cd, 0x0400cf, 
0x0010d0, 0x0400d2, 0x0010d3, 0x0400d5, 0x0010d6, 0x0400d8, 0x0010d9, 0x0400db, 
0x0010dc, 0x0100de, 0x1004df, 0x0040e1, 0x1004e2, 0x0040e4, 0x0401e5, 0x1010e7, 
0x0040e9, 0x0401ea, 0x0010ec, 0x0040ee, 0x0401ef, 0x1004f1, 0x0010f3, 0x0040f5, 
0x0101f6, 0x0404f8, 0x1004fa, 0x1010fc, 0x0010fe, 0x0000ff, 0x0000ff, 0x0000ff, 
0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff
};


static const unsigned int g_OV7670_gamma_100_table[] = 
{
	0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 
	0x004000, 0x104002, 0x041004, 0x040406, 0x010108, 0x00400b, 0x10100d, 0x04040f, 
	0x010411, 0x004113, 0x104016, 0x041018, 0x04041a, 0x01011c, 0x00401f, 0x101021, 
	0x040423, 0x010425, 0x004127, 0x10402a, 0x04102c, 0x04042e, 0x010130, 0x004033, 
	0x101035, 0x040437, 0x010439, 0x00413b, 0x10403e, 0x041040, 0x010442, 0x010144, 
	0x104047, 0x101049, 0x04044b, 0x01014d, 0x004050, 0x101052, 0x040454, 0x010156, 
	0x004158, 0x10105b, 0x04045d, 0x01015f, 0x004062, 0x101064, 0x040466, 0x010168, 
	0x10406b, 0x04106d, 0x01046f, 0x010171, 0x104074, 0x041076, 0x010478, 0x00417a, 
	0x10107d, 0x01047f, 0x004181, 0x101084, 0x040486, 0x010188, 0x10408b, 0x04108d, 
	0x01018f, 0x104092, 0x041094, 0x010496, 0x104099, 0x04109b, 0x01019d, 0x1040a0, 
	0x0404a2, 0x0101a4, 0x1010a7, 0x0404a9, 0x0041ab, 0x0410ae, 0x0104b0, 0x1040b3, 
	0x0404b5, 0x0041b7, 0x0410ba, 0x0104bc, 0x1040bf, 0x0404c1, 0x1041c3, 0x0410c6, 
	0x0041c8, 0x0410cb, 0x0104cd, 0x1010d0, 0x0104d2, 0x1040d5, 0x0104d7, 0x1040da, 
	0x0104dc, 0x1040df, 0x0104e1, 0x1040e4, 0x0104e6, 0x1010e9, 0x0104eb, 0x0410ee, 
	0x0104f0, 0x0410f3, 0x1041f5, 0x0404f8, 0x1041fa, 0x0104fd, 0x0000ff, 0x0000ff, 
	0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 
};

static const unsigned int g_OV7670_gamma_220_table[] = 
{
	0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 
	0x000000, 0x010000, 0x040101, 0x100403, 0x101005, 0x004007, 0x004009, 0x01000b, 
	0x01010c, 0x04010e, 0x040410, 0x040412, 0x040414, 0x101016, 0x101018, 0x10101a, 
	0x10101c, 0x10101e, 0x101020, 0x101022, 0x101024, 0x041026, 0x040428, 0x04042a, 
	0x04042c, 0x01042e, 0x010130, 0x010132, 0x004035, 0x104037, 0x101039, 0x04103b, 
	0x04043d, 0x01013f, 0x004141, 0x104044, 0x101046, 0x040448, 0x01014a, 0x00414c, 
	0x10104f, 0x040451, 0x010153, 0x104056, 0x041058, 0x01045a, 0x00415c, 0x10105f, 
	0x040461, 0x010163, 0x101066, 0x040468, 0x00416a, 0x10106d, 0x01046f, 0x104171, 
	0x041074, 0x010176, 0x101079, 0x01047b, 0x10417d, 0x041080, 0x004182, 0x041085, 
	0x010187, 0x04108a, 0x01048c, 0x10108f, 0x010491, 0x101094, 0x010496, 0x101099, 
	0x01049b, 0x04109e, 0x0104a0, 0x0410a3, 0x0041a5, 0x0410a8, 0x1041aa, 0x0104ad, 
	0x1041af, 0x0104b2, 0x0410b5, 0x0041b7, 0x0410ba, 0x1041bc, 0x0104bf, 0x0410c2, 
	0x1041c4, 0x0104c7, 0x1040ca, 0x0104cc, 0x0410cf, 0x1041d1, 0x0104d4, 0x0410d7, 
	0x1041d9, 0x0104dc, 0x0410df, 0x1041e1, 0x0104e4, 0x0104e7, 0x0410ea, 0x1041ec, 
	0x0104ef, 0x0410f2, 0x1041f4, 0x0104f7, 0x0110fa, 0x0410fd, 0x0000ff, 0x0000ff, 
	0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 
};



static const unsigned int g_OV7670_gamma_060_table[] = 
{
	0x000000, 0x000000, 0x000000, 0x000000, 0x040000, 0x044402, 0x044406, 0x04440a, 
0x04440e, 0x044412, 0x044416, 0x04441a, 0x11111d, 0x011121, 0x044425, 0x111029, 
0x04412c, 0x110430, 0x044133, 0x011037, 0x10443a, 0x04413d, 0x041140, 0x011044, 
0x010447, 0x11044a, 0x11044d, 0x110450, 0x010453, 0x010456, 0x041059, 0x04115b, 
0x10415e, 0x010461, 0x041064, 0x104166, 0x010469, 0x10406c, 0x01046e, 0x104071, 
0x010473, 0x004175, 0x041078, 0x01047a, 0x00417c, 0x10107f, 0x040481, 0x010483, 
0x010185, 0x004088, 0x00408a, 0x10108c, 0x10108e, 0x101090, 0x101092, 0x101094, 
0x001096, 0x004098, 0x00409a, 0x01009c, 0x01019d, 0x04049f, 0x1004a1, 0x0010a3, 
0x0040a5, 0x0101a6, 0x1004a8, 0x0010aa, 0x0100ac, 0x0401ad, 0x0010af, 0x0040b1, 
0x0401b2, 0x0010b4, 0x0100b6, 0x1004b7, 0x0040b9, 0x0401ba, 0x0010bc, 0x0100be, 
0x1004bf, 0x0040c1, 0x0401c2, 0x0010c4, 0x0100c6, 0x1004c7, 0x0100c9, 0x1004ca, 
0x0040cc, 0x0401cd, 0x0010cf, 0x0100d1, 0x0004d2, 0x0100d4, 0x1004d5, 0x0040d7, 
0x0401d8, 0x0010da, 0x0100dc, 0x1004dd, 0x0040df, 0x0101e0, 0x1004e2, 0x0040e4, 
0x0101e5, 0x1004e7, 0x0040e9, 0x0100eb, 0x0404ec, 0x1010ee, 0x0040f0, 0x0100f2, 
0x0401f3, 0x1004f5, 0x1010f7, 0x0040f9, 0x0040fb, 0x0040fd, 0x0001fe, 0x0000ff, 
0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 
};


static const unsigned int g_OV7670_gamma_070_table[] = 
{
	0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x011000, 0x044403, 0x111106, 
0x04440a, 0x11100e, 0x044411, 0x011114, 0x110418, 0x04411b, 0x04111e, 0x110422, 
0x104425, 0x104428, 0x04412b, 0x04412e, 0x041131, 0x041134, 0x041137, 0x04413a, 
0x10413d, 0x104440, 0x010443, 0x011046, 0x041049, 0x10414b, 0x01044e, 0x041051, 
0x104153, 0x010456, 0x104059, 0x01045b, 0x10105e, 0x010460, 0x104063, 0x040465, 
0x004167, 0x04106a, 0x01046c, 0x00416e, 0x101071, 0x040473, 0x010175, 0x004078, 
0x10107a, 0x04107c, 0x04047e, 0x010180, 0x010182, 0x004085, 0x004087, 0x004089, 
0x10408b, 0x10108d, 0x10108f, 0x101091, 0x001093, 0x004095, 0x004097, 0x004099, 
0x00409b, 0x01019c, 0x01019e, 0x0401a0, 0x0404a2, 0x1010a4, 0x1010a6, 0x0040a8, 
0x0040aa, 0x0101ab, 0x0404ad, 0x1004af, 0x0010b1, 0x0040b3, 0x0101b4, 0x0401b6, 
0x1004b8, 0x0010ba, 0x0040bc, 0x0101bd, 0x0404bf, 0x1010c1, 0x0040c3, 0x0100c5, 
0x0401c6, 0x1004c8, 0x0010ca, 0x0040cc, 0x0101cd, 0x0404cf, 0x1010d1, 0x0040d3, 
0x0100d5, 0x0101d6, 0x0404d8, 0x1010da, 0x0010dc, 0x0040de, 0x0101df, 0x0401e1, 
0x0404e3, 0x1004e5, 0x1010e7, 0x0010e9, 0x0040eb, 0x0040ed, 0x0100ef, 0x0101f0, 
0x0101f2, 0x0101f4, 0x0101f6, 0x0101f8, 0x0101fa, 0x0101fc, 0x0001fe, 0x0000ff, 
0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 

};


static const unsigned int g_OV7670_gamma_080_table[] = 
{
0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x110400, 0x104403, 
0x104106, 0x044109, 0x04410c, 0x04410f, 0x044112, 0x044115, 0x104118, 0x10411b, 
0x10441e, 0x010421, 0x011024, 0x041027, 0x104129, 0x10442c, 0x01042f, 0x041032, 
0x104134, 0x010437, 0x04103a, 0x10413c, 0x04103f, 0x104141, 0x010444, 0x104047, 
0x010449, 0x10404c, 0x01044e, 0x104150, 0x040453, 0x004155, 0x041058, 0x01045a, 
0x10415c, 0x04105f, 0x010461, 0x104163, 0x041066, 0x010468, 0x01016a, 0x10406d, 
0x04106f, 0x040471, 0x010173, 0x004076, 0x101078, 0x04107a, 0x04047c, 0x01047e, 
0x010180, 0x004182, 0x004085, 0x101087, 0x101089, 0x10108b, 0x04048d, 0x04048f, 
0x040491, 0x010493, 0x010195, 0x010197, 0x010199, 0x01019b, 0x01019d, 0x01019f, 
0x0101a1, 0x0101a3, 0x0101a5, 0x0040a8, 0x0040aa, 0x0040ac, 0x0040ae, 0x0101af, 
0x0101b1, 0x0101b3, 0x0101b5, 0x0101b7, 0x0101b9, 0x0101bb, 0x0101bd, 0x0101bf, 
0x0101c1, 0x0101c3, 0x0101c5, 0x0101c7, 0x0101c9, 0x0101cb, 0x0101cd, 0x0101cf, 
0x0101d1, 0x0041d3, 0x0040d6, 0x0040d8, 0x0040da, 0x0040dc, 0x0040de, 0x1010e0, 
0x1010e2, 0x1010e4, 0x0410e6, 0x0404e8, 0x0404ea, 0x0101ec, 0x0101ee, 0x0040f1, 
0x1040f3, 0x1010f5, 0x0404f7, 0x0104f9, 0x0101fb, 0x0040fe, 0x0000ff, 0x0000ff, 
0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 0x0000ff, 

};


static const unsigned int g_OV7670_gamma_045_220_table[] = 
{
0x000000, 0x000000, 0x000000, 0x000000, 0x040400, 0x100402, 0x101004, 0x001006, 
0x004008, 0x01000a, 0x01010b, 0x04040d, 0x10040f, 0x001011, 0x004013, 0x010015, 
0x040116, 0x040418, 0x10101a, 0x00401c, 0x01001e, 0x01011f, 0x040421, 0x101023, 
0x104425, 0x045128, 0x14512d, 0x055433, 0x155539, 0x155141, 0x155548, 0x155551, 
0x155559, 0x155561, 0x155569, 0x155570, 0x145577, 0x11157d, 0x044483, 0x041186, 
0x004089, 0x01018a, 0x01018c, 0x01018e, 0x040490, 0x100492, 0x001094, 0x004096, 
0x040197, 0x101099, 0x00409b, 0x04019c, 0x00109e, 0x0400a0, 0x0010a1, 0x0400a3, 
0x0010a4, 0x0401a5, 0x0040a7, 0x1004a8, 0x0100aa, 0x0010ab, 0x1001ac, 0x0100ae, 
0x0040af, 0x0004b0, 0x1000b2, 0x0100b3, 0x0040b4, 0x0004b5, 0x0001b6, 0x1000b8, 
0x0400b9, 0x0100ba, 0x0040bb, 0x0010bc, 0x0004bd, 0x0001be, 0x1000c0, 0x0400c1, 
0x0400c2, 0x0100c3, 0x0040c4, 0x0010c5, 0x0010c6, 0x0004c7, 0x0001c8, 0x0000ca, 
0x1000cb, 0x0400cc, 0x0100cd, 0x0040ce, 0x0010cf, 0x0004d0, 0x0001d1, 0x1000d3, 
0x0400d4, 0x0040d5, 0x0010d6, 0x0004d7, 0x1000d9, 0x0100da, 0x0010db, 0x0004dc, 
0x0400de, 0x0040df, 0x0004e0, 0x0400e2, 0x0010e3, 0x1001e4, 0x0040e6, 0x1004e7, 
0x0100e9, 0x1004ea, 0x0040ec, 0x0010ed, 0x0400ef, 0x0010f0, 0x1001f1, 0x0100f3, 
0x0010f4, 0x1001f5, 0x0100f7, 0x0010f8, 0x1001f9, 0x0100fb, 0x0004fc, 0x0100fe
};



const INT32S g_OV7670_color_matrix4gamma045_220[9] = 
{
	(INT32S) ((1.0299383355342417000*64) + 0.5),     
	(INT32S) ((-0.078524229797331882*64) + 0.5),    
	(INT32S) ((0.0485858942630900680*64) + 0.5),    
	(INT32S) ((-0.029117739227541756*64) + 0.5),   
	(INT32S) ((0.8413536443567160000*64) + 0.5),    
	(INT32S) ((0.1877640948708258500*64) + 0.5),    
	(INT32S) ((0.1058602652031736000*64) + 0.5),    
	(INT32S) ((-0.261129109281162340*64) + 0.5),    
	(INT32S) ((1.1552688440779888000*64) + 0.5)    
};



static const short g_OV7670_color_matrix4gamma045_org[9] = 
{
	(short) ( (1.303810916986531100*64) + 0.5),
	(short) ((-0.218691044867272890*64) + 0.5),
	(short) ((-0.085119872119258200*64) + 0.5),
	(short) ((-0.180740889916990110 *64) + 0.5),
	(short) (( 1.070785223137142200*64) + 0.5),
	(short) ((0.109955666779848000*64) + 0.5),
	(short) ((0.038305882120727150 *64) + 0.5),
	(short) ((-0.657797615013757660*64) + 0.5),
	(short) (( 1.619491732893030500*64) + 0.5)
};


static const short g_OV7670_color_matrix4gamma045[9] = 
{	
	(short) ((1.41584287504700510000 *64) + 0.5),
	(short) ((-0.3243545598584618400 *64) + 0.5),
	(short) ((-0.0914883151885433760 *64) + 0.5),
	(short) ((-0.3569149216976537100 *64) + 0.5),
	(short) ((1.37507786348114620000 *64) + 0.5),
	(short) ((-0.0181629417834924570 *64) + 0.5),
	(short) ((0.00964252667160129910 *64) + 0.5),
	(short) ((-0.7108056366196609000 *64) + 0.5),
	(short) ((1.70116310994805950000 *64) + 0.5)
};



static const short g_OV7670_color_matrix4gamma050[9] = 
{
	(short) ((1.27849642817564170000 *64) + 0.5),
	(short) ((-0.22835073567627556000*64) + 0.5),
	(short) ((-0.05014569249936599200*64) + 0.5),
	(short) ((-0.14740162765523246000*64) + 0.5),
	(short) ((1.01576458471759160000 *64) + 0.5),
	(short) ((0.13163704293764086000 *64) + 0.5),
	(short) ((0.06154235149752349700 *64) + 0.5),
	(short) ((-0.65205189893852955000*64) + 0.5),
	(short) ((1.59050954744100630000 *64) + 0.5)
};


static const short g_OV7670_color_matrix4gamma055[9] = 
{
	(short) ((1.25645870543878040000 *64) + 0.5),
	(short) ((-0.23381877115852182000*64) + 0.5),
	(short) ((-0.02263993428025856000*64) + 0.5),
	
	(short) ((-0.11730707108052141000 *64) + 0.5),
	(short) ((0.97003151005942756000 *64) + 0.5),
	(short) ((0.14727556102109396000 *64) + 0.5),
	
	(short) ((0.08164892304076774900 *64) + 0.5),
	(short) ((-0.64901488157519582000*64) + 0.5),
	(short) ((1.56736595853442820000 *64) + 0.5)
};


static const short g_OV7670_color_matrix4gamma045_special[9] = 
{
	(short) ((1.13329398662226580000   *64) + 0.5),
	(short) ((-0.32883911944821814000  *64) + 0.5),
	(short) ((0.19554513282595243000   *64) + 0.5),
	
	(short) ((-0.180740889916990110 *64) + 0.5),
	(short) (( 1.070785223137142200*64) + 0.5),
	(short) ((0.109955666779848000*64) + 0.5),
	
	(short) ((0.2507694814178065926   *64) + 0.5),
	(short) ((-0.4162012083024371666  *64) + 0.5),
	(short) ((1.165431726884630574   *64) + 0.5)
};


static const short g_OV7670_color_matrix4gamma045_special2[9] = 
{
	(short) ( (1.303810916986531100*64) + 0.5),
	(short) ((-0.218691044867272890*64) + 0.5),
	(short) ((-0.085119872119258200*64) + 0.5),
	(short) ((-0.180740889916990110 *64) + 0.5),
	(short) (( 1.070785223137142200*64) + 0.5),
	(short) ((0.109955666779848000*64) + 0.5),
	
	(short) ((0.26808008793705057000   *64) + 0.5),
	(short) ((-0.66093716511226741000  *64) + 0.5),
	(short) ((1.39285707717521690000   *64) + 0.5)
};



static const short g_OV7670_color_matrix4gamma100[9] = 
{
	(short) ((1.13329398662226580000   *64) + 0.5),
	(short) ((-0.32883911944821814000  *64) + 0.5),
	(short) ((0.19554513282595243000   *64) + 0.5),
	(short) ((0.14815922685944111000   *64) + 0.5),
	(short) ((0.57488333402135139000   *64) + 0.5),
	(short) ((0.27695743911920739000   *64) + 0.5),
	(short) ((0.26808008793705057000   *64) + 0.5),
	(short) ((-0.66093716511226741000  *64) + 0.5),
	(short) ((1.39285707717521690000   *64) + 0.5)
	
};


static const short g_OV7670_color_matrix4gamma220[9] = 
{
	(short) ((1.12103729706096100000   *64) + 0.5),
	(short) ((-0.34968964527003177000  *64) + 0.5),
	(short) ((0.22865234820907088000   *64) + 0.5),
	(short) ((0.20402813991942725000   *64) + 0.5),
	(short) ((0.49888047239936095000   *64) + 0.5),
	(short) ((0.29709138768121185000   *64) + 0.5),
	(short) ((0.30959195236766246000   *64) + 0.5),
	(short) ((-0.67266999550758111000  *64) + 0.5),
	(short) ((1.36307804313991880000   *64) + 0.5)
};



static const short g_OV7670_color_matrix4gamma060[9] = 
{
	(short) ((1.24374368468102640000   *64) + 0.5),
	(short) ((-0.23865133497151600000  *64) + 0.5),
	(short) ((-0.00509234970951041870  *64) + 0.5),
	(short) ((-0.09849301034950121200  *64) + 0.5),
	(short) ((0.94408475321540319000   *64) + 0.5),
	(short) ((0.15440825713409798000   *64) + 0.5),
	(short) ((0.09228037737753028200   *64) + 0.5),
	(short) ((-0.64703549394003568000  *64) + 0.5),
	(short) ((1.55475511656250550000   *64) + 0.5)
};




static const short g_OV7670_color_matrix4gamma070[9] = 
{
	(short) ((1.20671412688727100000   *64) + 0.5),
	(short) ((-0.25759327524507952000  *64) + 0.5),
	(short) ((0.05087914835780847600   *64) + 0.5),
	(short) ((-0.03757692506661083200  *64) + 0.5),
	(short) ((0.84931146335382246000   *64) + 0.5),
	(short) ((0.18826546171278835000   *64) + 0.5),
	(short) ((0.13341186054888554000   *64) + 0.5),
	(short) ((-0.64486781694362949000  *64) + 0.5),
	(short) ((1.51145595639474410000   *64) + 0.5)
};



static const short g_OV7670_color_matrix4gamma080[9] = 
{
	(short) ((1.17514882451264490000   *64) + 0.5),
	(short) ((-0.27818388984429798000  *64) + 0.5),
	(short) ((0.10303506533165301000   *64) + 0.5),
	(short) ((0.02352586252846043000   *64) + 0.5),
	(short) ((0.75712330609170497000   *64) + 0.5),
	(short) ((0.21935083137983466000   *64) + 0.5),
	(short) ((0.17708524637678361000   *64) + 0.5),
	(short) ((-0.64505422755674124000  *64) + 0.5),
	(short) ((1.46796898117995770000   *64) + 0.5)
};



static const short g_OV7670_awb_thr[19] = 
{
	200, // awbwinthr
	
	0*64, // sindata
	1*64, // cosdata 
	
	 50, // Ythr0
	100, // Ythr1
	146,	// Ythr2 
	210, // Ythr3 
	
	-3, // UL1N1 
	 9, // UL1P1 
	-3, // VL1N1 
	 9, // VL1P1 
	
	 -7, //UL1N2
	  8, //UL1P2
	 -6, //VL1N2
	  8, // VL1P2
	
	 -12, // UL1N3
	  8,	 //UL1P3
	 -9, // VL1N3
	  8, //VL1P3
};


static const short g_OV7670_awb_thr_org[19] = 
{
	200, // awbwinthr
	
	0*64, // sindata
	1*64, // cosdata 
	
	 50, // Ythr0
	100, // Ythr1
	146,	// Ythr2 
	210, // Ythr3 
	
	-7, // UL1N1 
	 9, // UL1P1 
	-5, // VL1N1 
	 6, // VL1P1 
	
	 -10, //UL1N2
	  11, //UL1P2
	 -6, //VL1N2
	  7, // VL1P2
	
	 -11, // UL1N3
	  11,	 //UL1P3
	 -9, // VL1N3
	  9, //VL1P3
};

void ov7670_sensor_calibration(void)
{
	//Lenscmp
	hwIsp_luc_MaxTan8_Slop_CLP((INT16U *)g_OV7670_MaxTan8 ,(INT16U *)g_OV7670_Slope4 ,(INT16U *)g_OV7670_CLPoint);
	hwIsp_RadusF0((INT16U *)g_OV7670_Radius_File_0);
	hwIsp_RadusF1((INT16U *)g_OV7670_Radius_File_1);
	//R,G,B Linearity correction
	//hwIsp_InitLiCor((INT8U *)g_OV7670_LiTable_rgb);		
	//Gamma
	hwCdsp_InitGamma((INT32U *)g_OV7670_gamma_045_table);
	//Color Correction
	hwCdsp_SetColorMatrix_Str((INT16S *)g_OV7670_color_matrix4gamma045);
	//AWB
	gp_Cdsp_SetAWBYUV((INT16S *)g_OV7670_awb_thr);
}

/************************
 MCLK= 24Mhz;        
 PCLK=   Mhz         
 Frame width= 640
 Frame Height= 480  
*************************/

//300K YUV 15fps
static INT8U OV7670_YUV_K300_15[][2] = 
{
	{0x12, 0x80},	// Reset all registers to default values
	{0x2d, 0x40},	// dummy byte
	{0x2e, 0x00},

 #if 1	// pclk
	{0x6b, 0x0a},

	{0x11, 0x00},	// 15 FPS
//	{0x11, 0x01},	// 7.5 FPS
//	{0x11, 0x02},	// 5 FPS
//	{0x11, 0x03},	// 3.75 FPS
//	{0x11, 0x04},	// 3 FPS
//	{0x11, 0x05},	// 2.5 FPS
//	{0x11, 0x06},	// 2.14 FPS
//	{0x11, 0x07},	// 1.87 FPS
//	{0x11, 0x08},	// 1.67 FPS
//	{0x11, 0x09},	// 1.5 FPS
//	{0x11, 0x0E},	// 1 FPS
//	{0x11, 0x13},	// 0.75 FPS
//	{0x11, 0x17},	// 0.62 FPS
//	{0x11, 0x1D},	// 0.5 FPS
 #elif 1		// pclk*4
	{0x6b, 0x4a},

	{0x11, 0x01},	// 30.35 FPS
//	{0x11, 0x02},	// 22.50 FPS
//	{0x11, 0x03},	// 15 FPS
//	{0x11, 0x04},	// 12 FPS
//	{0x11, 0x05},	// 10 FPS
//	{0x11, 0x06},	// 8.57 FPS
//	{0x11, 0x07},	// 7.5 FPS
//	{0x11, 0x08},	// 6.67 FPS
//	{0x11, 0x09},	// 6 FPS
//	{0x11, 0x0E},	// 4 FPS
//	{0x11, 0x13},	// 3 FPS
//	{0x11, 0x17},	// 2.5 FPS
//	{0x11, 0x1D},	// 2 FPS
#elif 1	// pclk*6
	{0x6b, 0x8a},

	{0x11, 0x02},	// 33.76 FPS
//	{0x11, 0x03},	// 23.58 FPS
//	{0x11, 0x04},	// 20.25 FPS
//	{0x11, 0x05},	// 15 FPS
//	{0x11, 0x06},	// 12.85 FPS
//	{0x11, 0x07},	// 11.25 FPS
//	{0x11, 0x08},	// 10 FPS
//	{0x11, 0x09},	// 9 FPS
//	{0x11, 0x0E},	// 6 FPS
//	{0x11, 0x13},	// 4.5 FPS
//	{0x11, 0x17},	// 3.75 FPS
//	{0x11, 0x1D},	// 3 FPS
 #elif 1		// pclk*8
	{0x6b, 0xca},

//	{0x11, 0x03},	// 36.58 FPS
//	{0x11, 0x04},	// 25.33 FPS
//	{0x11, 0x05},	// 22.5 FPS
//	{0x11, 0x06},	// 17.14 FPS
//	{0x11, 0x07},	// 15 FPS
//	{0x11, 0x08},	// 13.33 FPS
//	{0x11, 0x09},	// 12.10 FPS
//	{0x11, 0x0E},	// 8 FPS
//	{0x11, 0x13},	// 6 FPS
//	{0x11, 0x17},	// 5 FPS
//	{0x11, 0x1D},	// 4 FPS
 #endif
	{0x09, 0x01},		// TBD: save power here
	{0x3a, 0x04},		// bit[4]: Force U and V output value for testing
	{0x67, 0x77},		// Force U value when testing
	{0x68, 0x88},		// Force V value when testing
	{0x12, 0x00},		//YUYV
	{0x17, 0x13},
	{0x18, 0x01},
	{0x32, 0xb6},
	{0x19, 0x02},
	{0x1a, 0x7a},
	{0x03, 0x0a},
	{0x0c, 0x00},
	{0x3e, 0x00},
	{0x70, 0x3a},
	{0x71, 0x35},
	{0x72, 0x11},
	{0x73, 0xf0},
	{0xa2, 0x02},

	{0x7a, 0x24},
	{0x7b, 0x04},
	{0x7c, 0x0a},
	{0x7d, 0x17},
	{0x7e, 0x32},
	{0x7f, 0x3f},
	{0x80, 0x4c},
	{0x81, 0x58},
	{0x82, 0x64},
	{0x83, 0x6f},
	{0x84, 0x7a},
	{0x85, 0x8c},
	{0x86, 0x9e},
	{0x87, 0xbb},
	{0x88, 0xd2},
	{0x89, 0xe5},

	{0x13, 0xe0},
	{0x00, 0x00},
	{0x10, 0x00},
	{0x0d, 0x40},
	{0x14, 0x18},
	{0xa5, 0x02},
	{0xab, 0x03},
	{0x24, 0x95},
	{0x25, 0x33},
	{0x26, 0xe3},
	{0x9f, 0x78},
	{0xa0, 0x68},
	{0xa1, 0x03},
	{0xa6, 0xd8},
	{0xa7, 0xd8},
	{0xa8, 0xf0},
	{0xa9, 0x90},
	{0xaa, 0x94},
	{0x13, 0xe5},

	{0x0e, 0x61},
	{0x0f, 0x4b},
	{0x16, 0x02},
	{0x1e, 0x3f}, 	// Flip (bit4) & Mirror (bit5)
	{0x21, 0x02},
	{0x22, 0x91},
	{0x29, 0x07},
	{0x33, 0x0b},
	{0x35, 0x0b},
	{0x37, 0x1d},
	{0x38, 0x71},
	{0x39, 0x2a},
	{0x3c, 0x78},
	{0x4d, 0x40},
	{0x4e, 0x20},
	{0x69, 0x00},

	{0x74, 0x10},
	{0x8d, 0x4f},
	{0x8e, 0x00},
	{0x8f, 0x00},
	{0x90, 0x00},
	{0x91, 0x00},

	{0x96, 0x00},
	{0x9a, 0x80},
	{0xb0, 0x84},
	{0xb1, 0x0c},
	{0xb2, 0x0e},
	{0xb3, 0x82},
	{0xb8, 0x0a},

	{0x43, 0x0a},
	{0x44, 0xf0},
	{0x45, 0x44},
	{0x46, 0x7a},
	{0x47, 0x27},
	{0x48, 0x3c},
	{0x59, 0xbc},
	{0x5a, 0xde},
	{0x5b, 0x54},
	{0x5c, 0x8a},
	{0x5d, 0x4b},
	{0x5e, 0x0f},
	{0x6c, 0x0a},
	{0x6d, 0x55},
	{0x6e, 0x11},
	{0x6f, 0x9e},

	{0x6a, 0x40},
	{0x01, 0x40},
	{0x02, 0x40},
	{0x13, 0xe7},

	{0x4f, 0x80},
	{0x50, 0x80},
	{0x51, 0x00},
	{0x52, 0x22},
	{0x53, 0x5e},
	{0x54, 0x80},
	{0x58, 0x9e},

	{0x62, 0x08},
	{0x63, 0x8f},
	{0x65, 0x00},
	{0x64, 0x08},
	{0x94, 0x08},
	{0x95, 0x0c},
	{0x66, 0x05},

	{0x41, 0x08},
	{0x3f, 0x00},
	{0x75, 0x05},
	{0x76, 0xe1},
	{0x4c, 0x00},
	{0x77, 0x01},
	{0x3d, 0xc2},
	{0x4b, 0x09},
	{0xc9, 0x60},
	{0x41, 0x38},
	{0x56, 0x40},

	{0x34, 0x11},
	{0x3b, 0xca},	// enable night mode
//	{0x3b, 0x4a},	// disable night mode

	{0xa4, 0x88},
	{0x96, 0x00},
	{0x97, 0x30},
	{0x98, 0x20},
	{0x99, 0x30},
	{0x9a, 0x84},
	{0x9b, 0x29},
	{0x9c, 0x03},
	{0x9d, 0x98},
	{0x9e, 0x7f},
	{0x78, 0x04},

	{0x79, 0x01},
	{0xc8, 0xf0},
	{0x79, 0x0f},
	{0xc8, 0x00},
	{0x79, 0x10},
	{0xc8, 0x7e},
	{0x79, 0x0a},
	{0xc8, 0x80},
	{0x79, 0x0b},
	{0xc8, 0x01},
	{0x79, 0x0c},
	{0xc8, 0x0f},
	{0x79, 0x0d},
	{0xc8, 0x20},
	{0x79, 0x09},
	{0xc8, 0x80},
	{0x79, 0x02},
	{0xc8, 0xc0},
	{0x79, 0x03},
	{0xc8, 0x40},
	{0x79, 0x05},
	{0xc8, 0x30},
	{0x79, 0x26},

	{0x3b, 0x00}	// 60Hz
//	{0x3b, 0x08}	// 50Hz
};
//300K_Raw MClk:24MHz,PClk:24MHz,dummy_line:1E0, 30fps
static INT8U OV7670_RAW_K300_30[][2] =
{
    {0x12, 0x80},
#if 0	//clock bypass		
	{0x11, 0x80},			
#else	
	{0x11, 0x00},		
#endif	
	//use Hsync mode and reverse Vsync
	{0x15, 0x42},
	{0x3a, 0x04},	
	{0x12, 0x01},	//RAW
#if 0	
	//h set	
	{0x17, 0x12}, //HSTART[10:3]
	{0x18, 0x01}, //HSTOP[10:3]
	{0x32, 0x84},  //[7:6] [5:3]=HSTOP[2:0]; [2:0]=HSTART[2:0]
	//v set
	{0x19, 0x01},
	{0x1a, 0x7a},
	{0x03, 0x0e},
#elif 0
	{0x17, 0x12},
	{0x18, 0x01},
	{0x32, 0xb6},
	{0x19, 0x02},
	{0x1a, 0x7a},
	{0x03, 0x0a},
#else //640x480
	{0x17, 0x11},
	{0x18, 0xB1},
	{0x32, 0x80},
	{0x19, 0x03},
	{0x1a, 0x7D},
	{0x03, 0x03},

#endif	

	{0x0c, 0x00},
	{0x3e, 0x00},
	{0x70, 0x3a},
	{0x71, 0x35},
	{0x72, 0x11},
	{0x73, 0xf0},
	{0xa2, 0x29},

	{0x7a, 0x24},
	{0x7b, 0x04},
	{0x7c, 0x0a},
	{0x7d, 0x17},
	{0x7e, 0x32},
	{0x7f, 0x3f},
	{0x80, 0x4c},
	{0x81, 0x58},
	{0x82, 0x64},
	{0x83, 0x6f},
	{0x84, 0x7a},
	{0x85, 0x8c},
	{0x86, 0x9e},
	{0x87, 0xbb},
	{0x88, 0xd2},
	{0x89, 0xe5},

	{0x13, 0xe0},
	{0x00, 0x00},
	{0x10, 0x00},
	{0x0d, 0x40},
	{0x14, 0x18},
	{0xa5, 0x02},
	{0xab, 0x03},
	{0x24, 0x95},
	{0x25, 0x33},
	{0x26, 0xe3},
	{0x9f, 0x78},
	{0xa0, 0x68},
	{0xa1, 0x03},
	{0xa6, 0xd8},
	{0xa7, 0xd8},
	{0xa8, 0xf0},
	{0xa9, 0x90},
	{0xaa, 0x94},
	{0x13, 0xe5},

	{0x0e, 0x61},
	{0x0f, 0x4b},
	{0x16, 0x02},
	{0x1e, 0x3f}, 	// Flip & Mirror
	{0x21, 0x02},
	{0x22, 0x91},
	{0x29, 0x07},
	{0x33, 0x0b},
	{0x35, 0x0b},
	{0x37, 0x1d},
	{0x38, 0x71},
	{0x39, 0x2a},
	{0x3c, 0x78},
	{0x4d, 0x40},
	{0x4e, 0x20},
	{0x69, 0x00},

//PLL	
#if 0
	{0x6b, 0x0a},	//ByPass
#elif 1
	{0x6b, 0x4a},	// pclk*4	
	{0x11, 0x01},	// 30.5 FPS
#elif 0
	{0x6b, 0x8a},	// pclk*6
#elif 0		
	{0x6b, 0xca},	// pclk*8
#endif				
		
	{0x74, 0x10},
	{0x8d, 0x4f},
	{0x8e, 0x00},
	{0x8f, 0x00},
	{0x90, 0x00},
	{0x91, 0x00},
/*//降低Frame Rate可增加Dummy Line
	{0x92, 0xE0},	//Dummy Line_L
	{0x93, 0x01},	//Dummy Line_H
*/	
	{0x96, 0x00},
	{0x9a, 0x80},
	{0xb0, 0x84},
	{0xb1, 0x0c},
	{0xb2, 0x0e},
	{0xb3, 0x82},
	{0xb8, 0x0a},

	{0x43, 0x0a},
	{0x44, 0xf0},
	{0x45, 0x44},
	{0x46, 0x7a},
	{0x47, 0x27},
	{0x48, 0x3c},
	{0x59, 0xbc},
	{0x5a, 0xde},
	{0x5b, 0x54},
	{0x5c, 0x8a},
	{0x5d, 0x4b},
	{0x5e, 0x0f},
	{0x6c, 0x0a},
	{0x6d, 0x55},
	{0x6e, 0x11},
	{0x6f, 0x9e},

	{0x6a, 0x40},
	{0x01, 0x40},
	{0x02, 0x40},
	//{0x13, 0x80},	//0xe7: enable AWB/AGC/AEC,0x80:disbale AE...
	{0x13, 0xe7},
	
	{0x4f, 0x80},
	{0x50, 0x80},
	{0x51, 0x00},
	{0x52, 0x22},
	{0x53, 0x5e},
	{0x54, 0x80},
	{0x58, 0x9e},

	{0x62, 0x08},
	{0x63, 0x8f},
	{0x65, 0x00},
	{0x64, 0x08},
	{0x94, 0x08},
	{0x95, 0x0c},
	{0x66, 0x05},

	{0x41, 0x08},
	{0x3f, 0x00},
	{0x75, 0x05},
	{0x76, 0xe1},
	{0x4c, 0x00},
	{0x77, 0x01},
	//{0x3d, 0xc2},
	{0x3d, 0x08},//disable gamma and uv saturation
	{0x4b, 0x09},
	{0xc9, 0x60},
	{0x41, 0x38},
	{0x56, 0x40},

	{0x34, 0x11},
	{0x3b, 0x4a},//disable  night mode
	{0xa4, 0x88},
	{0x96, 0x00},
	{0x97, 0x30},
	{0x98, 0x20},
	{0x99, 0x30},
	{0x9a, 0x84},
	{0x9b, 0x29},
	{0x9c, 0x03},
	{0x9d, 0x98},
	{0x9e, 0x7f},
	{0x78, 0x04},
	
	{0x79, 0x01},
	{0xc8, 0xf0},
	{0x79, 0x0f},
	{0xc8, 0x00},
	{0x79, 0x10},
	{0xc8, 0x7e},
	{0x79, 0x0a},
	{0xc8, 0x80},
	{0x79, 0x0b},
	{0xc8, 0x01},
	{0x79, 0x0c},
	{0xc8, 0x0f},
	{0x79, 0x0d},
	{0xc8, 0x20},
	{0x79, 0x09},
	{0xc8, 0x80},
	{0x79, 0x02},
	{0xc8, 0xc0},
	{0x79, 0x03},
	{0xc8, 0x40},
	{0x79, 0x05},
	{0xc8, 0x30},
	{0x79, 0x26},
	{0x3b, 0x00}		//60Hz = 0x00, 
	//{0x3b, 0x08}    	//50Hz = 0x08
};

/****************************************************************************/

void sensor_ov7670_init(void)
{
	//i2c_bus_handle_t i2c_handle; 
	INT32U i, slave_id;
	/*
	  參數設值
	*/
	//i2c_handle.slaveAddr = 0x42;
	//i2c_handle.clkRate = 100;
	slave_id = 0x42;
	
	if(sensor_format == OV7670_YUYV){
			if(SENSOR_WIDTH == 640 && SENSOR_HEIGHT == 480)
			{
				for (i=0; i<sizeof(OV7670_YUV_K300_15)/2; i++) 
				{
					//reg_1byte_data_1byte_write(&i2c_handle,OV7670_YUV_K300_15[i][0], OV7670_YUV_K300_15[i][1]);
					sccb_write(slave_id,OV7670_YUV_K300_15[i][0], OV7670_YUV_K300_15[i][1]);
				}
			}			
			else 
			{
				while(1);
			}
	}
	else if(sensor_format == OV7670_BAYER_RAW){
		
			if(SENSOR_WIDTH == 640 && SENSOR_HEIGHT == 480)
			{
				for (i=0; i<sizeof(OV7670_RAW_K300_30)/2; i++) 
				{
					//reg_1byte_data_1byte_write(&i2c_handle,OV7670_RAW_K300_30[i][0], OV7670_RAW_K300_30[i][1]);
					sccb_write(slave_id,OV7670_RAW_K300_30[i][0], OV7670_RAW_K300_30[i][1]);
				}
			}			
			else 
			{
				while(1);
			}
	}else{		
		while(1);
	}
}


//=== This is for code configuration DON'T REMOVE or MODIFY it ===//
#endif //(USE_SENSOR_NAME == SENSOR_OV7670)     //
//================================================================//
