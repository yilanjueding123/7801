#include "ap_display.h"
#include "avi_encoder_app.h"
#include "my_avi_encoder_state.h"
#include "drv_l1_hdmi.h"
#include "ap_state_config.h"
#include "ap_state_resource.h"
#include "task_video_decoder_cfg.h"
#include "drv_l1_wrap.h"

#include "LDWs.h"
#if Enable_Lane_Departure_Warning_System
extern INT8U LDWS_Enable_Flag;
extern LDW_DISPLAY ldw_dis;
extern INT32U red_line_postion;
extern INT32U ldw_line_postion_L_x;
extern INT32U ldw_line_postion_L_y;
extern INT32U ldw_line_postion_R_x;
extern INT32U ldw_line_postion_R_y;

extern LDWsParameter LDWPar;

#endif


#define STR_ICON_MAX_NUM	5

#define LCD_RESO_720X480    4


extern void ap_peripheral_lcd_backlight_set(INT8U type);

extern INT32S sys_msdc_clk_set(INT32U clk_mhz);
extern INT32U MSDC_CLK;
extern INT32U I80_diplay_buff;
extern INT32U TEST_Display_Data_Conv(INT32U input_buff,INT16U dev_width, INT16U dev_height);
extern void ap_setting_icon_draw(INT16U *frame_buff, INT16U *icon_stream, DISPLAY_ICONSHOW *icon_info, INT8U type);
extern void ap_setting_icon_draw_tv(INT16U *frame_buff, INT16U *icon_stream, DISPLAY_ICONSHOW *icon_info, INT8U type);
extern volatile INT32U g_videolapse_frame_cnt;

static volatile INT8U gp420conv_stop_flag = 0;

INT8U *display_frame[DISPLAY_BUF_NUM_MAX]={0};
INT32U display_dma_queue[DISPLAY_BUF_NUM_MAX]={0};  // FIFO of display buffer address
INT32U display_isr_queue[DISPLAY_BUF_NUM_MAX]={0};

INT32U display_tmp_tft_frame = 0;  //when switch to TV or HDMI, tft has its own buffer

static INT32U display_icon_sts[(ICOM_MAX_NUM >> 5) + 1];

static INT32U display_os_time = 0;
static INT32U last_os_time;
static INT32U display_os_time_browser = 0;
//static INT32U display_MP3_Play_time = 0;
static INT32U display_RTC_date_time = 0;

static INT32U display_effect_buff;
static INT32U display_setting_buff;
static STR_ICON display_str;

 INT8U display_str_background = 0;

static STR_ICON_EXT display_str_queue[STR_ICON_MAX_NUM];

static DISPLAY_REC_TIME display_rec_time = {0};
static DISPLAY_REC_TIME display_total_time = {0};
static DISPLAY_REC_TIME display_rec_lapse_time = {0};

static INT16U display_effect_offset;
static INT8U display_effect_sts;
static INT8U video_preview_timerid;
static INT8U display_mp3_index_sts;
static INT8U display_mp3_input_num_sts;

static INT8U timer_force_en = 0;
static INT8U timer_force_en_browser = 0;

static INT32U display_left_rec_time = 0;
static INT32U browse_curr_time;
static INT32S display_browser_total_time;

static INT8U   g_Disp_Device ;

static INT8U Tv_Interlace_Isr_Cnt;
static INT8U Tv_Interface_Format;


#if USE_PANEL_NAME == PANEL_T20P82_ST7789V
static INT8U   g_tv_hdmi_display = 0;
#endif

INT8U display_mp3_volume;
INT16U display_mp3_play_index;
INT16U display_mp3_total_index;
INT16U display_mp3_FM_channel;
INT16U display_mp3_input_num;

#define PLAY_INDEX_X		 56
#define PLAY_TOTAL_INDEX_X	120
#define PLAY_INDEX_Y		 200
#define MP3_VOLUME_X		 74+32+6
#define MP3_VOLUME_Y		 200-32
#define FM_CHANNEL_X		 10+14+14+14+6+14-4
#define FM_CHANNEL_Y		 168-28
#define MP3_INPUT_NUM_X		 260
#define MP3_INPUT_NUM_Y		 140
void ap_display_mp3_index_sts_set(INT8U type);
void ap_display_mp3_input_num_sts_set(INT8U type);
void ap_display_left_rec_time_draw(INT32U time, INT8U flag);

void ap_display_TE_sync_I80_start(void);
void ap_display_TE_sync_I80_stop(void);

#define C_ICON_OFF_Y		35
#define C_ICON_OFF_Y_TV		70

#define C_ICON_VOL_OFFSET		15
#define C_ICON_VOL_OFFSET_TV	20

#define C_ICON_VOL_OFFSET_HDMI	15*2


static DISPLAY_ICONSHOW display_icon_item[ICOM_MAX_NUM] = {
	{NULL, NULL, NULL, NULL, NULL},
	{ 42,  28, TRANSPARENT_COLOR,   TFT_WIDTH-42,   1},	// ICON_BATTERY_0
	{ 42,  28, TRANSPARENT_COLOR,   TFT_WIDTH-42,   1},	// ICON_BATTERY_1
	{ 42,  28, TRANSPARENT_COLOR,   TFT_WIDTH-42,   1},	// ICON_BATTERY_2
	{ 42,  28, TRANSPARENT_COLOR,   TFT_WIDTH-42,   1},	// ICON_BATTERY_3
	{ 42,  28, TRANSPARENT_COLOR,   TFT_WIDTH-42,   1},	// ICON_BATTERY_4
	
	{ 28,  28, TRANSPARENT_COLOR, 10,   1},	// ICON_CAPTURE
	{ 32,  32, TRANSPARENT_COLOR, 0,   0},	// ICON_VIDEO_RECORD
	{ 28,  28, TRANSPARENT_COLOR, 2,   1},	// ICON_PLAYBACK
	{ 32,  32, TRANSPARENT_COLOR, 50,   0},	// ICON_BASE_SETTING
	
	{ 28,  28, TRANSPARENT_COLOR, 0,   210-28},	// ICON_MOTION_DETECT
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_REC
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_1S_R
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_2S_R
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_5S_R 
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_10S_R
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_30S_R
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_60S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   30},	// ICON_CAP_MODE_3S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   30},	// ICON_CAP_MODE_5S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   30},	// ICON_CAP_MODE_10S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   30},	// ICON_CAP_MODE_20S_R
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_REC_YELLOW
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_1S_Y
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_2S_Y
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_5S_Y
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_10S_Y
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_30S_Y
	{ 28,  28, TRANSPARENT_COLOR, 0,   1},	// ICON_VIDEOLAPASE_60S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   30},	// ICON_CAP_MODE_3S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   30},	// ICON_CAP_MODE_5S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   30},	// ICON_CAP_MODE_10S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   30},	// ICON_CAP_MODE_20S_Y
	{ 28,  28, TRANSPARENT_COLOR,   2, 1},	// ICON_PLAY					//for VGA
	{ 28,  28, TRANSPARENT_COLOR,   2, 1},	// ICON_PAUSE					//for VGA
	{ 28,  28, TRANSPARENT_COLOR, 248,   1},	// ICON_MIC_OFF
	{ 28,  28, TRANSPARENT_COLOR, 248,   1},	// ICON_MIC_ON
	{ 32,  32, TRANSPARENT_COLOR, 130,  10},	// ICON_IR_ON, not used
	{ 64,  64, TRANSPARENT_COLOR, 128,  88},	// ICON_FOCUS, not used
	{ 32,  32, TRANSPARENT_COLOR, TFT_WIDTH-40,   0},	// ICON_VIDEO

	{ 32,  32, TRANSPARENT_COLOR, TFT_WIDTH-40,   160},	// ICON_SD_CARD
	{ 32,  32, TRANSPARENT_COLOR, TFT_WIDTH-40,   160},	// ICON_INTERNAL_MEMORY	
	{ 32,  32, TRANSPARENT_COLOR, TFT_WIDTH-40,   160},	// ICON_NO_SD_CARD

	{ 48,  28, TRANSPARENT_COLOR, 199,   1},	// ICON_VIDEO_RECORD_CYC_OFF
	{ 48,  28, TRANSPARENT_COLOR, 199,   1},	// ICON_VIDEO_RECORD_CYC_1MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 199,   1},	// ICON_VIDEO_RECORD_CYC_2MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 199,   1},	// ICON_VIDEO_RECORD_CYC_3MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 199,   1},	// ICON_VIDEO_RECORD_CYC_5MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 199,   1},	// ICON_VIDEO_RECORD_CYC_10MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 199,   1},	// ICON_VIDEO_RECORD_MOTION_10SECOND
	
	{ 64,  28, TRANSPARENT_COLOR, 129,   1},	// ICON_1080P30
	{ 64,  28, TRANSPARENT_COLOR, 129,   1},	// ICON_720P60
	{ 64,  28, TRANSPARENT_COLOR, 129,   1},	// ICON_720P30
	{ 64,  28, TRANSPARENT_COLOR, 129,   1},	// ICON_WVGA
	{ 64,  28, TRANSPARENT_COLOR, 129,   1},	// ICON_VGA

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV6
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV0
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV_1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV_2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV_3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV_4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV_5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*3},	// ICON_VIDEO_EV_6

	{ 32,  32, TRANSPARENT_COLOR, 2,   160},	// ICON_VIDEO_LDW_SART
	{ 32,  32, TRANSPARENT_COLOR, 2,   160},	// ICON_VIDEO_LDW_ACTIVE

	{256, 128, TRANSPARENT_COLOR,  32, 	40},	// ICON_USB_CONNECT
	{ 16,  96, TRANSPARENT_COLOR,  10, 	72},	// ICON_SCROLL_BAR
	{  8,   8, TRANSPARENT_COLOR,  14, 149},	// ICON_SCROLL_BAR_IDX
	{ 32,  32, TRANSPARENT_COLOR,  10,  168},	// ICON_MP3_PLAY				//27 MP3 icon start
	{ 32,  32, TRANSPARENT_COLOR,  10,  168},	// ICON_MP3_PAUSE
	{ 32,  32, TRANSPARENT_COLOR,  42,  168},	// ICON_MP3_PLAY_ONE
	{ 32,  32, TRANSPARENT_COLOR,  42,  168},	// ICON_MP3_PLAY_ALL
	{128,  32, TRANSPARENT_COLOR,  10,  200},	// ICON_MP3_INDEX
	{ 32,  32, TRANSPARENT_COLOR,  74,  168},	// ICON_MP3_VOLUME
	{ 32,  32, TRANSPARENT_COLOR,  74,  168}, 	// ICON_MP3_MUTE
	{ 32,  32, TRANSPARENT_COLOR,  10,  168}, 	// ICON_MP3_STOP				//34 MP3 icon end
	{ 42,  28, TRANSPARENT_COLOR,  TFT_WIDTH-42,   1},	// ICON_BATTERY_CHARGED
	{ 28,  28, TRANSPARENT_COLOR,  2,   80-14},	// ICON_LOCKED
	{ 28,  28, TRANSPARENT_COLOR,  5,   160-14},	// ICON_LOCKED1

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV6
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV0
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_6

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_AUTO
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_DAYLIGHT
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_CLOUDY
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_TUNGSTEN
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_FLUORESCENT

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*5},	// ICON_CAPTURE_ISO_AUTO
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*5},	// ICON_CAPTURE_ISO_100
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*5},	// ICON_CAPTURE_ISO_200
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*5},	// ICON_CAPTURE_ISO_400
	
	{ 32,  32, TRANSPARENT_COLOR,  78,   0},	// ICON_CAPTURE_ANTI_SHAKING 
	{ 32,  32, TRANSPARENT_COLOR,  78+38,   0},	// ICON_CAPTURE_SEQUENCE 

	{ 32,  32, TRANSPARENT_COLOR, TFT_WIDTH-40,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_QUALITY_FINE
	{ 32,  32, TRANSPARENT_COLOR, TFT_WIDTH-40,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_QUALITY_NORMAL
	{ 32,  32, TRANSPARENT_COLOR, TFT_WIDTH-40,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_QUALITY_ECONOMY

	{ 56,  28, TRANSPARENT_COLOR, 160+56,   210},	// ICON_PLAYBACK_PLAY
	{ 64,  32, TRANSPARENT_COLOR, 2,   210-5},	// ICON_PLAYBACK_PAUSE,
	{ 32,  32, TRANSPARENT_COLOR, 2,   0},	// ICON_PLAYBACK_MOVIE,

	{ 32,  32, TRANSPARENT_COLOR, 2,   210-5-35},	// ICON_PLAYBACK_VOLUME_TITLE,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*0,   210-5-35},	// ICON_PLAYBACK_VOLUME_WHITE1,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*1,   210-5-35},	// ICON_PLAYBACK_VOLUME_WHITE2,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*2,   210-5-35},	// ICON_PLAYBACK_VOLUME_WHITE3,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*3,   210-5-35},	// ICON_PLAYBACK_VOLUME_WHITE4,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*4,   210-5-35},	// ICON_PLAYBACK_VOLUME_WHITE5,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*5,   210-5-35},	// ICON_PLAYBACK_VOLUME_WHITE6,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*6,   210-5-35},	// ICON_PLAYBACK_VOLUME_WHITE7,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*7,   210-5-35},	// ICON_PLAYBACK_VOLUME_WHITE8,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*0,   210-5-35},	// ICON_PLAYBACK_VOLUME_READ1,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*1,   210-5-35},	// ICON_PLAYBACK_VOLUME_READ2,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*2,   210-5-35},	// ICON_PLAYBACK_VOLUME_READ3,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*3,   210-5-35},	// ICON_PLAYBACK_VOLUME_READ4,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*4,   210-5-35},	// ICON_PLAYBACK_VOLUME_READ5,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*5,   210-5-35},	// ICON_PLAYBACK_VOLUME_READ6,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*6,   210-5-35},	// ICON_PLAYBACK_VOLUME_READ7,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET*7,   210-5-35},	// ICON_PLAYBACK_VOLUME_READ8,
	
	{ 32,  32, TRANSPARENT_COLOR, 280,   0},	// ICON_AUDIO_RECORD
	{ 32,  32, TRANSPARENT_COLOR,  55, 210},	// ICON_2X
	{ 32,  32, TRANSPARENT_COLOR,  55, 210},	// ICON_4X
	{ 32,  32, TRANSPARENT_COLOR,  100, 210},	// ICON_FORWARD
	{ 32,  32, TRANSPARENT_COLOR,  100, 210},	// ICON_BACKWARD
	{ 28,  28, TRANSPARENT_COLOR,   2, 1},	// ICON_PLAY1					//for pseudo 720P
	{ 28,  28, TRANSPARENT_COLOR,   2, 1}		// ICON_PAUSE1					//for pseudo 720P
};

#if TV_WIDTH == 720

static DISPLAY_ICONSHOW display_tv_icon_item[ICOM_MAX_NUM] = {
	{NULL, NULL, NULL, NULL, NULL},
	{ 32,  32, TRANSPARENT_COLOR,   TV_WIDTH-75,   TV_HEIGHT-50},	// ICON_BATTERY_0, #
	{ 32,  32, TRANSPARENT_COLOR,   TV_WIDTH-75,   TV_HEIGHT-50},	// ICON_BATTERY_1, #
	{ 32,  32, TRANSPARENT_COLOR,   TV_WIDTH-75,   TV_HEIGHT-50},	// ICON_BATTERY_2, #
	{ 32,  32, TRANSPARENT_COLOR,   TV_WIDTH-75,   TV_HEIGHT-50},	// ICON_BATTERY_3, #

	{ 32,  32, TRANSPARENT_COLOR, 35,   25},	// ICON_CAPTURE,		#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25},	// ICON_VIDEO_RECORD,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25},	// ICON_PLAYBACK,		#
	{ 32,  32, TRANSPARENT_COLOR, 50,   0},	// ICON_BASE_SETTING

	{ 32,  32, TRANSPARENT_COLOR,  35,   25+C_ICON_OFF_Y_TV*2},	// ICON_MOTION_DETECT, 	#
	{ 32,  32, TRANSPARENT_COLOR,  100,  25},	// ICON_REC,						#
	{ 32,  32, TRANSPARENT_COLOR,  35, 	400},	// ICON_PLAY			//for VGA,	#
	{ 32,  32, TRANSPARENT_COLOR,  35,  400},	// ICON_PAUSE			//for VGA,	#
	{ 32,  32, TRANSPARENT_COLOR,  150, 25},	// ICON_MIC_OFF,					#
	{ 32,  32, TRANSPARENT_COLOR, 130,  25},	// ICON_IR_ON, not used
	{ 64,  64, TRANSPARENT_COLOR, 128,  88},	// ICON_FOCUS, not used
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-75,   25},	// ICON_VIDEO,				#

	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-75,   TV_HEIGHT-120},	// ICON_SD_CARD,			#
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-75,   TV_HEIGHT-120},	// ICON_INTERNAL_MEMORY,	#
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-75,   TV_HEIGHT-120},	// ICON_NO_SD_CARD,			#

	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_VIDEO_RECORD_CYC_1MINUTE,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_VIDEO_RECORD_CYC_2MINUTE,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_VIDEO_RECORD_CYC_3MINUTE,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_VIDEO_RECORD_CYC_5MINUTE,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_VIDEO_RECORD_CYC_10MINUTE,	#

	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV6,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV5,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV4,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV3,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV2,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV1,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV0,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_1,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_2,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_3,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_4,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_5,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_6,	#

	{ 32,  32, TRANSPARENT_COLOR, 35,   TV_HEIGHT-120},	// ICON_VIDEO_LDW_SART
	{ 32,  32, TRANSPARENT_COLOR, 35,   TV_HEIGHT-120},	// ICON_VIDEO_LDW_ACTIVE

	{256, 128, TRANSPARENT_COLOR,  32, 	40},	// ICON_USB_CONNECT
	{ 16,  96, TRANSPARENT_COLOR,  10, 	72},	// ICON_SCROLL_BAR
	{  8,   8, TRANSPARENT_COLOR,  14, 149},	// ICON_SCROLL_BAR_IDX
	{ 32,  32, TRANSPARENT_COLOR,  10,  168},	// ICON_MP3_PLAY				//27 MP3 icon start
	{ 32,  32, TRANSPARENT_COLOR,  10,  168},	// ICON_MP3_PAUSE
	{ 32,  32, TRANSPARENT_COLOR,  42,  168},	// ICON_MP3_PLAY_ONE
	{ 32,  32, TRANSPARENT_COLOR,  42,  168},	// ICON_MP3_PLAY_ALL
	{128,  32, TRANSPARENT_COLOR,  10,  200},	// ICON_MP3_INDEX
	{ 32,  32, TRANSPARENT_COLOR,  74,  168},	// ICON_MP3_VOLUME
	{ 32,  32, TRANSPARENT_COLOR,  74,  168}, 	// ICON_MP3_MUTE
	{ 32,  32, TRANSPARENT_COLOR,  10,  168}, 	// ICON_MP3_STOP				//34 MP3 icon end
	{ 32,  32, TRANSPARENT_COLOR,  TV_WIDTH-75,   TV_HEIGHT-50},	// ICON_BATTERY_CHARGED,	#
	{ 32,  32, TRANSPARENT_COLOR, 200,   25},	// ICON_LOCKED,		#
	{ 32,  32, TRANSPARENT_COLOR, 200,   25},	// ICON_LOCKED1,	#

	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV6,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV5,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV4,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV3,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV2,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV1,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV0,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_1,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_2,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_3,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_4,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_5,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_6,	#

	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_AUTO,			#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_DAYLIGHT,		#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_CLOUDY,		#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_TUNGSTEN,		#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_FLUORESCENT,	#

	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*5},	// ICON_CAPTURE_ISO_AUTO,		#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*5},	// ICON_CAPTURE_ISO_100,		#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*5},	// ICON_CAPTURE_ISO_200,		#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25+C_ICON_OFF_Y_TV*5},	// ICON_CAPTURE_ISO_400,		#

	{ 32,  32, TRANSPARENT_COLOR,  100,   25},	// ICON_CAPTURE_ANTI_SHAKING,	#
	{ 32,  32, TRANSPARENT_COLOR,  160,   25},	// ICON_CAPTURE_SEQUENCE,		#

	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-75,   25+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_QUALITY_FINE,		#
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-75,   25+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_QUALITY_NORMAL,		#
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-75,   25+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_QUALITY_ECONOMY,	#

	{ 64,  32, TRANSPARENT_COLOR, 35,   TV_HEIGHT-80},	// ICON_PLAYBACK_PLAY,	#
	{ 64,  32, TRANSPARENT_COLOR, 35,   TV_HEIGHT-80},	// ICON_PLAYBACK_PAUSE,	#
	{ 32,  32, TRANSPARENT_COLOR, 35,   25},	// ICON_PLAYBACK_MOVIE,			#

	{ 32,  32, TRANSPARENT_COLOR, 35,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_TITLE,							#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*0,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE1,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*1,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE2,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*2,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE3,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*3,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE4,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*4,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE5,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*5,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE6,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*6,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE7,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*7,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE8,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*0,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ1,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*1,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ2,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*2,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ3,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*3,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ4,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*4,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ5,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*5,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ6,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*6,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ7,	#
	{ 32,  32, TRANSPARENT_COLOR, 35+30+C_ICON_VOL_OFFSET_TV*7,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ8,	#

	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-75,   25},	// ICON_AUDIO_RECORD, not used
	{ 32,  32, TRANSPARENT_COLOR,  55, 210},	// ICON_2X
	{ 32,  32, TRANSPARENT_COLOR,  55, 210},	// ICON_4X
	{ 32,  32, TRANSPARENT_COLOR,  100, 210},	// ICON_FORWARD
	{ 32,  32, TRANSPARENT_COLOR,  100, 210},	// ICON_BACKWARD
	{ 32,  32, TRANSPARENT_COLOR,   0, 208},	// ICON_PLAY1					//for pseudo 720P
	{ 32,  32, TRANSPARENT_COLOR,   0, 208}		// ICON_PAUSE1					//for pseudo 720P
};

#elif TV_WIDTH == 640

static DISPLAY_ICONSHOW display_tv_icon_item[ICOM_MAX_NUM] = {
	{NULL, NULL, NULL, NULL, NULL},
	{ 42,  28, TRANSPARENT_COLOR,   TV_WIDTH-50,   25},	// ICON_BATTERY_0
	{ 42,  28, TRANSPARENT_COLOR,   TV_WIDTH-50,   25},	// ICON_BATTERY_1
	{ 42,  28, TRANSPARENT_COLOR,   TV_WIDTH-50,   25},	// ICON_BATTERY_2
	{ 42,  28, TRANSPARENT_COLOR,   TV_WIDTH-50,   25},	// ICON_BATTERY_3
	{ 42,  28, TRANSPARENT_COLOR,   TV_WIDTH-50,   25},	// ICON_BATTERY_4

	{ 28,  28, TRANSPARENT_COLOR, 20,   25},	// ICON_CAPTURE
	{ 32,  32, TRANSPARENT_COLOR, 10,   25},	// ICON_VIDEO_RECORD
	{ 28,  28, TRANSPARENT_COLOR, 20,   25},	// ICON_PLAYBACK
	{ 32,  32, TRANSPARENT_COLOR, 50,   0},	// ICON_BASE_SETTING

	{ 28,  28, TRANSPARENT_COLOR, 10,   430},	// ICON_MOTION_DETECT
	{ 28,  28, TRANSPARENT_COLOR, 10,   25},	// ICON_REC
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_1S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_2S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_5S_R 
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_10S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_30S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_60S_R
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_3S_R
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_5S_R
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_10S_R
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_20S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   25},	// ICON_REC_YELLOW
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_1S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_2S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_5S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_10S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_30S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_60S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_3S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_5S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_10S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_20S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20, 25},	// ICON_PLAY					//for VGA
	{ 28,  28, TRANSPARENT_COLOR, 20, 25},	// ICON_PAUSE					//for VGA
	{ 28,  28, TRANSPARENT_COLOR, 348,   26},	// ICON_MIC_OFF
	{ 28,  28, TRANSPARENT_COLOR, 348,   26},	// ICON_MIC_ON
	{ 32,  32, TRANSPARENT_COLOR, 130,  10},	// ICON_IR_ON, not used
	{ 64,  64, TRANSPARENT_COLOR, 128,  88},	// ICON_FOCUS, not used
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   0},	// ICON_VIDEO

	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   160},	// ICON_SD_CARD
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   160},	// ICON_INTERNAL_MEMORY	
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   160},	// ICON_NO_SD_CARD

	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_OFF
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_1MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_2MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_3MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_5MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_10MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_MOTION_10SECOND

	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_1080P30
	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_720P60
	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_720P30
	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_WVGA
	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_VGA

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV6
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV0
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_6

	{ 32,  32, TRANSPARENT_COLOR, 2,   160},	// ICON_VIDEO_LDW_SART
	{ 32,  32, TRANSPARENT_COLOR, 2,   160},	// ICON_VIDEO_LDW_ACTIVE

	{256, 128, TRANSPARENT_COLOR,  32, 	40},	// ICON_USB_CONNECT
	{ 16,  96, TRANSPARENT_COLOR,  10, 	72},	// ICON_SCROLL_BAR
	{  8,   8, TRANSPARENT_COLOR,  14, 149},	// ICON_SCROLL_BAR_IDX
	{ 32,  32, TRANSPARENT_COLOR,  10,  168},	// ICON_MP3_PLAY				//27 MP3 icon start
	{ 32,  32, TRANSPARENT_COLOR,  10,  168},	// ICON_MP3_PAUSE
	{ 32,  32, TRANSPARENT_COLOR,  42,  168},	// ICON_MP3_PLAY_ONE
	{ 32,  32, TRANSPARENT_COLOR,  42,  168},	// ICON_MP3_PLAY_ALL
	{128,  32, TRANSPARENT_COLOR,  10,  200},	// ICON_MP3_INDEX
	{ 32,  32, TRANSPARENT_COLOR,  74,  168},	// ICON_MP3_VOLUME
	{ 32,  32, TRANSPARENT_COLOR,  74,  168}, 	// ICON_MP3_MUTE
	{ 32,  32, TRANSPARENT_COLOR,  10,  168}, 	// ICON_MP3_STOP				//34 MP3 icon end
	{ 42,  28, TRANSPARENT_COLOR,  TV_WIDTH-50,   10},	// ICON_BATTERY_CHARGED
	{ 28,  28, TRANSPARENT_COLOR,  10,   160-14},	// ICON_LOCKED
	{ 28,  28, TRANSPARENT_COLOR,  20,   320-14},	// ICON_LOCKED1

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV6
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV0
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*1},	// ICON_CAPTURE_EV_6

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_AUTO
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_DAYLIGHT
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_CLOUDY
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_TUNGSTEN
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_WHITE_BALANCE_FLUORESCENT

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*5},	// ICON_CAPTURE_ISO_AUTO
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*5},	// ICON_CAPTURE_ISO_100
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*5},	// ICON_CAPTURE_ISO_200
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*5},	// ICON_CAPTURE_ISO_400

	{ 32,  32, TRANSPARENT_COLOR,  78,   0},	// ICON_CAPTURE_ANTI_SHAKING 
	{ 32,  32, TRANSPARENT_COLOR,  78+38,   0},	// ICON_CAPTURE_SEQUENCE 

	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   0+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_QUALITY_FINE
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   0+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_QUALITY_NORMAL
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   0+C_ICON_OFF_Y_TV*2},	// ICON_CAPTURE_QUALITY_ECONOMY

	{ 56,  28, TRANSPARENT_COLOR, 40,   430},	// ICON_PLAYBACK_PLAY
	{ 64,  32, TRANSPARENT_COLOR, 40,   430},	// ICON_PLAYBACK_PAUSE,
	{ 32,  32, TRANSPARENT_COLOR, 2,   0},	// ICON_PLAYBACK_MOVIE,

	{ 32,  32, TRANSPARENT_COLOR, 2,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_TITLE,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*0,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE1,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*1,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE2,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*2,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE3,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*3,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE4,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*4,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE5,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*5,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE6,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*6,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE7,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*7,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_WHITE8,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*0,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ1,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*1,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ2,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*2,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ3,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*3,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ4,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*4,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ5,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*5,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ6,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*6,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ7,
	{ 32,  32, TRANSPARENT_COLOR, 2+30+C_ICON_VOL_OFFSET_TV*7,   TV_HEIGHT-120},	// ICON_PLAYBACK_VOLUME_READ8,

	{ 32,  32, TRANSPARENT_COLOR, 280,   0},	// ICON_AUDIO_RECORD
	{ 32,  32, TRANSPARENT_COLOR,  55, 210},	// ICON_2X
	{ 32,  32, TRANSPARENT_COLOR,  55, 210},	// ICON_4X
	{ 32,  32, TRANSPARENT_COLOR,  100, 210},	// ICON_FORWARD
	{ 32,  32, TRANSPARENT_COLOR,  100, 210},	// ICON_BACKWARD
	{ 28,  28, TRANSPARENT_COLOR,   20, 26},	// ICON_PLAY1					//for pseudo 720P
	{ 28,  28, TRANSPARENT_COLOR,   20, 26}		// ICON_PAUSE1					//for pseudo 720P
};

#endif

static DISPLAY_ICONSHOW display_hdmi_icon_item[ICOM_MAX_NUM] = {
	{NULL, NULL, NULL, NULL, NULL},
	{ 64,  64, TRANSPARENT_COLOR_YUYV,   1180-C_ICON_HDMI_OFFSET,   640},	// ICON_BATTERY_0	//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV,   1180-C_ICON_HDMI_OFFSET,   640},	// ICON_BATTERY_1	//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV,   1180-C_ICON_HDMI_OFFSET,   640},	// ICON_BATTERY_2	//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV,   1180-C_ICON_HDMI_OFFSET,   640},	// ICON_BATTERY_3	//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV,   1180-C_ICON_HDMI_OFFSET,   640},	// ICON_BATTERY_4	//hdmi use
	
	{ 28,  28, TRANSPARENT_COLOR, 2,   0},		// ICON_CAPTURE
	{ 28,  28, TRANSPARENT_COLOR, 2,   0},		// ICON_VIDEO_RECORD
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+C_ICON_HDMI_OFFSET,  20},		// ICON_PLAYBACK			//hdmi use
	{ 32,  32, TRANSPARENT_COLOR, 50,   0},	// ICON_BASE_SETTING

	{ 28,  28, TRANSPARENT_COLOR, 10,   430},	// ICON_MOTION_DETECT
	{ 28,  28, TRANSPARENT_COLOR, 10,   TV_HEIGHT-55},	// ICON_REC
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_1S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_2S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_5S_R 
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_10S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_30S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_60S_R
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_3S_R
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_5S_R
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_10S_R
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_20S_R
	{ 28,  28, TRANSPARENT_COLOR, 10,   25},	// ICON_REC_YELLOW
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_1S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_2S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_5S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_10S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_30S_Y
	{ 28,  28, TRANSPARENT_COLOR, 10,   26},	// ICON_VIDEOLAPASE_60S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_3S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_5S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_10S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20,   65},	// ICON_CAP_MODE_20S_Y
	{ 28,  28, TRANSPARENT_COLOR, 20, 25},	// ICON_PLAY					//for VGA
	{ 28,  28, TRANSPARENT_COLOR, 20, 25},	// ICON_PAUSE					//for VGA
	{ 28,  28, TRANSPARENT_COLOR, 348,   26},	// ICON_MIC_OFF
	{ 28,  28, TRANSPARENT_COLOR, 348,   26},	// ICON_MIC_ON
	{ 32,  32, TRANSPARENT_COLOR, 130,  10},	// ICON_IR_ON, not used
	{ 64,  64, TRANSPARENT_COLOR, 128,  88},	// ICON_FOCUS, not used
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   0},	// ICON_VIDEO

	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   160},	// ICON_SD_CARD
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   160},	// ICON_INTERNAL_MEMORY	
	{ 32,  32, TRANSPARENT_COLOR, TV_WIDTH-40,   160},	// ICON_NO_SD_CARD

	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_OFF
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_1MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_2MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_3MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_5MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_CYC_10MINUTE
	{ 48,  28, TRANSPARENT_COLOR, 299,   26},	// ICON_VIDEO_RECORD_MOTION_10SECOND

	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_1080P30
	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_720P60
	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_720P30
	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_WVGA
	{ 64,  28, TRANSPARENT_COLOR, 229,   26},	// ICON_VGA

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV6
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV0
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y_TV*3},	// ICON_VIDEO_EV_6

	{ 32,  32, TRANSPARENT_COLOR, 2,   160},	// ICON_VIDEO_LDW_SART
	{ 32,  32, TRANSPARENT_COLOR, 2,   160},	// ICON_VIDEO_LDW_ACTIVE

	{256, 128, TRANSPARENT_COLOR,  32, 	40},	// ICON_USB_CONNECT
	{ 16,  96, TRANSPARENT_COLOR,  10, 	72},	// ICON_SCROLL_BAR
	{  8,   8, TRANSPARENT_COLOR,  14, 149},	// ICON_SCROLL_BAR_IDX
	{ 32,  32, TRANSPARENT_COLOR,  10,  168},	// ICON_MP3_PLAY				//27 MP3 icon start
	{ 32,  32, TRANSPARENT_COLOR,  10,  168},	// ICON_MP3_PAUSE
	{ 32,  32, TRANSPARENT_COLOR,  42,  168},	// ICON_MP3_PLAY_ONE
	{ 32,  32, TRANSPARENT_COLOR,  42,  168},	// ICON_MP3_PLAY_ALL
	{128,  32, TRANSPARENT_COLOR,  10,  200},	// ICON_MP3_INDEX
	{ 32,  32, TRANSPARENT_COLOR,  74,  168},	// ICON_MP3_VOLUME
	{ 32,  32, TRANSPARENT_COLOR,  74,  168}, 	// ICON_MP3_MUTE
	{ 32,  32, TRANSPARENT_COLOR,  10,  168}, 	// ICON_MP3_STOP				//34 MP3 icon end
	{ 64,  64, TRANSPARENT_COLOR_YUYV,  1180-C_ICON_HDMI_OFFSET,   640},	// ICON_BATTERY_CHARGED		//hdmi use
	{ 32,  32, TRANSPARENT_COLOR, 2+38*2,   0},	// ICON_LOCKED
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 500,  20},	// ICON_LOCKED1				//hdmi use

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV6
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV0
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_1
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_2
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_3
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_4
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_5
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*1},	// ICON_CAPTURE_EV_6

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_AUTO
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_DAYLIGHT
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_CLOUDY
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_TUNGSTEN
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_WHITE_BALANCE_FLUORESCENT

	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*5},	// ICON_CAPTURE_ISO_AUTO
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*5},	// ICON_CAPTURE_ISO_100
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*5},	// ICON_CAPTURE_ISO_200
	{ 32,  32, TRANSPARENT_COLOR, 2,   0+C_ICON_OFF_Y*5},	// ICON_CAPTURE_ISO_400
	
	{ 32,  32, TRANSPARENT_COLOR,  78,   0},	// ICON_CAPTURE_ANTI_SHAKING 
	{ 32,  32, TRANSPARENT_COLOR,  78+38,   0},	// ICON_CAPTURE_SEQUENCE 

	{ 32,  32, TRANSPARENT_COLOR, 280,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_QUALITY_FINE
	{ 32,  32, TRANSPARENT_COLOR, 280,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_QUALITY_NORMAL
	{ 32,  32, TRANSPARENT_COLOR, 280,   0+C_ICON_OFF_Y*2},	// ICON_CAPTURE_QUALITY_ECONOMY

	{ 128, 64, TRANSPARENT_COLOR_YUYV, 30+C_ICON_HDMI_OFFSET, 580},	// ICON_PLAYBACK_PLAY			//hdmi use
	{ 128, 64, TRANSPARENT_COLOR_YUYV, 30+C_ICON_HDMI_OFFSET, 580},	// ICON_PLAYBACK_PAUSE,			//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+C_ICON_HDMI_OFFSET, 20},		// ICON_PLAYBACK_MOVIE,			//hdmi use

	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+148+C_ICON_HDMI_OFFSET,   720-80-64},	// ICON_PLAYBACK_VOLUME_TITLE,								//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*0,   720-80-64},	// ICON_PLAYBACK_VOLUME_WHITE1,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*1,   720-80-64},	// ICON_PLAYBACK_VOLUME_WHITE2,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*2,   720-80-64},	// ICON_PLAYBACK_VOLUME_WHITE3,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*3,   720-80-64},	// ICON_PLAYBACK_VOLUME_WHITE4,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*4,   720-80-64},	// ICON_PLAYBACK_VOLUME_WHITE5,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*5,   720-80-64},	// ICON_PLAYBACK_VOLUME_WHITE6,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*6,   720-80-64},	// ICON_PLAYBACK_VOLUME_WHITE7,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*7,   720-80-64},	// ICON_PLAYBACK_VOLUME_WHITE8,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*0,   720-80-64},	// ICON_PLAYBACK_VOLUME_READ1,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*1,   720-80-64},	// ICON_PLAYBACK_VOLUME_READ2,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*2,   720-80-64},	// ICON_PLAYBACK_VOLUME_READ3,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*3,   720-80-64},	// ICON_PLAYBACK_VOLUME_READ4,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*4,   720-80-64},	// ICON_PLAYBACK_VOLUME_READ5,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*5,   720-80-64},	// ICON_PLAYBACK_VOLUME_READ6,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*6,   720-80-64},	// ICON_PLAYBACK_VOLUME_READ7,		//hdmi use
	{ 64,  64, TRANSPARENT_COLOR_YUYV, 30+212+C_ICON_HDMI_OFFSET+C_ICON_VOL_OFFSET_HDMI*7,   720-80-64},	// ICON_PLAYBACK_VOLUME_READ8,		//hdmi use
	
	{ 32,  32, TRANSPARENT_COLOR, 280,   0},	// ICON_AUDIO_RECORD
	{ 32,  32, TRANSPARENT_COLOR,  55, 210},	// ICON_2X
	{ 32,  32, TRANSPARENT_COLOR,  55, 210},	// ICON_4X
	{ 32,  32, TRANSPARENT_COLOR,  100, 210},	// ICON_FORWARD
	{ 32,  32, TRANSPARENT_COLOR,  100, 210},	// ICON_BACKWARD
	{ 28,  28, TRANSPARENT_COLOR,   0, 208},	// ICON_PLAY1					//for pseudo 720P
	{ 28,  28, TRANSPARENT_COLOR,   0, 208}		// ICON_PAUSE1					//for pseudo 720P
};

static DISPLAY_ICONSHOW display_num_item[NUM_MAX] = {
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_0
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_1
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_2
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_3
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_4
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_5
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_6
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_7
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_8
	{ 12,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_9
	{ 6,  28, TRANSPARENT_COLOR, NULL,  NULL},	// NUM_TEXT_COLON
	{ 7,  28, TRANSPARENT_COLOR, NULL,  NULL}	// NUM_TEXT_SLASH
};

static DISPLAY_ICONSHOW display_num_item_hdmi[NUM_MAX] = {
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_0
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_1
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_2
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_3
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_4
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_5
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_6
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_7
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_8
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_9
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL},	// NUM_TEXT_COLON
	{ 16,  38, TRANSPARENT_COLOR_YUYV, NULL,  NULL}		// NUM_TEXT_SLASH
};


const INT16U *icon_table[] = {
	NULL,
	icon_battery0,
	icon_battery1,
	icon_battery2,
	icon_battery3,
	icon_battery4,
	icon_capture,
	icon_video,
	icon_review,
	icon_base_setting,
	icon_motion_detect,
	icon_red_light,
	icon_1_second_red,
	icon_2_second_red,
	icon_5_second_red,
	icon_10_second_red,
	icon_30_second_red,
	icon_60_second_red,
	icon_3_second_red,
	icon_5_second_red,
	icon_10_second_red,
	icon_20_second_red,
	icon_rec_yellow,	
	icon_1_second_yellow,	
	icon_2_second_yellow,	
	icon_5_second_yellow,	
	icon_10_second_yellow,	
	icon_30_second_yellow,	
	icon_60_second_yellow,	
	icon_3_second_yellow,	
	icon_5_second_yellow,	
	icon_10_second_yellow,	
	icon_20_second_yellow,
	icon_play,				
	icon_pause,				
	icon_mic_off,
	icon_mic_on,
	icon_ir_on,
	icon_focus,
	icon_video1,
	icon_sd_card,
	icon_internal_memory,
	icon_no_sd_card,
	icon_video_record_cyc_off,
	icon_video_record_cyc_1minute,
	icon_video_record_cyc_2minute,
	icon_video_record_cyc_3minute,
	icon_video_record_cyc_5minute,
	icon_video_record_cyc_10minute,
	icon_video_record_motion_10second,
	icon_1080P30,
	icon_720P60,
	icon_720P30,
	icon_wvga,
	icon_vga,
	icon_video_EV6,
	icon_video_EV5,
	icon_video_EV4,
	icon_video_EV3,
	icon_video_EV2,
	icon_video_EV1,
	icon_video_EV0,
	icon_video_EV_1,
	icon_video_EV_2,
	icon_video_EV_3,
	icon_video_EV_4,
	icon_video_EV_5,
	icon_video_EV_6,
	icon_manu_record_ldw,
	icon_video_ldw_active,
	
	icon_usb_connect,
	icon_scroll_bar,
	icon_scroll_bar_idx,
	icon_mp3_play,
	icon_mp3_pause,
	icon_mp3_play_one,
	icon_mp3_play_all,
	icon_mp3_index,
	icon_mp3_volume,
	icon_mp3_mute,
	icon_mp3_stop,
	icon_battery_charged,
	icon_locked,
	icon_locked,
	
	icon_video_EV6,
	icon_video_EV5,
	icon_video_EV4,
	icon_video_EV3,
	icon_video_EV2,
	icon_video_EV1,
	icon_video_EV0,
	icon_video_EV_1,
	icon_video_EV_2,
	icon_video_EV_3,
	icon_video_EV_4,
	icon_video_EV_5,
	icon_video_EV_6,
	icon_manu_capture_white_balance,
	icon_capture_white_balance_daylight,
	icon_capture_white_balance_cloudy,
	icon_capture_white_balance_tungsten,
	icon_capture_white_balance_fluorescent,
	
	icon_capture_ISO_auto,
	icon_capture_ISO_100,
	icon_capture_ISO_200,
	icon_capture_ISO_400,
	
	icon_manu_capture_anti_shaking,
	icon_manu_capture_sequence,
	icon_capture_quality_fine,
	icon_capture_quality_normal,
	icon_capture_quality_economy,
	
	icon_playback_play,
	icon_playback_pause,
	icon_playback_movie,

	icon_playback_volume_title,
	icon_playback_volume_white,
	icon_playback_volume_white,
	icon_playback_volume_white,
	icon_playback_volume_white,
	icon_playback_volume_white,
	icon_playback_volume_white,
	icon_playback_volume_white,
	icon_playback_volume_white,
	icon_playback_volume_red,
	icon_playback_volume_red,
	icon_playback_volume_red,
	icon_playback_volume_red,
	icon_playback_volume_red,
	icon_playback_volume_red,
	icon_playback_volume_red,
	icon_playback_volume_red,

	
	icon_audio_record,
	icon_2x,
	icon_4x,
	icon_forward,
	icon_backward,
	icon_play,				//for pseudo 720P
	icon_pause				//for pseudo 720P
};

const INT16U *icon_table_hdmi[] = {
	NULL,
	hdmi_bat0,		//hdmi use
	hdmi_bat1,		//hdmi use
	hdmi_bat2,		//hdmi use
	hdmi_bat3,		//hdmi use
	hdmi_bat4,		//hdmi use
	icon_capture,
	icon_video,
	hdmi_jpg_file,	//hdmi use
	icon_base_setting,
	icon_motion_detect,
	icon_red_light,
	icon_1_second_red,
	icon_2_second_red,
	icon_5_second_red,
	icon_10_second_red,
	icon_30_second_red,
	icon_60_second_red,
	icon_3_second_red,
	icon_5_second_red,
	icon_10_second_red,
	icon_20_second_red,
	icon_rec_yellow,	
	icon_1_second_yellow,	
	icon_2_second_yellow,	
	icon_5_second_yellow,	
	icon_10_second_yellow,	
	icon_30_second_yellow,	
	icon_60_second_yellow,	
	icon_3_second_yellow,	
	icon_5_second_yellow,	
	icon_10_second_yellow,	
	icon_20_second_yellow,
	icon_play,				
	icon_pause,				
	icon_mic_off,
	icon_mic_on,
	icon_ir_on,
	icon_focus,
	icon_video1,
	icon_sd_card,
	icon_internal_memory,
	icon_no_sd_card,
	icon_video_record_cyc_off,
	icon_video_record_cyc_1minute,
	icon_video_record_cyc_2minute,
	icon_video_record_cyc_3minute,
	icon_video_record_cyc_5minute,
	icon_video_record_cyc_10minute,
	icon_video_record_motion_10second,
	icon_1080P30,
	icon_720P60,
	icon_720P30,
	icon_wvga,
	icon_vga,
	icon_video_EV6,
	icon_video_EV5,
	icon_video_EV4,
	icon_video_EV3,
	icon_video_EV2,
	icon_video_EV1,
	icon_video_EV0,
	icon_video_EV_1,
	icon_video_EV_2,
	icon_video_EV_3,
	icon_video_EV_4,
	icon_video_EV_5,
	icon_video_EV_6,
	icon_manu_record_ldw,
	icon_video_ldw_active,

	icon_usb_connect,
	icon_scroll_bar,
	icon_scroll_bar_idx,
	icon_mp3_play,
	icon_mp3_pause,
	icon_mp3_play_one,
	icon_mp3_play_all,
	icon_mp3_index,
	icon_mp3_volume,
	icon_mp3_mute,
	icon_mp3_stop,
	hdmi_charging,		//hdmi use
	icon_locked,
	hdmi_key,			//hdmi use
	
	icon_video_EV6,
	icon_video_EV5,
	icon_video_EV4,
	icon_video_EV3,
	icon_video_EV2,
	icon_video_EV1,
	icon_video_EV0,
	icon_video_EV_1,
	icon_video_EV_2,
	icon_video_EV_3,
	icon_video_EV_4,
	icon_video_EV_5,
	icon_video_EV_6,
	icon_manu_capture_white_balance,
	icon_capture_white_balance_daylight,
	icon_capture_white_balance_cloudy,
	icon_capture_white_balance_tungsten,
	icon_capture_white_balance_fluorescent,
	
	icon_capture_ISO_auto,
	icon_capture_ISO_100,
	icon_capture_ISO_200,
	icon_capture_ISO_400,
	
	icon_manu_capture_anti_shaking,
	icon_manu_capture_sequence,
	icon_capture_quality_fine,
	icon_capture_quality_normal,
	icon_capture_quality_economy,
	
	hdmi_play,			//hdmi use
	hdmi_pause,			//hdmi use
	hdmi_avi_file,		//hdmi use

	hdmi_speaker,		//hdmi use
	hdmi_white_cu,		//hdmi use
	hdmi_white_cu,		//hdmi use
	hdmi_white_cu,		//hdmi use
	hdmi_white_cu,		//hdmi use
	hdmi_white_cu,		//hdmi use
	hdmi_white_cu,		//hdmi use
	hdmi_white_cu,		//hdmi use
	hdmi_white_cu,		//hdmi use
	hdmi_red_cu,		//hdmi use
	hdmi_red_cu,		//hdmi use
	hdmi_red_cu,		//hdmi use
	hdmi_red_cu,		//hdmi use
	hdmi_red_cu,		//hdmi use
	hdmi_red_cu,		//hdmi use
	hdmi_red_cu,		//hdmi use
	hdmi_red_cu,		//hdmi use

	icon_audio_record,
	icon_2x,
	icon_4x,
	icon_forward,
	icon_backward,
	icon_play,				//for pseudo 720P
	icon_pause				//for pseudo 720P
};

const INT16U *number_table[] = {
	ui_text_0,
	ui_text_1,
	ui_text_2,
	ui_text_3,
	ui_text_4,
	ui_text_5,
	ui_text_6,
	ui_text_7,
	ui_text_8,
	ui_text_9,
	ui_text_colon,
	ui_text_klino
};

const INT8U *number_table_hdmi[] = {
	hdmi_ui_text_0,
	hdmi_ui_text_1,
	hdmi_ui_text_2,
	hdmi_ui_text_3,
	hdmi_ui_text_4,
	hdmi_ui_text_5,
	hdmi_ui_text_6,
	hdmi_ui_text_7,
	hdmi_ui_text_8,
	hdmi_ui_text_9,
	hdmi_ui_text_colon,
	hdmi_ui_text_klino
};


const INT16U *setting_record_table[] = {

	icon_manu_record_resolution,
	icon_manu_record_looprecording,
	icon_manu_record_EV,
	icon_manu_record_motiondetect,
	icon_manu_base_beep_sound,
	icon_manu_record_date_stemp,
	icon_manu_record_gsensor,
	icon_manu_record_ldw
};
const INT16U *setting_capture_table[] = {

	icon_manu_record_resolution,
	icon_manu_capture_sequence,
	icon_manu_capture_quality,
	icon_manu_capture_sharpness,
	icon_manu_capture_white_balance,
	icon_manu_capture_iso,
	icon_manu_record_EV,
	icon_manu_capture_anti_shaking,
	icon_manu_capture_quick_review,
	icon_manu_record_date_stemp
};
const INT16U *setting_play_table[] = {
	icon_manu_record_resolution,
	icon_manu_record_EV,
	icon_manu_record_motiondetect,
	icon_manu_record_looprecording,
	icon_manu_base_date_time,
	icon_hdr,   
	icon_manu_base_beep_sound,
	icon_manu_record_date_stemp,
	icon_manu_record_resolution,
	icon_manu_capture_quality,
	icon_manu_capture_sequence,
	icon_manu_capture_sharpness,
	icon_manu_capture_iso,
	icon_manu_capture_anti_shaking,
	icon_manu_capture_white_balance,
	//icon_manu_capture_quick_review,
	icon_manu_base_frequency,
	icon_manu_osd_mode,
	icon_manu_base_screen_saver,
	icon_manu_rotate, 
	icon_manu_base_auto_power_off,
	icon_manu_base_language,
	icon_manu_base_beep_sound,
	icon_manu_base_date_time,
	icon_manu_base_TV_mode,
	icon_manu_base_TV_mode,
	icon_manu_base_car_mode,
	icon_manu_base_wifi_ssid,//wifi ssid icon
	icon_manu_base_wifi_password,//wifi password icon
	icon_manu_play_delete,
	//icon_manu_play_protect,
	icon_manu_base_format,
	icon_manu_base_default_setting,
	icon_manu_base_version
};
const INT16U *setting_base_table[] = {

	icon_manu_record_gsensor,
	icon_manu_base_date_time,
	icon_manu_base_auto_power_off,
	icon_manu_base_screen_saver,
//	icon_manu_base_delay_power_on,
	icon_manu_base_beep_sound,
	icon_manu_base_language,
#if TV_OUT_MENU
	icon_manu_base_TV_mode,
#endif
	icon_manu_base_frequency,
	icon_capture_white_balance_daylight,
	icon_manu_base_format,
	icon_manu_base_default_setting,
	icon_manu_base_version
};




const INT16U *mp3_index_table[] = {
	mp3_index_0,
	mp3_index_1,
	mp3_index_2,
	mp3_index_3,
	mp3_index_4,
	mp3_index_5,
	mp3_index_6,
	mp3_index_7,
	mp3_index_8,
	mp3_index_9,
	mp3_index_dot,
	mp3_index_MHz
};

const INT16U *mp3_input_number[] = {
	mp3_input_0,
	mp3_input_1,
	mp3_input_2,
	mp3_input_3,
	mp3_input_4,
	mp3_input_5,
	mp3_input_6,
	mp3_input_7,
	mp3_input_8,
	mp3_input_9
};

//	prototypes
void ap_display_draw(INT16U *frame_buff);
void ap_display_hdmi_draw(INT16U *frame_buff);
void ap_display_icon_draw(INT16U *frame_buff, INT16U *icon_stream, DISPLAY_ICONSHOW *icon_info);
void ap_display_hdmi_icon_draw(INT16U *frame_buff, INT16U *icon_stream, DISPLAY_ICONSHOW *icon_info);
void ap_display_rec_time_draw(INT16U *frame_buff, void *time_ptr, INT16U pos_x, INT16U pos_y, INT8U red_flag);
void ap_display_hdmi_rec_time_draw(INT16U *frame_buff, void *time_ptr, INT16U pos_x, INT16U pos_y, INT8U red_flag);
void ap_display_vblank_isr(void);
void ap_display_tv_vblank_isr(void);
void ap_display_effect_draw(INT32U buff_addr);
void ap_display_MP3_Play_timer(void);


#if Enable_Lane_Departure_Warning_System
void drawLine(unsigned short* drawImg, int startx, int starty, int endx, int endy, int colorR, int colorG, int colorB)
{
	int t, distance;
	int xerr=0, yerr=0, delta_x, delta_y;
	int incx, incy;

	unsigned short colorRGB565;

	colorRGB565 = 0;


	colorRGB565 += colorR;
	colorRGB565 = colorRGB565<<6;
	colorRGB565 += colorG;
	colorRGB565 = colorRGB565<<5;
	colorRGB565 += colorB;


	/* compute the distances in both directions */
	delta_x=endx-startx;
	delta_y=endy-starty;

	/* Compute the direction of the increment,
	an increment of 0 means either a horizontal or vertical
	line.
	*/
	if(delta_x>0) incx=1;
	else if(delta_x==0) incx=0;
	else incx=-1;

	if(delta_y>0) incy=1;
	else if(delta_y==0) incy=0;
	else incy=-1;

	/* determine which distance is greater */
	delta_x=ABS(delta_x);
	delta_y=ABS(delta_y);
	if(delta_x>delta_y) distance=delta_x;
	else distance=delta_y;

	/* draw the line */
	for(t=0; t<=distance+1; t++)
	{
		if(startx > 0 && startx < TFT_WIDTH && starty > 0 && starty < TFT_HEIGHT)
			drawImg[startx + starty*TFT_WIDTH] = colorRGB565;

		xerr+=delta_x;
		yerr+=delta_y;
		if(xerr>distance) {
			xerr-=distance;
			startx+=incx;
		}
		if(yerr>distance) {
			yerr-=distance;
			starty+=incy;
		}
	}
}
#endif

INT32U getDispDevBufSize()
{
	INT32U dwSize=0 ;	

	if(g_Disp_Device==DISP_DEV_TFT) {
	  #if (USE_PANEL_NAME == PANEL_T27P05_ILI8961)
		dwSize = (320*241)<<1;
	  #else
		dwSize = (TFT_WIDTH*(TFT_HEIGHT+1))<<1;
	  #endif
	} else if (g_Disp_Device==DISP_DEV_TV) {
	  #if TV_WIDTH == 720
		dwSize = ((TV_WIDTH*TV_HEIGHT)<<1) + 2048;
	  #else
		dwSize = ((TV_WIDTH*TV_HEIGHT)<<1);
	  #endif
	} else if (g_Disp_Device==DISP_DEV_HDMI) {
#ifdef HDMI_JPG_DECODE_AS_GP420	
		dwSize = ((1280*720*3)>>1) + 30720;
#elif defined(HDMI_JPG_DECODE_AS_YUV422)
        dwSize = ((1280*720)<<1);
#endif		
	}
	
//DBG_PRINT("JPEG decoder, 1/2, 1/4 problems need to be confirmed!!!\r\n");	
	
	return dwSize ;
}

void ap_display_init()
{
	INT32U i, buff_size, *buff_ptr;
	#if DUAL_STREAM_FUNC_ENABLE
	INT32U j;
	#endif

	g_Disp_Device = DISP_DEV_TFT ;

	video_preview_timerid = 0xFF;

	buff_size = getDispDevBufSize();
	if (display_frame[0]==0) 
	{
		#if DUAL_STREAM_FUNC_ENABLE
			for(i=0; i<DISPLAY_BUF_NUM; i++)
			{
				display_frame[i] = gp_malloc_align(buff_size, 64);
				//DBG_PRINT("display_frame[%d] addr = 0x%x\r\n", i, display_frame[i]);				
			}
		#else
			display_frame[0] = gp_malloc_align(buff_size*DISPLAY_BUF_NUM, 64);
			DBG_PRINT("display_frame(cnt=%d) addr = 0x%x\r\n", DISPLAY_BUF_NUM , display_frame[0]);
			if (display_frame[0]) {
				for (i=1 ; i<DISPLAY_BUF_NUM; i++) {
					display_frame[i] = display_frame[i-1] + buff_size;
					//DBG_PRINT("display_frame[%d] addr = 0x%x\r\n", i, display_frame[i]);
				}
			} else {
				DBG_PRINT("display_frame allocate fail\r\n");
			}
		#endif
	}
#if (USE_PANEL_NAME == PANEL_400X240_I80)
	I80_diplay_buff = (INT32U) gp_malloc_align(TFT_WIDTH*TFT_HEIGHT*2, 64);
#endif
	
	user_defined_video_codec_entrance();
#if ((USE_PANEL_NAME != PANEL_400X240_I80)&&(USE_PANEL_NAME != PANEL_T20P82_ST7789V))
	tft_vblank_isr_register(ap_display_vblank_isr);
#endif
	tv_vblank_isr_register(ap_display_tv_vblank_isr);

	R_PPU_IRQ_STATUS = 0x00002000 + 0x00000800;
	R_PPU_IRQ_EN |= 0x00002000;	//Enable V-blank interrupt.

    // clear last one buffer of display_frame & show it on TFT.
	#if DUAL_STREAM_FUNC_ENABLE
		for(i=0; i<DISPLAY_BUF_NUM; i++)
		{
			buff_ptr = (INT32U *) display_frame[i];
			for (j=0; j<(buff_size>>2); j++) { 
				*buff_ptr++ = 0;
			}
		}
	#else    
		buff_ptr = (INT32U *) display_frame[0];
		for (i=0; i<((buff_size*DISPLAY_BUF_NUM)>>2); i++) { 
			*buff_ptr++ = 0;
		}
	#endif
	
	R_TFT_FBI_ADDR = (INT32U) display_frame[DISPLAY_BUF_NUM - 1];
	
#if DISPLAY_BUF_NUM > 1
	#if (GPDV_BOARD_VERSION == GPCV4247_WIFI)
	for (i=0 ; i<DISPLAY_BUF_NUM; i++)
	#else
	for (i=0 ; i<DISPLAY_BUF_NUM- 1; i++)
	#endif
	{
		if (ap_display_queue_put(display_isr_queue, (INT32U) display_frame[i]) == STATUS_FAIL) {
			DBG_PRINT("INIT put Q FAIL.\r\n");
		}
	}
#else
	ap_display_queue_put(display_isr_queue, (INT32U) display_frame[0]);
#endif

	//DBG_PRINT("Display_init.\r\n");

 #if (USE_PANEL_NAME == PANEL_400X240_I80)
  	R_PPU_ENABLE= PPU_VGA_MODE|PPU_FRAME_BASE_MODE|PPU_RGB565_MODE;	 
	R_FREE_SIZE = TFT_HEIGHT; //Vertical
	R_FREE_SIZE |= (TFT_WIDTH << 16); //Horizontal
#else
	#if ((USE_PANEL_NAME != PANEL_T20P82_ST7789V) && (GPDV_BOARD_VERSION != GPCV4247_WIFI))
	tft_tft_en_set(TRUE);
	#endif
#endif

	vic_irq_enable(VIC_TFT);
}

void ap_display_tv_init(void)
{
	INT32U i, buff_size;
	INT32U *buff_ptr;
	STRING_ASCII_INFO ascii_str;
	#if DUAL_STREAM_FUNC_ENABLE
	INT32U j;
	#endif

	if((ap_display_get_device() == DISP_DEV_HDMI) || (ap_display_get_device() == DISP_DEV_TV))	return;
	//g_Disp_Device = DISP_DEV_TV;

	//DBG_PRINT("TV init...\r\n");

	//wait display_dma_queue empty
	while(1) {
		if(ap_display_queue_query(display_dma_queue) == 0) break;
	}
	g_Disp_Device = DISP_DEV_TV;

	DBG_PRINT("TV init...\r\n");
	//free TFT buffer
	#if DUAL_STREAM_FUNC_ENABLE
		for(i=0; i<DISPLAY_BUF_NUM; i++)
		{
			if (display_frame[i])
			{
				gp_free(display_frame[i]);
				display_frame[i] = 0;
			}
		}
	#else
		if (display_frame[0]) {
			gp_free(display_frame[0]);
			display_frame[0] = 0;
		}
	#endif

	//show "TV" on TFT
	display_tmp_tft_frame = (INT32U)gp_malloc_align(TFT_WIDTH*TFT_HEIGHT*2, 64);
	if(display_tmp_tft_frame == 0) DBG_PRINT("allocate TFT temp buffer fail\r\n");

	for(i=0; i<TFT_WIDTH*TFT_HEIGHT; i++) {
		*(INT16U *)(display_tmp_tft_frame + i*2) = BLUE_COLOR;
	}

	ascii_str.font_color = 0xFFFF;
	ascii_str.font_type = 0;
	ascii_str.buff_w = TFT_WIDTH;
	ascii_str.buff_h = TFT_HEIGHT;
	ascii_str.pos_x = 140;
	ascii_str.pos_y = 100;
	ascii_str.str_ptr = "T V";
	ap_state_resource_string_ascii_draw((INT16U *)display_tmp_tft_frame, &ascii_str, RGB565_DRAW);
#if USE_PANEL_NAME == PANEL_400X240_I80
	  #if DISPLAY_BUF_NUM == 1
		TEST_Display_Data_Conv(display_tmp_tft_frame,400,240);
		ap_display_TE_sync_I80_start();
		OSTimeDly(3);
	  #endif
#elif USE_PANEL_NAME == PANEL_T20P82_ST7789V
	/*g_tv_hdmi_display=1;
	ap_display_TE_sync_I80_start();
	while(g_tv_hdmi_display)
	{
		OSTimeDly(1);
	}*/
	R_TFT_FBI_ADDR = display_tmp_tft_frame;
	tft_tft_en_set(TRUE);
#else
	R_TFT_FBI_ADDR = display_tmp_tft_frame;
#endif

	tft_tft_en_set(FALSE);
	ap_peripheral_lcd_backlight_set(BL_OFF);

#if USE_PANEL_NAME == PANEL_400X240_I80
	if (I80_diplay_buff) {
		gp_free((void *)I80_diplay_buff);
		I80_diplay_buff = 0;
	}
	if (display_tmp_tft_frame) {
		gp_free((void *)display_tmp_tft_frame);
		display_tmp_tft_frame = 0;
	}
#elif USE_PANEL_NAME == PANEL_T20P82_ST7789V
	OSTimeDly(3);
	if (display_tmp_tft_frame) {
		gp_free((void *)display_tmp_tft_frame);
		display_tmp_tft_frame = 0;
	}
#endif
	

	for(i=0; i<DISPLAY_BUF_NUM_MAX; i++) {
		display_frame[i] = 0;
		display_isr_queue[i] = 0;
		display_dma_queue[i] = 0;
	}

	//allocate TV buffer
	buff_size = getDispDevBufSize();
	if(display_frame[0]==0) {
		#if DUAL_STREAM_FUNC_ENABLE
			for(i=0; i<TV_DISPLAY_BUF_NUM; i++)
			{
				display_frame[i] = gp_malloc_align(buff_size, 64);
				//DBG_PRINT("display_frame[%d] addr = 0x%x\r\n", i, display_frame[i]);				
			}
		#else
			display_frame[0] = gp_malloc_align(buff_size*TV_DISPLAY_BUF_NUM, 64);
			DBG_PRINT("display_frame(cnt=%d) addr = 0x%x\r\n", TV_DISPLAY_BUF_NUM , display_frame[0]);
			if (display_frame[0]) {
				for (i=1 ; i<TV_DISPLAY_BUF_NUM; i++) {
					display_frame[i] = display_frame[i-1] + buff_size;
					//DBG_PRINT("display_frame[%d] addr = 0x%x\r\n", i, display_frame[i]);
				}
			} else {
				DBG_PRINT("display_frame allocate fail\r\n");
			}
		#endif
	}

    // clear all display buffer and show the last one on TV
    #if DUAL_STREAM_FUNC_ENABLE
		for(i=0; i<TV_DISPLAY_BUF_NUM; i++)
		{
			buff_ptr = (INT32U *) display_frame[i];
			for (j=0; j<(buff_size>>2); j++) { 
				*buff_ptr++ = 0;
			}
		}
	#else    
		buff_ptr = (INT32U *) display_frame[0];
		for(i=0; i<((buff_size*TV_DISPLAY_BUF_NUM)>>2); i++) { 
			*buff_ptr++ = 0;
		}
	#endif
	R_TV_FBI_ADDR = (INT32U)display_frame[TV_DISPLAY_BUF_NUM - 1];

	//init display_isr_queue and display_dma_queue
	for (i=0; i<TV_DISPLAY_BUF_NUM - 1; i++) {
		if (ap_display_queue_put(display_isr_queue, (INT32U) display_frame[i]) == STATUS_FAIL) {
			DBG_PRINT("INIT put Q FAIL.\r\n");
		}
	}


	Tv_Interface_Format = TV_INTERLACE;
	if(Tv_Interface_Format == TV_INTERLACE)
	{
		Tv_Interlace_Isr_Cnt = 0;
	}
	else
	{
		Tv_Interlace_Isr_Cnt = 1;
	}
	
	//setup TV hardware
	R_SYSTEM_CLK_EN1 |= 0x0020; // TV Clock

	//+++ TV_OUT_D1
	/*
		FB_LOCK[R_PPU_MISC] OTFT[tft enable],TV size[D1]
	*/
	#if (TV_WIDTH == 640)
	   	R_PPU_ENABLE |= (1<<4); // VGA
		if(ap_state_config_tv_out_get() == 0) {
			tv_start(TVSTD_NTSC_J, TV_HVGA, Tv_Interface_Format);
		} else {
			tv_start(TVSTD_PAL_N, TV_HVGA, Tv_Interface_Format);
		}
	#else
	   	R_PPU_ENABLE |= (LCD_RESO_720X480<<16); // D1
		if(ap_state_config_tv_out_get() == 0) {
			tv_start(TVSTD_NTSC_J, TV_D1, Tv_Interface_Format);
		} else {
			tv_start(TVSTD_PAL_N, TV_D1, Tv_Interface_Format);
		}
	#endif
	//---
	
	

	R_PPU_IRQ_STATUS = 0x00002000 + 0x00000800;
	R_PPU_IRQ_EN &= ~(0x00000800+0x00002000);	//disable TFT & tv interrupt source
	R_PPU_IRQ_EN |= 0x00000800;		//enable tv interrupt source
}


void ap_display_tv_uninit(void)
{
	INT32U i;

	if(ap_display_get_device() != DISP_DEV_TV)	return;

	DBG_PRINT("TV uninit...\r\n");

	//wait interrupt to update
	while(1) {
		if(ap_display_queue_query(display_dma_queue) == 0) break;
	}

	R_PPU_IRQ_STATUS = 0x00002000 + 0x00000800;
	R_PPU_IRQ_EN &= ~(0x00000800 + 0x00002000);  //disable TFT & tv interrupt source

	//TV disable
	tv_disable();
	R_SYSTEM_CLK_EN1 &= ~0x0020;

	//free TV buffers
	#if DUAL_STREAM_FUNC_ENABLE
		for(i=0; i<TV_DISPLAY_BUF_NUM; i++)
		{
			if (display_frame[i])
			{
				gp_free(display_frame[i]);
				display_frame[i] = 0;
			}
		}
	#else
		if (display_frame[0]) {
			gp_free(display_frame[0]);
			display_frame[0] = 0;
		}
	#endif

	for(i=0; i<DISPLAY_BUF_NUM_MAX; i++) {
		display_isr_queue[i] = 0;
		display_dma_queue[i] = 0;
		display_frame[i] = 0;
	}

	//reinitial TFT	
	ap_display_init();
	ap_peripheral_lcd_backlight_set(BL_ON);	

	//free temp buffer for TFT
	if(display_tmp_tft_frame) {
		gp_free((void *)display_tmp_tft_frame);
		display_tmp_tft_frame = 0;
	}
}

#define TFT_1280x720_MODE		6
#define TFT_SIZE_1280X720		(7<<16)

static void tft2_isr(void);
void ap_display_hdmi_init(void)
{
	INT32U 	i, buff_size, *buff_ptr;
	STRING_ASCII_INFO ascii_str;

	ap_display_tv_uninit();

	if(ap_display_get_device() == DISP_DEV_HDMI)	return;

	wrap_filter_enable(WRAP_CSI2SCA,1);	

	g_Disp_Device = DISP_DEV_HDMI;

	DBG_PRINT("HDMI init...\r\n");

	//wait display_dma_queue empty
	while(1) {
		if(ap_display_queue_query(display_dma_queue) == 0) break;
	}

	//free TFT buffer
	#if DUAL_STREAM_FUNC_ENABLE
		for(i=0; i<DISPLAY_BUF_NUM; i++)
		{
			if (display_frame[i])
			{
				gp_free(display_frame[i]);
				display_frame[i] = 0;
			}
		}
	#else
		if (display_frame[0]) {
			gp_free(display_frame[0]);
			display_frame[0] = 0;
		}
	#endif

	for(i=0; i<DISPLAY_BUF_NUM_MAX; i++) {
		display_frame[i] = 0;
		display_isr_queue[i] = 0;
		display_dma_queue[i] = 0;
	}

	//show "HDMI" on TFT
	display_tmp_tft_frame = (INT32U)gp_malloc_align(TFT_WIDTH*TFT_HEIGHT*2, 64);
	if(display_tmp_tft_frame == 0) DBG_PRINT("allocate TFT temp buffer fail\r\n");

	for(i=0; i<TFT_WIDTH*TFT_HEIGHT; i++) {
		*(INT16U *)(display_tmp_tft_frame + i*2) = BLUE_COLOR;
	}

	ascii_str.font_color = 0xFFFF;
	ascii_str.font_type = 0;
	ascii_str.buff_w = TFT_WIDTH;
	ascii_str.buff_h = TFT_HEIGHT;
	ascii_str.pos_x = 120;
	ascii_str.pos_y = 100;
	ascii_str.str_ptr = "H D M I";
	ap_state_resource_string_ascii_draw((INT16U *)display_tmp_tft_frame, &ascii_str, RGB565_DRAW);
#if USE_PANEL_NAME == PANEL_400X240_I80
	  #if DISPLAY_BUF_NUM == 1
		TEST_Display_Data_Conv(display_tmp_tft_frame,400,240);
		ap_display_TE_sync_I80_start();
	  #endif
#elif USE_PANEL_NAME == PANEL_T20P82_ST7789V
	/*g_tv_hdmi_display=1;
	ap_display_TE_sync_I80_start();
	while(g_tv_hdmi_display)
	{
		OSTimeDly(1);
	}*/
	R_TFT_FBI_ADDR = display_tmp_tft_frame;
	tft_tft_en_set(TRUE);
#else
	R_TFT_FBI_ADDR = display_tmp_tft_frame;
#endif

#if USE_PANEL_NAME == PANEL_400X240_I80
	OSTimeDly(3);
	ap_display_TE_sync_I80_stop();
	//free temp buffer for TFT
	if(display_tmp_tft_frame) {
		gp_free((void *)display_tmp_tft_frame);
		display_tmp_tft_frame = 0;
	}
	if (I80_diplay_buff) {
		gp_free((void *)I80_diplay_buff);
		I80_diplay_buff = 0;
	}
#elif USE_PANEL_NAME == PANEL_T20P82_ST7789V
	OSTimeDly(3);
	//free temp buffer for TFT
	if(display_tmp_tft_frame) {
		gp_free((void *)display_tmp_tft_frame);
		display_tmp_tft_frame = 0;
	}
#endif

	//allocate HDMI buffer
	buff_size = getDispDevBufSize();
	if(display_frame[0]==0) {
		display_frame[0] = gp_malloc_align((buff_size+1024)*HDMI_DISPLAY_BUF_NUM, 64);
		DBG_PRINT("display_frame(cnt=%d) addr = 0x%x\r\n", HDMI_DISPLAY_BUF_NUM , display_frame[0]);
		if (display_frame[0]) {
			for (i=1 ; i<HDMI_DISPLAY_BUF_NUM; i++) {
				display_frame[i] = display_frame[i-1] + buff_size;
				//DBG_PRINT("display_frame[%d] addr = 0x%x\r\n", i, display_frame[i]);
			}
		} else {
			DBG_PRINT("display_frame allocate fail\r\n");
		}
	}

    // clear all display buffer and show the last one on TV
	buff_ptr = (INT32U *) display_frame[0];
	for(i=0; i<((buff_size*HDMI_DISPLAY_BUF_NUM)>>2); i++) {
		*buff_ptr++ = 0;
	}

	//init display_isr_queue and display_dma_queue
	for(i=0; i<HDMI_DISPLAY_BUF_NUM - 1; i++) {
		if (ap_display_queue_put(display_isr_queue, (INT32U) display_frame[i]) == STATUS_FAIL) {
			DBG_PRINT("INIT put Q FAIL.\r\n");
		}
	}

	R_SYSTEM_CLK_EN0 = 0xEEDF;
	R_SYSTEM_CLK_EN1 = 0xDDD9;

	R_PPU_IRQ_STATUS = 0x00002000 + 0x00000800;
	R_PPU_IRQ_EN &= ~(0x00002000 | 0x00000800);	// close TFT and TV interrupt

	vic_irq_register(VIC_TFT, tft2_isr);	// Non vector interrupt register

#ifdef HDMI_JPG_DECODE_AS_GP420
	// GP420 to YUYV
	(*((volatile INT32U *) 0xC01B0000)) = 0x0;
	(*((volatile INT32U *) 0xC01B0004)) = 1280/4-1;
	(*((volatile INT32U *) 0xC01B0008)) = (INT32U)display_frame[HDMI_DISPLAY_BUF_NUM - 1];
	(*((volatile INT32U *) 0xC01B0000)) = 0x201;	// reset & enable
	(*((volatile INT32U *) 0xC01B0000)) |= 0x100;	// start
#elif defined(HDMI_JPG_DECODE_AS_YUV422)
    R_MEM_M3_BUS_PRIORITY  = 0x02;
    R_MEM_M4_BUS_PRIORITY  = 0xBF;
    R_MEM_M10_BUS_PRIORITY = 0xBD;
	R_MEM_M11_BUS_PRIORITY = 0x98;
	R_MEM_M14_BUS_PRIORITY = 0x9B;    
	R_MEM_M16_BUS_PRIORITY = 0xBD;
	R_MEM_M17_BUS_PRIORITY = 0xBE;

    // bypass Conv GP420 to YUV422
    (*((volatile INT32U *) 0xC01B0000)) = 0x0;
    (*((volatile INT32U *) 0xC01B0008)) = (INT32U)display_frame[HDMI_DISPLAY_BUF_NUM - 1];
#endif

	///////////////////////  HDMI  Video  ///////////////////////
	R_PPU_ENABLE = (TFT_SIZE_1280X720|PPU_FRAME_BASE_MODE|PPU_YUYV_RGBG_FORMAT_MODE|PPU_YUYV_MODE|PPU_YUYV_TYPE3|(1<<24));  // YUYV mode
	R_PPU_MISC |= (1<<15);
	R_FREE_SIZE = 0x050002D0;// bit[31:16] = width , bit[15:0] = height
    R_TV_FBI_ADDR = (INT32U)display_frame[HDMI_DISPLAY_BUF_NUM - 1];

	//  HDMI Video
	drvl1_hdmi_init(TFT_1280x720_MODE, 32000);		// Initiate HDMI controller
	drvl1_hdmi_audio_ctrl(1);
	drvl1_hdmi_dac_mute(1);	

	R_PPU_IRQ_STATUS = 0x00080000;
	R_PPU_IRQ_EN |= 0x00080000;					// bit19: HDMI enable
}


void ap_display_hdmi_uninit(void)
{
	INT32U i;

	if(ap_display_get_device() != DISP_DEV_HDMI)	return;

	DBG_PRINT("HDMI uninit...\r\n");

	//wait interrupt to update
	while(1) {
		if(ap_display_queue_query(display_dma_queue) == 0) break;
	}

	gp420conv_stop_flag = 1;
	while(gp420conv_stop_flag);

	R_PPU_IRQ_STATUS = 0x00080000 + 0x00002000;
	R_PPU_IRQ_EN &= ~(0x00080000 + 0x00002000);  // bit19: HDMI disable

	drvl1_hdmi_exit();
	
	R_SYSTEM_CLK_EN0 = 0xEED7;  
	R_SYSTEM_CLK_EN1 = 0xDFDD;
	R_PPU_ENABLE = 0x01200080;
	R_PPU_MISC = 0x0002;
	R_FREE_SIZE = 0x00;// bit[31:16] = width , bit[15:0] = height

	//free HDMI buffers
	if (display_frame[0]) {
		gp_free(display_frame[0]);
		display_frame[0] = 0;
	}

	for(i=0; i<DISPLAY_BUF_NUM_MAX; i++) {
		display_isr_queue[i] = 0;
		display_dma_queue[i] = 0;
		display_frame[i] = 0;
	}
	
#ifdef HDMI_JPG_DECODE_AS_YUV422

    // recover priority
    R_MEM_M3_BUS_PRIORITY  = 0x04;
    R_MEM_M4_BUS_PRIORITY  = 0x0C;
    R_MEM_M10_BUS_PRIORITY = 0x17;
	R_MEM_M11_BUS_PRIORITY = 0x18;
	R_MEM_M14_BUS_PRIORITY = 0x1B;        
	R_MEM_M16_BUS_PRIORITY = 0x1D;
	R_MEM_M17_BUS_PRIORITY = 0x1E;

#endif	

	wrap_filter_enable(WRAP_CSI2SCA,0);	

	//reinitial TFT
	ap_display_init();
	
    (*((volatile INT32U *) 0xC0190018)) &= ~0x200 ; // disable Conv422 bypass

#if USE_PANEL_NAME == PANEL_400X240_I80
#else
	//free temp buffer for TFT
	if(display_tmp_tft_frame) {
		gp_free((void *)display_tmp_tft_frame);
		display_tmp_tft_frame = 0;
	}
#endif
}


INT8U ap_display_get_device(void)
{
	return g_Disp_Device ;
}

void ap_display_effect_init(void)
{
	INT32U i;
	
	for (i=0 ; i<(ICOM_MAX_NUM >> 5) + 1 ; i++) {
		display_icon_sts[i] = NULL;
	}
	if (display_effect_buff) {
		gp_free((void *) display_effect_buff);
		display_effect_buff = NULL;
	}
	display_effect_sts = DISPLAY_NONE_EFFECT;
	display_mp3_index_sts = DISPLAY_MP3_INDEX_NONE_EFFECT;
	display_mp3_input_num_sts = DISPLAY_MP3_INPUT_NUM_NONE_EFFECT;
}

void ap_display_setting_frame_buff_set(INT32U frame_buff)
{
	display_setting_buff = frame_buff;
}

void ap_display_icon_move(DISPLAY_ICONMOVE *icon)
{
	if (icon->idx < ICOM_MAX_NUM) {
		if (icon->pos_x == 0xFFFF && icon->pos_y == 0xFFFF) {
			if (icon->idx == ICON_SCROLL_BAR_IDX) {
				display_icon_item[icon->idx].pos_y = 80;
			}
		} else if (icon->pos_x == 0xFFFF) {
			display_icon_item[icon->idx].pos_y = icon->pos_y;
		} else if (icon->pos_y == 0xFFFF) {
			display_icon_item[icon->idx].pos_x = icon->pos_x;
		} else {
			display_icon_item[icon->idx].pos_x = icon->pos_x;
			display_icon_item[icon->idx].pos_y = icon->pos_y;
		}
	} else {
		return;
	}
}

void ap_display_draw(INT16U *frame_buff)
{
	INT32U i, x, y, offset_pixel, offset_pixel_tmp, offset_data, offset_data_tmp;
	INT8U display_flag;

	display_flag = ap_state_config_osd_mode_get();

	for (i=0 ; i<ICOM_MAX_NUM ; i++) 
	{
		if( display_icon_sts[i >> 5] & (1<<(i&0x1F)) ) 
		{
			if(((i >= ICON_REC)&&(i<=ICON_VIDEOLAPASE_60S_R)) && (display_rec_time.s & 0x1))
			{
				i += 11;
			}
			if( (i < ICON_REC)||(i > ICON_VIDEOLAPASE_60S_R) || (((i >= ICON_REC)&&(i<=ICON_VIDEOLAPASE_60S_R)) && !(display_rec_time.s & 0x1)) )	//make the ICON_REC Blink!
			{
				if(((display_flag==0)&&(((i >= ICON_REC)&&(i<=ICON_PAUSE))||(i == ICON_PLAY1)||(i == ICON_PAUSE1)||(i == ICON_PLAYBACK_PLAY)||(i == ICON_PLAYBACK_PAUSE)))||(display_flag==1))
			{
				for (y=0 ; y<display_icon_item[i].icon_h ; y++) 
				{
					offset_data_tmp = y*display_icon_item[i].icon_w;
					offset_pixel_tmp = (display_icon_item[i].pos_y + y)*TFT_WIDTH + display_icon_item[i].pos_x;
					for (x=0 ; x<display_icon_item[i].icon_w ; x++) 
					{
						offset_data = offset_data_tmp + x;
						if (*(icon_table[i] + offset_data) == display_icon_item[i].transparent) {
							continue;
						}
						offset_pixel = offset_pixel_tmp + x;
						if (offset_pixel < TFT_WIDTH*TFT_HEIGHT) {
							*(frame_buff + offset_pixel) = *(icon_table[i] + offset_data);
						}
					}
				}
			}
		}
	}
}
}

void ap_display_tv_draw(INT16U *frame_buff)
{
	INT32U i, x, y, offset_pixel, offset_pixel_tmp, offset_data, offset_data_tmp;

	for (i=0 ; i<ICOM_MAX_NUM ; i++) 
	{
		if( display_icon_sts[i >> 5] & (1<<(i&0x1F)) ) 
		{
			if( (i != ICON_REC) || ((i == ICON_REC) && !(display_rec_time.s & 0x1)) )	//make the ICON_REC Blink!
			{
				for (y=0 ; y<display_tv_icon_item[i].icon_h ; y++) 
				{
					offset_data_tmp = y*display_tv_icon_item[i].icon_w;
					offset_pixel_tmp = (display_tv_icon_item[i].pos_y + y)*TV_WIDTH + display_tv_icon_item[i].pos_x;
					for (x=0 ; x<display_tv_icon_item[i].icon_w ; x++) 
					{
						offset_data = offset_data_tmp + x;
						if (*(icon_table[i] + offset_data) == display_tv_icon_item[i].transparent) {
							continue;
						}
						offset_pixel = offset_pixel_tmp + x;
						if (offset_pixel < TV_WIDTH*TV_HEIGHT) {
							*(frame_buff + offset_pixel) = *(icon_table[i] + offset_data);
						}
					}
				}
			}
		}
	}
}

void ap_display_hdmi_draw(INT16U *frame_buff)
{
#ifdef HDMI_JPG_DECODE_AS_YUV422
	INT32U i, x, y, offset_pixel, offset_pixel_tmp, offset_data, offset_data_tmp;

	for (i=0 ; i<ICOM_MAX_NUM ; i++) 
	{
		if( display_icon_sts[i >> 5] & (1<<(i&0x1F)) ) 
		{
			if( (i != ICON_REC) || ((i == ICON_REC) && !(display_rec_time.s & 0x1)) )	//make the ICON_REC Blink!
			{
				for (y=0 ; y<display_hdmi_icon_item[i].icon_h ; y++) 
				{
					offset_data_tmp = y*display_hdmi_icon_item[i].icon_w;
					offset_pixel_tmp = (display_hdmi_icon_item[i].pos_y + y)*HDMI_WIDTH + display_hdmi_icon_item[i].pos_x;
					for (x=0 ; x<display_hdmi_icon_item[i].icon_w ; x++) 
					{
						offset_data = offset_data_tmp + x;
						if (*(icon_table_hdmi[i] + offset_data) == display_hdmi_icon_item[i].transparent) {
							continue;
						}
						offset_pixel = offset_pixel_tmp + x;
						if (offset_pixel < HDMI_WIDTH*HDMI_HEIGHT) {
							*(frame_buff + offset_pixel) = *(icon_table_hdmi[i] + offset_data);
						}
					}
				}
			}
		}
	}
#endif //#ifdef HDMI_JPG_DECODE_AS_YUV422
	

#ifdef HDMI_JPG_DECODE_AS_GP420
	INT32U i, x, y, offset_pixel, offset_pixel_tmp, offset_data, offset_data_tmp;
	INT8U Y0, Y1, U, V;
	
	for(i=0 ; i<ICOM_MAX_NUM ; i++) {
		if(display_icon_sts[i >> 5] & (1<<(i&0x1F))) {
			//if((i != ICON_REC) || ((i == ICON_REC) && !(display_rec_time.s & 0x1))) { //make the ICON_REC Blink!
				offset_pixel_tmp = (display_hdmi_icon_item[i].pos_y >> 1)*1280*3 + (display_hdmi_icon_item[i].pos_x & ~0x0001);
				for(y=0 ; y<display_hdmi_icon_item[i].icon_h ; y++) {
					offset_data_tmp = y*display_hdmi_icon_item[i].icon_w/2;		// offset_data_tmp is 4-byte data offset
					for(x=0; x<(display_hdmi_icon_item[i].icon_w/2); x++) {		// x is 4-byte data offset
																									//				[ low  --> high ]
						offset_data = *(INT32U *)((INT32U *)icon_table_hdmi[i]+offset_data_tmp+x);	//YUV type3 -->	[B0, B1, B2, B3 ]
																									//				[V,  Y0,  U,  Y1]
						if(offset_data == display_hdmi_icon_item[i].transparent) continue;

						Y0 = (offset_data >> 8) & 0xff;
						Y1 = (offset_data>>24) & 0xff;

						offset_pixel = offset_pixel_tmp + x*2;
						*(INT8U *)((INT8U *)frame_buff + offset_pixel) = Y0;
						*(INT8U *)((INT8U *)frame_buff + offset_pixel + 1) = Y1;
					}

					if((y&0x0001) == 0) {
						offset_pixel_tmp += 1280;
						for(x=0; x<(display_hdmi_icon_item[i].icon_w/2); x++) {
																										//				[ low  --> high ]
							offset_data = *(INT32U *)((INT32U *)icon_table_hdmi[i]+offset_data_tmp+x);	//YUV type3 -->	[B0, B1, B2, B3 ]
																										//				[V,  Y0,  U,  Y1]
							if(offset_data == display_hdmi_icon_item[i].transparent) continue;

							U = (offset_data >> 16) & 0xff;
							V = offset_data & 0xff;

							offset_pixel = offset_pixel_tmp + x*2;
							*(INT8U *)((INT8U *)frame_buff + offset_pixel) = U;
							*(INT8U *)((INT8U *)frame_buff + offset_pixel + 1) = V;
						}
					}
					offset_pixel_tmp += 1280;
				}
			//}
		}
	}
#endif // #ifdef HDMI_JPG_DECODE_AS_GP420
}

void ap_display_str_icon_draw(INT16U *frame_buff)
{
	INT8U i;
	DISPLAY_ICONSHOW cursor_icon;

	cursor_icon.transparent = TRANSPARENT_COLOR;
	
	for (i=0 ; i<STR_ICON_MAX_NUM ; i++) 
	{
		if( display_str_queue[i].num) 
		{
			cursor_icon.icon_w = display_str_queue[i].w;
			cursor_icon.icon_h = display_str_queue[i].h;
			cursor_icon.pos_x = display_str_queue[i].pos_x;
			cursor_icon.pos_y = display_str_queue[i].pos_y;
			ap_display_icon_draw(frame_buff,(INT16U*)(display_str_queue[i].addr),&cursor_icon);
		}
	}
}

void ap_display_hdmi_str_icon_draw(INT16U *frame_buff)
{
	INT8U i;
	DISPLAY_ICONSHOW cursor_icon;

	cursor_icon.transparent = TRANSPARENT_COLOR_YUYV;
	
	for (i=0 ; i<STR_ICON_MAX_NUM ; i++) 
	{
		if( display_str_queue[i].num) 
		{
			cursor_icon.icon_w = display_str_queue[i].w;
			cursor_icon.icon_h = display_str_queue[i].h;
			cursor_icon.pos_x = display_str_queue[i].pos_x;
			cursor_icon.pos_y = display_str_queue[i].pos_y;
			ap_display_hdmi_icon_draw(frame_buff,(INT16U*)(display_str_queue[i].addr), &cursor_icon);
		}
	}
}


void ap_display_icon_draw(INT16U *frame_buff, INT16U *icon_stream, DISPLAY_ICONSHOW *icon_info)
{
	INT32U x, y, offset_pixel, offset_pixel_tmp, offset_data_tmp, pixel_limit;
	INT16U *icon_stream_data, *frame_buff_data;

	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pixel_limit = TFT_WIDTH*TFT_HEIGHT;
	} else { //TV
		pixel_limit = TV_WIDTH*TV_HEIGHT;
	}

	icon_stream_data = 0;
	for (y=0 ; y<icon_info->icon_h ; y++) {
		offset_data_tmp = y*icon_info->icon_w;
		if(g_Disp_Device == DISP_DEV_TFT) { //TFT
			offset_pixel_tmp = (icon_info->pos_y + y)*TFT_WIDTH + icon_info->pos_x;
		} else { //TV
			offset_pixel_tmp = (icon_info->pos_y + y)*TV_WIDTH + icon_info->pos_x;
		}

		for (x=0 ; x<icon_info->icon_w ; x++) {
			icon_stream_data = offset_data_tmp + x + icon_stream;
			if (*icon_stream_data == icon_info->transparent) {
				continue;
			} else if (*icon_stream_data == 0x4228) {		//0x7BCF
				frame_buff_data = frame_buff + offset_pixel_tmp + x;
				*frame_buff_data &= 0xE79C;
				*frame_buff_data >>= 2;
				continue;
			}
			offset_pixel = offset_pixel_tmp + x;
			if (offset_pixel < pixel_limit) {
				*(frame_buff + offset_pixel) = *icon_stream_data;
			}
		}
	}
}


void ap_display_hdmi_icon_draw(INT16U *frame_buff, INT16U *icon_stream, DISPLAY_ICONSHOW *icon_info)
{
#ifdef HDMI_JPG_DECODE_AS_YUV420
	INT32U x, y, offset_pixel, offset_pixel_tmp, offset_data_tmp, offset_data;
	INT8U Y0, Y1, U, V;

	offset_pixel_tmp = (icon_info->pos_y >> 1)*1280*3 + (icon_info->pos_x & ~0x0001);
	for(y=0 ; y<icon_info->icon_h ; y++) {
		offset_data_tmp = y*icon_info->icon_w/2;		// offset_data_tmp is 4-byte data offset
		for(x=0; x<(icon_info->icon_w/2); x++) {		// x is 4-byte data offset
																				//				[ low  --> high ]
			offset_data = *(INT32U *)((INT32U *)icon_stream+offset_data_tmp+x);	//YUV type3 -->	[B0, B1, B2, B3 ]
																				//				[V,  Y0,  U,  Y1]
			if(offset_data == icon_info->transparent) continue;

			Y0 = (offset_data >> 8) & 0xff;
			Y1 = (offset_data>>24) & 0xff;

			offset_pixel = offset_pixel_tmp + x*2;
			*(INT8U *)((INT8U *)frame_buff + offset_pixel) = Y0;
			*(INT8U *)((INT8U *)frame_buff + offset_pixel + 1) = Y1;
		}

		if((y&0x0001) == 0) {
			offset_pixel_tmp += 1280;
			for(x=0; x<(icon_info->icon_w/2); x++) {
																					//				[ low  --> high ]
				offset_data = *(INT32U *)((INT32U *)icon_stream+offset_data_tmp+x);	//YUV type3 -->	[B0, B1, B2, B3 ]
																					//				[V,  Y0,  U,  Y1]
				if(offset_data == icon_info->transparent) continue;

				U = (offset_data >> 16) & 0xff;
				V = offset_data & 0xff;

				offset_pixel = offset_pixel_tmp + x*2;
				*(INT8U *)((INT8U *)frame_buff + offset_pixel) = U;
				*(INT8U *)((INT8U *)frame_buff + offset_pixel + 1) = V;
			}
		}
		offset_pixel_tmp += 1280;
	}
#endif

#ifdef HDMI_JPG_DECODE_AS_YUV422
	INT32U x, y, offset_pixel, offset_pixel_tmp, offset_data_tmp, offset_data;

	offset_pixel_tmp = icon_info->pos_y*1280 + (icon_info->pos_x & ~0x0001);
	for(y=0 ; y<icon_info->icon_h ; y++) {
		offset_data_tmp = y*icon_info->icon_w/2;		// offset_data_tmp is 4-byte data offset
		for(x=0; x<(icon_info->icon_w/2); x++) {		// x is 4-byte data offset
																				//				[ low  --> high ]
			offset_data = *(INT32U *)((INT32U *)icon_stream+offset_data_tmp+x);	//YUV type3 -->	[B0, B1, B2, B3 ]
																				//				[V,  Y0,  U,  Y1]
			if(offset_data == icon_info->transparent) continue;
			offset_pixel = offset_pixel_tmp + x*2;
			*(INT32U *)(frame_buff + offset_pixel) = offset_data;
		}
		offset_pixel_tmp += 1280;
	}
#endif
}


void ap_display_vblank_isr(void)
{
#if DISPLAY_BUF_NUM > 1
	INT32U buff_get, tft_buff;

//DBG_PRINT("x");

	buff_get = ap_display_queue_get(display_dma_queue);
	if (buff_get) {
		tft_buff = R_TFT_FBI_ADDR;
		R_TFT_FBI_ADDR = buff_get;
		ap_display_queue_put(display_isr_queue, tft_buff);
		
		#if USE_PANEL_NAME == PANEL_T20P82_ST7789V
		tft_tft_en_set(TRUE);
		#endif
	}
#else
	R_TFT_FBI_ADDR = I80_diplay_buff & 0xffffff;
#endif

	if (MSDC_CLK!=0)
	{
		sys_msdc_clk_set(MSDC_CLK);
		if (MSDC_CLK == 48) {
			AP_TFT_ClK_48M_set();
		}	
		else {
			AP_TFT_ClK_144M_set();
		}

		MSDC_CLK = 0;
	}
}

void ap_display_tv_vblank_isr(void)
{
#if TV_DISPLAY_BUF_NUM > 1
	INT32U buff_get, tv_buff;

//DBG_PRINT(".");
	if(Tv_Interlace_Isr_Cnt & 0x01)
	{
		buff_get = ap_display_queue_get(display_dma_queue);
		if (buff_get) {
			tv_buff = R_TV_FBI_ADDR;
			R_TV_FBI_ADDR = buff_get;
			ap_display_queue_put(display_isr_queue, tv_buff);
		}
	}

	if(Tv_Interface_Format == TV_INTERLACE)
	{
		Tv_Interlace_Isr_Cnt++;
	}
	
#else
	R_TV_FBI_ADDR = (INT32U) display_frame[0] & 0xffffff;
	ap_display_queue_put(display_isr_queue, (INT32U) display_frame[0]);
#endif
}

#ifdef HDMI_JPG_DECODE_AS_GP420
// ISR for HDMI, jpeg decoded as YUV420
static void tft2_isr(void)
{
	INT32U buff_get, old_buff_addr;
	if (R_PPU_IRQ_STATUS&0x80000) {
		//R_PPU_IRQ_STATUS  =  0x80000;		// clear interrupt flag	
		(*((volatile INT32U *) 0xC01B0000)) |= 0x200;	// reset
		if(gp420conv_stop_flag) {
			gp420conv_stop_flag = 0;
			(*((volatile INT32U *) 0xC01B0000)) = 0;
		} else {
			buff_get = ap_display_queue_get(display_dma_queue);
			old_buff_addr = (*((volatile INT32U *) 0xC01B0008));
			if (buff_get) {
				(*((volatile INT32U *) 0xC01B0008)) = buff_get;
				R_TV_FBI_ADDR = buff_get;

				//DBG_PRINT(".");
				ap_display_queue_put(display_isr_queue, old_buff_addr);
			} else {
				(*((volatile INT32U *) 0xC01B0008)) = old_buff_addr;
				R_TV_FBI_ADDR = old_buff_addr;

				//DBG_PRINT("x");
			}

			(*((volatile INT32U *) 0xC01B0000)) |= 0x100;	// start
		}
	}
	R_PPU_IRQ_STATUS  =  R_PPU_IRQ_STATUS;		// clear interrupt flag	
}
#elif defined(HDMI_JPG_DECODE_AS_YUV422)
// ISR for HDMI, jpeg decoded as YUV422
static void tft2_isr(void)
{
	INT32U buff_get, old_buff_addr;
//if (R_PPU_IRQ_STATUS&0x400)
//    DBG_PRINT("u");
	if (R_PPU_IRQ_STATUS&0x80000) {
		if(gp420conv_stop_flag) {
			gp420conv_stop_flag = 0;
			(*((volatile INT32U *) 0xC01B0000)) = 0;
		} else {
			buff_get = ap_display_queue_get(display_dma_queue);
			old_buff_addr = (*((volatile INT32U *) 0xC01B0008));
			if (buff_get) {
				(*((volatile INT32U *) 0xC01B0008)) = buff_get;
				R_TV_FBI_ADDR = buff_get;
				ap_display_queue_put(display_isr_queue, old_buff_addr);
			} else {
				(*((volatile INT32U *) 0xC01B0008)) = old_buff_addr;
				R_TV_FBI_ADDR = old_buff_addr;
			}
		}
	}
	R_PPU_IRQ_STATUS  =  R_PPU_IRQ_STATUS;		// clear interrupt flag	
}
#endif // HDMI_JPG_DECODE_AS_GP420

#if ((USE_PANEL_NAME == PANEL_400X240_I80)||(USE_PANEL_NAME == PANEL_T20P82_ST7789V))	

INT8U TE_ctrl_status = 0;
INT8U TE_ctrl_step= 0;
void ap_display_TE_sync_I80_start(void)
{
	TE_ctrl_status = 1;
	TE_ctrl_step = 0;
}
void ap_display_TE_sync_I80_stop(void)
{
	TE_ctrl_status = 0;
	TE_ctrl_step = 0;
}

void ap_display_TE_sync_I80(void)
{
	//if(TE_ctrl_status){
		if(TE_ctrl_step == 1){
			if(gpio_read_io(I80_TE_PIN)){
				if((g_Disp_Device==DISP_DEV_TV)||(g_Disp_Device==DISP_DEV_HDMI)){
					/*if(g_tv_hdmi_display==1)
					{
						R_TFT_FBI_ADDR = display_tmp_tft_frame;
						tft_tft_en_set(TRUE);
						g_tv_hdmi_display=0;
					}*/
				}else{
					ap_display_vblank_isr();
				  	ap_display_TE_sync_I80_stop();
				}
				//tft_tft_en_set(TRUE);
				//TE_ctrl_step = 2;
			}
		}
		
		if(TE_ctrl_step == 0){
			if(!gpio_read_io(I80_TE_PIN))			//..._|
			{
				TE_ctrl_step = 1;
				
			}else{
				TE_ctrl_step = 0;
			}
		}
	//}
}
#endif

#if USE_PANEL_NAME == PANEL_T20P82_ST7789V
/*void ap_display_TE_sync_I80_isr(void)
{
	if(g_tv_hdmi_display==0)
	{
		if(g_Disp_Device==DISP_DEV_TV){
		}else{
			ap_display_vblank_isr();
		}
	}
	else
	{
		R_TFT_FBI_ADDR = display_tmp_tft_frame;
		tft_tft_en_set(TRUE);
		g_tv_hdmi_display=0;
	}
}*/
#endif

void ap_display_buff_copy_and_draw(INT32U buff_addr, INT16U src_type)
{
	INT32U buff_size, buff_get;
	INT32U i;
	INT8U*	pfill_black_value;	
	#if (Enable_Lane_Departure_Warning_System)
	INT32U*	pfill_red_line;	
	#endif	
	INT8U osd_mode_flag;
	INT8U video_lapse_flag;
	

	if(buff_addr==0)	return;
	if(g_Disp_Device==DISP_DEV_HDMI)	return;

	osd_mode_flag = ap_state_config_osd_mode_get();
	video_lapse_flag = ap_state_config_videolapse_get();
	buff_size = getDispDevBufSize();

	if (src_type == DISPLAY_BUFF_SRC_SENSOR) {
		buff_get = buff_addr;
		if(enable_black_edge_get()) {
			pfill_black_value = (INT8U*)buff_get;

		  #if TV_DET_ENABLE
			if(g_Disp_Device==DISP_DEV_TV)
			{
			  #if (TV_WIDTH == 640)
				for(i=0; i<(TV_WIDTH*60*2); i++)
				{
					*(pfill_black_value+i) = 0; // Y60
					*(pfill_black_value+(TV_WIDTH*(TV_HEIGHT-60)*2)+i) = 0; // 60
				}
			  #else
				for(i=0; i<80; i++)
				{
					*(pfill_black_value+i) = 0; 
				}
			  #endif
			}
			else
		  #endif
			{
			  #if (USE_PANEL_NAME == PANEL_T27P05_ILI8961)
				for(i=0; i<80; i++)
				{
					*(pfill_black_value+i) = 0; 
				}
			#elif (USE_PANEL_NAME == PANEL_T43)
				for(i=0; i<120; i++)
				{
					*(pfill_black_value+i) = 0; 
				}
			
			  #else		
				for(i=0; i<(TFT_WIDTH*30*2); i++)
				{
					*(pfill_black_value+i) = 0; // Y30
					*(pfill_black_value+(TFT_WIDTH*(TFT_HEIGHT-30)*2)+i) = 0; // 30
				}
			  #endif
			}
		}

		#if (Enable_Lane_Departure_Warning_System)
		if((ap_display_get_device() == DISP_DEV_TFT) && LDWS_Enable_Flag)
		{
			pfill_red_line = (INT32U*)buff_get;
			pfill_red_line += ((TFT_WIDTH*2*red_line_postion)/4);
			for(i=0; i<((TFT_WIDTH*2)/4); i++)
			{
				*pfill_red_line = 0xF800F800; 
				pfill_red_line++;
			}

		#if LDW_DIS_DYNAMIC_DRAW == 0

			drawLine((unsigned short*)buff_get,ldw_line_postion_L_x,ldw_line_postion_L_y,TFT_WIDTH/2,red_line_postion,0,255,0);
			drawLine((unsigned short*)buff_get,ldw_line_postion_R_x,ldw_line_postion_R_y,TFT_WIDTH/2,red_line_postion,0,255,0);
		#else
			ap_get_ldw_display_coordinate();
//			DBG_PRINT("AlarmLeft Sx,Sy,Ex,Ey: %d, %d, %d, %d\r\n",ldw_dis.ldw_dis_LB_alarmP_X,ldw_dis.ldw_dis_LB_alarmP_Y,ldw_dis.ldw_dis_LT_alarmP_X,ldw_dis.ldw_dis_LT_alarmP_Y);
//			DBG_PRINT("AlarmRight Sx,Sy,Ex,Ey: %d, %d, %d, %d\r\n",ldw_dis.ldw_dis_RB_alarmP_X,ldw_dis.ldw_dis_RB_alarmP_Y,ldw_dis.ldw_dis_RT_alarmP_X,ldw_dis.ldw_dis_RT_alarmP_Y);
//			DBG_PRINT("CheckLeft Sx,Sy,Ex,Ey: %d, %d, %d, %d\r\n",ldw_dis.ldw_dis_LBP_X,ldw_dis.ldw_dis_LBP_Y,ldw_dis.ldw_dis_LTP_X,ldw_dis.ldw_dis_LTP_Y);
//			DBG_PRINT("CheckRight Sx,Sy,Ex,Ey: %d, %d, %d, %d\r\n",ldw_dis.ldw_dis_RBP_X,ldw_dis.ldw_dis_RBP_Y,ldw_dis.ldw_dis_RTP_X,ldw_dis.ldw_dis_RTP_Y);

//			DBG_PRINT("ROI_initY  %d\r\n",LDWPar.ROI_initY);

			if(LDWPar.LDW_keyFlg&&(ap_video_record_sts_get() & 0x2)){
				if((LDWPar.LLcheckFlg && LDWPar.RLcheckFlg && LDWPar.LTP_X<=LDWPar.RTP_X+10) || LDWPar.LLAlarmFlg || LDWPar.RLAlarmFlg){
					if(LDWPar.LLAlarmFlg == 1){
						drawLine((unsigned short*)buff_get,ldw_dis.ldw_dis_LB_alarmP_X,ldw_dis.ldw_dis_LB_alarmP_Y,ldw_dis.ldw_dis_LT_alarmP_X,ldw_dis.ldw_dis_LT_alarmP_Y,255,0,0);
					}else if(LDWPar.LLcheckFlg == 1){
						drawLine((unsigned short*)buff_get,ldw_dis.ldw_dis_LBP_X,ldw_dis.ldw_dis_LBP_Y,ldw_dis.ldw_dis_LTP_X,ldw_dis.ldw_dis_LTP_Y,0,255,0);
					}
					if(LDWPar.RLAlarmFlg == 1){
						drawLine((unsigned short*)buff_get,ldw_dis.ldw_dis_RB_alarmP_X,ldw_dis.ldw_dis_RB_alarmP_Y,ldw_dis.ldw_dis_RT_alarmP_X,ldw_dis.ldw_dis_RT_alarmP_Y,255,0,0);
					}else if(LDWPar.RLcheckFlg == 1){
						drawLine((unsigned short*)buff_get,ldw_dis.ldw_dis_RBP_X,ldw_dis.ldw_dis_RBP_Y,ldw_dis.ldw_dis_RTP_X,ldw_dis.ldw_dis_RTP_Y,0,255,0);
					}
				}else{
					drawLine((unsigned short*)buff_get,ldw_line_postion_L_x,ldw_line_postion_L_y,TFT_WIDTH/2,red_line_postion,0,255,0);
					drawLine((unsigned short*)buff_get,ldw_line_postion_R_x,ldw_line_postion_R_y,TFT_WIDTH/2,red_line_postion,0,255,0);
				}
			}else{
				drawLine((unsigned short*)buff_get,ldw_line_postion_L_x,ldw_line_postion_L_y,TFT_WIDTH/2,red_line_postion,0,255,0);
				drawLine((unsigned short*)buff_get,ldw_line_postion_R_x,ldw_line_postion_R_y,TFT_WIDTH/2,red_line_postion,0,255,0);
			}
		#endif
			
		}
		#endif
		
	} else if(src_type == DISPLAY_BUFF_SRC_MJPEG) {
		buff_get = buff_addr;
	} else if(src_type == DISPLAY_BUFF_SRC_USB_SETTING) {
		buff_get = buff_addr;
		if(ap_display_get_device() == DISP_DEV_TFT){
			 #if (USE_PANEL_NAME == PANEL_400X240_I80)
				TEST_Display_Data_Conv(buff_get,400,240);
				ap_display_queue_put(display_isr_queue, (INT32U) display_frame[0]);
				ap_display_TE_sync_I80_start();
			 #elif (USE_PANEL_NAME == PANEL_T20P82_ST7789V)
			 	ap_display_queue_put(display_dma_queue, buff_get);
		  	    ap_display_TE_sync_I80_start();
			 #else
		  	  ap_display_queue_put(display_dma_queue, buff_get);
			 #endif 	
		}
		else{
		  	ap_display_queue_put(display_dma_queue, buff_get);
		}
	  	return;
	} else {
		if(ap_display_get_device() == DISP_DEV_TFT){
			if (DISPLAY_BUF_NUM == 1){
				buff_get = (INT32U) display_frame[0];
			}
			else{
				buff_get = ap_display_queue_get(display_isr_queue);
			}
		}
		else{
			buff_get = ap_display_queue_get(display_isr_queue);
		}
	
	}

	if(buff_get) {
		if ((src_type != DISPLAY_BUFF_SRC_SENSOR) && (src_type != DISPLAY_BUFF_SRC_MJPEG))  {
			if(buff_addr != buff_get) {
				dma_buffer_copy(buff_addr, buff_get, buff_size, 0, 0);
			}
		}
		if (display_setting_buff) {
			DISPLAY_ICONSHOW cursor_icon;

			if(g_Disp_Device==DISP_DEV_TFT) { //TFT
				ap_display_draw((INT16U *) buff_get);	//Icon draw
			} else { //TV
				ap_display_tv_draw((INT16U *) buff_get);	//Icon draw
			}

			cursor_icon.icon_w = TFT_WIDTH;
			cursor_icon.icon_h = TFT_HEIGHT;
			cursor_icon.transparent = TRANSPARENT_COLOR;
			if(g_Disp_Device==DISP_DEV_TFT) { //TFT
				cursor_icon.pos_x = 0;
				cursor_icon.pos_y = 0;
			} else { //TV
			  #if TV_WIDTH == 720
				cursor_icon.pos_x = 200;
			  #elif TV_WIDTH == 640
				cursor_icon.pos_x = 160;
			  #endif
				cursor_icon.pos_y = 100;
			}
			ap_display_icon_draw((INT16U *) buff_get, (INT16U *) display_setting_buff, &cursor_icon);
		} else {
			if ( (display_effect_sts != DISPLAY_NONE_EFFECT) || (display_mp3_index_sts != DISPLAY_MP3_INDEX_NONE_EFFECT ) || (display_mp3_input_num_sts != DISPLAY_MP3_INPUT_NUM_NONE_EFFECT ) ){
				ap_display_effect_draw(buff_get);
			}
			if (display_effect_sts != DISPLAY_PIC_EFFECT) {
				ap_display_timer();
				ap_display_MP3_Play_timer();
				ap_display_timer_browser(src_type); //at browse mode
				if(osd_mode_flag)
				{
				if(display_left_rec_time) {
					if(g_Disp_Device==DISP_DEV_TFT) { //TFT
						ap_display_rec_time_draw((INT16U *) buff_get, (void *) &display_rec_time, POSTION_Record_Time_X, POSTION_Record_Time_Y, 0);
					} else { //TV
						ap_display_rec_time_draw((INT16U *) buff_get, (void *) &display_rec_time, POSTION_Record_Time_X_tv, POSTION_Record_Time_Y_tv, 0);
					}
				} else if(display_os_time) {
					if(g_Disp_Device==DISP_DEV_TFT) { //TFT
							if(video_lapse_flag)
							{
								ap_display_rec_time_draw((INT16U *) buff_get, (void *) &display_rec_lapse_time, POSTION_Record_Time_X,  POSTION_Record_Time_Y, 1);
							}
							else
							{
						ap_display_rec_time_draw((INT16U *) buff_get, (void *) &display_rec_time, POSTION_Record_Time_X,  POSTION_Record_Time_Y, 1);
							}
					} else { //TV
						ap_display_rec_time_draw((INT16U *) buff_get, (void *) &display_rec_time, POSTION_Record_Time_X_tv,  POSTION_Record_Time_Y_tv, 1);
					}
				} else if(display_os_time_browser) {
					if(g_Disp_Device==DISP_DEV_TFT) { //TFT
						ap_display_rec_time_draw((INT16U *) buff_get, (void *) &display_rec_time, POSTION_Record_Time_X, POSTION_Record_Time_Y, 1);
					} else { //TV
						ap_display_rec_time_draw((INT16U *) buff_get, (void *) &display_rec_time, POSTION_Record_Time_X_tv, POSTION_Record_Time_Y_tv, 1);
					}
				}
				}

				if(display_RTC_date_time) {
					if(osd_mode_flag)
					{
					ap_display_rec_date_time_draw((INT16U *) buff_get);
				}
				}
				if (video_preview_timerid == 0xFF) {
					if(g_Disp_Device==DISP_DEV_TFT) { //TFT
						ap_display_draw((INT16U *) buff_get);	//Icon draw
					} else { //TV
						ap_display_tv_draw((INT16U *) buff_get);	//Icon draw
					}
					if(osd_mode_flag)
					{
					ap_display_str_icon_draw((INT16U *) buff_get);  // String icon draw
				}
			}
		}
		}

		if(ap_display_get_device() == DISP_DEV_TFT){
			 #if (USE_PANEL_NAME == PANEL_400X240_I80)
				TEST_Display_Data_Conv(buff_get,400,240);
				ap_display_queue_put(display_isr_queue, (INT32U) display_frame[0]);
				ap_display_TE_sync_I80_start();
			 #elif (USE_PANEL_NAME == PANEL_T20P82_ST7789V)
			 	ap_display_queue_put(display_dma_queue, buff_get);
		  	    ap_display_TE_sync_I80_start();
			 #else
		  	  ap_display_queue_put(display_dma_queue, buff_get);
			 #endif 	
		}
		else{
		  	ap_display_queue_put(display_dma_queue, buff_get);
		}

	} else {
		if (src_type == DISPLAY_BUFF_SRC_JPEG) {
			OSQPost(DisplayTaskQ, (void *) (buff_addr|MSG_DISPLAY_TASK_JPEG_DRAW));
			DBG_PRINT("F");
		} else if(src_type == DISPLAY_BUFF_SRC_WAV_TIME) {
			OSQPost(DisplayTaskQ, (void *) (buff_addr|MSG_DISPLAY_TASK_WAV_TIME_DRAW));
		}
	}
}


void ap_display_hdmi_buff_copy_and_draw(INT32U buff_addr, INT16U src_type)
{
	INT32U buff_size, buff_get;

	if(ap_display_get_device()!=DISP_DEV_HDMI)	return;

	buff_size = getDispDevBufSize();

	if(src_type == DISPLAY_BUFF_SRC_MJPEG) {
		buff_get = buff_addr;
	} else {
		buff_get = ap_display_queue_get(display_isr_queue);
	}

	if (buff_get) {
		if (src_type != DISPLAY_BUFF_SRC_MJPEG) {
			if(buff_addr != buff_get) {
				dma_buffer_copy(buff_addr, buff_get, buff_size, 0, 0);
			}
		}

		if (display_setting_buff) {

			DISPLAY_ICONSHOW cursor_icon;

			ap_display_hdmi_draw((INT16U *) buff_get);	//Icon draw

			cursor_icon.icon_w = 1280;
			cursor_icon.icon_h = 720;
			cursor_icon.transparent = TRANSPARENT_COLOR_YUYV;
			cursor_icon.pos_x = 0;
			cursor_icon.pos_y = 0;
			ap_display_hdmi_icon_draw((INT16U *) buff_get, (INT16U *) display_setting_buff, &cursor_icon);
		} else {
			if ( (display_effect_sts != DISPLAY_NONE_EFFECT) || (display_mp3_index_sts != DISPLAY_MP3_INDEX_NONE_EFFECT ) || (display_mp3_input_num_sts != DISPLAY_MP3_INPUT_NUM_NONE_EFFECT ) ){
				ap_display_effect_draw(buff_get);
			}
			ap_display_timer_browser(src_type); //at browse mode
			if(display_os_time_browser) {
				ap_display_hdmi_rec_time_draw((INT16U *)buff_get, (void *) &display_rec_time, POSTION_Record_Time_X_HDMI, POSTION_Record_Time_Y_HDMI, 1);
			}

			//if(display_RTC_date_time == DISPLAY_DATE_TIME_BROWSE) {
				//ap_display_hdmi_rec_date_time_draw_browse((INT16U *)buff_get, POSTION_Date_Time_Brose_X_HDMI, POSTION_Date_Time_Brose_Y_HDMI);
			//}

			ap_display_hdmi_draw((INT16U *) buff_get);	//Icon draw
			ap_display_hdmi_str_icon_draw((INT16U *) buff_get);  // String icon draw
		}

	  	ap_display_queue_put(display_dma_queue, buff_get);
	} else {
		if (src_type == DISPLAY_BUFF_SRC_JPEG) {
			OSQPost(DisplayTaskQ, (void *) (buff_addr|MSG_DISPLAY_TASK_HDMI_JPEG_DRAW));
		} else if(src_type == DISPLAY_BUFF_SRC_WAV_TIME) {
			OSQPost(DisplayTaskQ, (void *) (buff_addr|MSG_DISPLAY_TASK_HDMI_WAV_TIME_DRAW));
		}
	}
}


extern INT32U display_battery_low_frame0;
void ap_display_effect_draw(INT32U buff_addr)
{
	INT32U i, buff_size, w_size, cnt, sft_size, tmp;
	INT8U index_3, index_2, index_1, index_0;
	DISPLAY_ICONSHOW index_icon;
	
	if (display_effect_sts == DISPLAY_PIC_EFFECT || display_effect_sts == DISPLAY_PIC_PREVIEW_EFFECT) {
		buff_size = (TFT_WIDTH * TFT_HEIGHT) << 1;
		if (!display_effect_buff) {
			display_effect_buff = (INT32U) gp_malloc_align(buff_size, 64);
			if (!display_effect_buff) {
				return;
			}
			dma_buffer_copy(buff_addr, display_effect_buff, buff_size, 0, 0);
			if (display_effect_sts == DISPLAY_PIC_PREVIEW_EFFECT) {
				display_effect_offset = 25;
				if (video_preview_timerid == 0xFF) {
					video_preview_timerid = VIDEO_PREVIEW_TIMER_ID;
					sys_set_timer((void*)OSQPost, (void*) DisplayTaskQ, MSG_DISPLAY_TASK_PIC_EFFECT_END, video_preview_timerid, PHOTO_CAPTURE_TIME_INTERVAL);
				}
			} else {
				display_effect_offset = 24;
			}
		} else {
			if (video_preview_timerid == 0xFF) {
				w_size = TFT_WIDTH << 1;
				buff_size = (TFT_WIDTH - display_effect_offset) << 1;
				sft_size = display_effect_offset << 1;
				cnt = (TFT_HEIGHT-display_effect_offset) << 1;
				for (i=0 ; i<cnt ; i++) {
					tmp = (display_effect_offset + i)*w_size + sft_size;
					if (tmp >= ((TFT_WIDTH * TFT_HEIGHT) << 1)) {
						break;
					}
					dma_buffer_copy((display_effect_buff + (w_size*i)), (buff_addr + tmp), buff_size, buff_size, w_size);
				}		
				display_effect_offset += display_effect_offset;
				if (display_effect_offset >= TFT_HEIGHT) {
					display_effect_sts = DISPLAY_NONE_EFFECT;
					if (display_effect_buff) {
						gp_free((void *) display_effect_buff);
						display_effect_buff = 0;
					}
				}
				msgQSend(ApQ, MSG_APQ_PREVIEW_EFFECT_END, NULL, NULL, MSG_PRI_NORMAL);
			} else {
				dma_buffer_copy(display_effect_buff, buff_addr, buff_size, 0, 0);
			}	
		}
	} else if (display_effect_sts == DISPLAY_STRING_EFFECT) {
		if(g_Disp_Device == DISP_DEV_TFT) { //tft
			DISPLAY_ICONSHOW cursor_icon;

			if(display_str_background) {
				DISPLAY_ICONSHOW icon = {200, 88, TRANSPARENT_COLOR, 0, 0};
				/*cnt = icon.icon_h;
				for(i=0 ; i<cnt ; i++) {
					tmp = ((((TFT_HEIGHT-icon.icon_h)/2)+i)*TFT_WIDTH+((TFT_WIDTH-icon.icon_w)/2))<<1;
					dma_buffer_copy(display_battery_low_frame0+((icon.icon_w*i)<<1),buff_addr+tmp,icon.icon_w<<1,icon.icon_w<<1,TFT_WIDTH<<1);
				}*/
				icon.pos_x = (TFT_WIDTH-icon.icon_w)/2;
				icon.pos_y = (TFT_HEIGHT-icon.icon_h)/2;
				ap_setting_icon_draw((INT16U *)buff_addr, (INT16U *)display_battery_low_frame0, &icon, 1);
			}
			
			cursor_icon.icon_w = display_str.w;
			cursor_icon.icon_h = display_str.h;
			cursor_icon.transparent = TRANSPARENT_COLOR;		
			cursor_icon.pos_x = (TFT_WIDTH >> 1) - (display_str.w >> 1);
			cursor_icon.pos_y = (TFT_HEIGHT >> 1) - (display_str.h >> 1);
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) display_str.addr, &cursor_icon);

		} else if(g_Disp_Device == DISP_DEV_TV) { //TV

			DISPLAY_ICONSHOW cursor_icon;

			if(display_str_background) {
				DISPLAY_ICONSHOW icon = {200, 88, TRANSPARENT_COLOR, 0, 0};
				/*cnt = icon.icon_h;
				for(i=0 ; i<cnt ; i++) {
					tmp = ((((TV_HEIGHT-icon.icon_h)/2)+i)*TV_WIDTH+((TV_WIDTH-icon.icon_w)/2))<<1;
					dma_buffer_copy(display_battery_low_frame0+((icon.icon_w*i)<<1),buff_addr+tmp,icon.icon_w<<1,icon.icon_w<<1,TV_WIDTH<<1);
				}*/
				icon.pos_x = (TV_WIDTH-icon.icon_w)/2;
				icon.pos_y = (TV_HEIGHT-icon.icon_h)/2;
				ap_setting_icon_draw_tv((INT16U *)buff_addr, (INT16U *)display_battery_low_frame0, &icon, 1);
			}

			cursor_icon.icon_w = display_str.w;
			cursor_icon.icon_h = display_str.h;
			cursor_icon.transparent = TRANSPARENT_COLOR;		
			cursor_icon.pos_x = (TV_WIDTH >> 1) - (display_str.w >> 1);
			cursor_icon.pos_y = (TV_HEIGHT >> 1) - (display_str.h >> 1);
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) display_str.addr, &cursor_icon);

		} else { //HDMI
			DISPLAY_ICONSHOW cursor_icon;

			cursor_icon.icon_w = display_str.w;
			cursor_icon.icon_h = display_str.h;
			cursor_icon.transparent = TRANSPARENT_COLOR_YUYV;		
			cursor_icon.pos_x = (1280 >> 1) - (display_str.w >> 1);
			cursor_icon.pos_y = (720 >> 1) - (display_str.h >> 1);
			ap_display_hdmi_icon_draw((INT16U *) buff_addr, (INT16U *) display_str.addr, &cursor_icon);
		}
	}
	
	if(display_effect_sts != DISPLAY_PIC_PREVIEW_EFFECT)
	{
		if(display_mp3_index_sts & DISPLAY_MP3_INDEX_SHOW) {
			
			index_icon.icon_w = 16;
			index_icon.icon_h = 32;
			index_icon.transparent = TRANSPARENT_COLOR;
			index_icon.pos_y = PLAY_INDEX_Y;
			
			if(display_mp3_play_index < 10){
				index_3 = 0;
				index_2 = 0;
				index_1 = 0;
				index_0 = display_mp3_play_index;
			}else if(display_mp3_play_index < 100){
				index_3 = 0;
				index_2 = 0;
				index_1 = display_mp3_play_index/10;
				index_0 = display_mp3_play_index - 10*index_1;						
			}else if(display_mp3_play_index < 1000){
				index_3 = 0;
				index_2 = display_mp3_play_index/100;
				index_1 = (display_mp3_play_index - 100*index_2)/10;
				index_0 = (display_mp3_play_index - 100*index_2 - 10*index_1);						
			}else if(display_mp3_play_index < 10000){
				index_3 = display_mp3_play_index/1000;
				index_2 = (display_mp3_play_index - 1000*index_3)/100;
				index_1 = (display_mp3_play_index - 1000*index_3 - 100*index_2)/10;
				index_0 = (display_mp3_play_index - 1000*index_3 - 100*index_2 - 10*index_1);								
			}
			index_icon.pos_x = PLAY_INDEX_X;
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_0], &index_icon);
			index_icon.pos_x = PLAY_INDEX_X - 14;
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_1], &index_icon);
			index_icon.pos_x = PLAY_INDEX_X - 28;
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_2], &index_icon);
			index_icon.pos_x = PLAY_INDEX_X - 42;
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_3], &index_icon);			
		}
		if(display_mp3_index_sts & DISPLAY_MP3_TOTAL_INDEX_SHOW) {
			
			index_icon.icon_w = 16;
			index_icon.icon_h = 32;
			index_icon.transparent = TRANSPARENT_COLOR;
			index_icon.pos_y = PLAY_INDEX_Y;
			
			if(display_mp3_total_index < 10){
				index_3 = 0;
				index_2 = 0;
				index_1 = 0;
				index_0 = display_mp3_total_index;
			}else if(display_mp3_total_index < 100){
				index_3 = 0;
				index_2 = 0;
				index_1 = display_mp3_total_index/10;
				index_0 = display_mp3_total_index - 10*index_1;						
			}else if(display_mp3_total_index < 1000){
				index_3 = 0;
				index_2 = display_mp3_total_index/100;
				index_1 = (display_mp3_total_index - 100*index_2)/10;
				index_0 = (display_mp3_total_index - 100*index_2 - 10*index_1);						
			}else if(display_mp3_total_index < 10000){
				index_3 = display_mp3_total_index/1000;
				index_2 = (display_mp3_total_index - 1000*index_3)/100;
				index_1 = (display_mp3_total_index - 1000*index_3 - 100*index_2)/10;
				index_0 = (display_mp3_total_index - 1000*index_3 - 100*index_2 - 10*index_1);								
			}
			index_icon.pos_x = PLAY_TOTAL_INDEX_X;
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_0], &index_icon);
			index_icon.pos_x = PLAY_TOTAL_INDEX_X - 14;
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_1], &index_icon);
			index_icon.pos_x = PLAY_TOTAL_INDEX_X - 28;
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_2], &index_icon);
			index_icon.pos_x = PLAY_TOTAL_INDEX_X - 42;
			ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_3], &index_icon);	
		}
		if(display_mp3_index_sts & DISPLAY_MP3_VOLUME_SHOW) {
			
			index_icon.icon_w = 16;
			index_icon.icon_h = 32;
			index_icon.transparent = TRANSPARENT_COLOR;
			index_icon.pos_y = MP3_VOLUME_Y;
			
			if(display_mp3_volume < 10){
				index_0 = display_mp3_volume;
				index_icon.pos_x = MP3_VOLUME_X - 10;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_0], &index_icon);			
			}else{
				index_1 = display_mp3_volume/10;
				index_0 = display_mp3_volume - 10*index_1;
				index_icon.pos_x = MP3_VOLUME_X;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_0], &index_icon);
				index_icon.pos_x = MP3_VOLUME_X - 14;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_1], &index_icon);									
			}
		}
		if(display_mp3_index_sts & DISPLAY_MP3_FM_CHANNEL_SHOW) {
			
			index_icon.icon_h = 32;
			index_icon.transparent = TRANSPARENT_COLOR;
			index_icon.pos_y = FM_CHANNEL_Y;
								
			if(display_mp3_FM_channel < 1000){
				index_2 = display_mp3_FM_channel/100;
				index_1 = (display_mp3_FM_channel - 100*index_2)/10;
				index_0 = (display_mp3_FM_channel - 100*index_2 - 10*index_1);
				//show MHz
				index_icon.icon_w = 64;
				index_icon.pos_x = FM_CHANNEL_X - 8;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[11], &index_icon);			
				//show index_0
				index_icon.icon_w = 16;
				index_icon.pos_x = FM_CHANNEL_X - 14;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_0], &index_icon);
				//show dot
				index_icon.icon_w = 8;
				index_icon.pos_x = FM_CHANNEL_X - 14 - 8;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[10], &index_icon);			
				//show index_1
				index_icon.icon_w = 16;
				index_icon.pos_x = FM_CHANNEL_X - 14 - 6 - 14;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_1], &index_icon);
				index_icon.pos_x = FM_CHANNEL_X - 14 - 6 - 28;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_2], &index_icon);									
			}else{
				index_3 = display_mp3_FM_channel/1000;
				index_2 = (display_mp3_FM_channel - 1000*index_3)/100;
				index_1 = (display_mp3_FM_channel - 1000*index_3 - 100*index_2)/10;
				index_0 = (display_mp3_FM_channel - 1000*index_3 - 100*index_2 - 10*index_1);
				//show MHz
				index_icon.icon_w = 64;
				index_icon.pos_x = FM_CHANNEL_X - 8;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[11], &index_icon);			
				//show index_0
				index_icon.icon_w = 16;
				index_icon.pos_x = FM_CHANNEL_X - 14;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_0], &index_icon);
				//show dot
				index_icon.icon_w = 8;
				index_icon.pos_x = FM_CHANNEL_X - 14 - 8;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[10], &index_icon);			
				//show index_1
				index_icon.icon_w = 16;
				index_icon.pos_x = FM_CHANNEL_X - 14 - 6 - 14;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_1], &index_icon);
				index_icon.pos_x = FM_CHANNEL_X - 14 - 6 - 28;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_2], &index_icon);
				index_icon.pos_x = FM_CHANNEL_X - 14 - 6 - 42;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_index_table[index_3], &index_icon);
			}	
		}
					
		if(display_mp3_input_num_sts & DISPLAY_MP3_INPUT_NUM_SHOW) {
			
			index_icon.icon_w = 64;
			index_icon.icon_h = 128;
			index_icon.transparent = TRANSPARENT_COLOR;
			index_icon.pos_y = MP3_INPUT_NUM_Y;
			
			if(display_mp3_input_num < 10){
				index_0 = display_mp3_input_num;
				index_icon.pos_x = MP3_INPUT_NUM_X;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_0], &index_icon);			
			}else if(display_mp3_input_num < 100){
				index_1 = display_mp3_input_num/10;
				index_0 = display_mp3_input_num - 10*index_1;
				index_icon.pos_x = MP3_INPUT_NUM_X;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_0], &index_icon);
				index_icon.pos_x = MP3_INPUT_NUM_X - 44;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_1], &index_icon);									
			}else if(display_mp3_input_num < 1000){
				index_2 = display_mp3_input_num/100;
				index_1 = (display_mp3_input_num - 100*index_2)/10;
				index_0 = (display_mp3_input_num - 100*index_2 - 10*index_1);
				index_icon.pos_x = MP3_INPUT_NUM_X;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_0], &index_icon);
				index_icon.pos_x = MP3_INPUT_NUM_X - 44;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_1], &index_icon);
				index_icon.pos_x = MP3_INPUT_NUM_X - 88;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_2], &index_icon);									
			}else if(display_mp3_input_num < 10000){
				index_3 = display_mp3_input_num/1000;
				index_2 = (display_mp3_input_num - 1000*index_3)/100;
				index_1 = (display_mp3_input_num - 1000*index_3 - 100*index_2)/10;
				index_0 = (display_mp3_input_num - 1000*index_3 - 100*index_2 - 10*index_1);
				index_icon.pos_x = MP3_INPUT_NUM_X;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_0], &index_icon);
				index_icon.pos_x = MP3_INPUT_NUM_X - 44;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_1], &index_icon);
				index_icon.pos_x = MP3_INPUT_NUM_X - 88;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_2], &index_icon);
				index_icon.pos_x = MP3_INPUT_NUM_X - 132;
				ap_display_icon_draw((INT16U *) buff_addr, (INT16U *) mp3_input_number[index_3], &index_icon);
			}			
		}
	}	
}

void ap_display_video_preview_end(void)
{
	if (video_preview_timerid != 0xFF) {
		sys_kill_timer(video_preview_timerid);
		video_preview_timerid = 0xFF;
		display_effect_offset = 24;
	}
}

void ap_display_string_draw(STR_ICON *str_info)
{
	if ((INT32U) str_info == 0xFFFFFF) {
		display_effect_sts = DISPLAY_NONE_EFFECT;
	} else {
		display_effect_sts = DISPLAY_STRING_EFFECT;
		gp_memcpy((INT8S *) &display_str, (INT8S *) str_info, sizeof(STR_ICON));
	}
}
void ap_display_string_icon_start_draw(STR_ICON_EXT *str_info)
{
	INT8U i=0;
	for(i=0;i<STR_ICON_MAX_NUM;i++)
	{
		if(!display_str_queue[i].num)
			break;
	}
	if(i== STR_ICON_MAX_NUM)
		return;
	str_info->num = i+1;
	gp_memcpy((INT8S *) &display_str_queue[i], (INT8S *) str_info, sizeof(STR_ICON_EXT));
}

void ap_display_string_icon_clear(STR_ICON_EXT *str_info)
{
	if(str_info->num>STR_ICON_MAX_NUM)
		return;
	if(str_info->num)
	{
		display_str_queue[str_info->num-1].num= 0;
		str_info->num = 0;
	}
}
void ap_display_string_icon_clear_all(void)
{
	INT8U i=0;
	for(i=0;i<STR_ICON_MAX_NUM;i++)
	{
		display_str_queue[i].num = 0;
	}
}

void ap_display_left_rec_time_draw(INT32U time, INT8U flag)
{
	if (flag) {
		display_left_rec_time = 1;
	    if(time < 60){
			display_rec_time.s = time;
			display_rec_time.m = 0;
			display_rec_time.h = 0;
		}else if(time < 3600){
			display_rec_time.h = 0;
			display_rec_time.m = time/60;
			display_rec_time.s = time - display_rec_time.m*60;
		}else if(time < 360000){
			display_rec_time.h = time/3600;
			display_rec_time.m = (time - display_rec_time.h*3600)/60;
			display_rec_time.s = time - display_rec_time.h*3600 - display_rec_time.m*60;
		}else{
			display_rec_time.s = 59;
			display_rec_time.m = 59;
			display_rec_time.h = 99;
		}
	} else {
		display_left_rec_time = 0;
		display_rec_time.s = 0;
		display_rec_time.m = 0;
		display_rec_time.h = 0;
	}
}

void ap_display_effect_sts_set(INT8U type)
{
	display_effect_sts = type;
}

void ap_display_mp3_index_sts_set(INT8U type)
{
	if(type == 0){
		display_mp3_index_sts = 0;
	}else{
		display_mp3_index_sts |= type;
	}
}

void ap_display_mp3_input_num_sts_set(INT8U type)
{
	display_mp3_input_num_sts = type;
}

INT32U ap_display_queue_get(INT32U *queue)
{
#if DISPLAY_BUF_NUM_MAX > 1
	INT32U i;
#endif
	INT32U data;
	OS_CPU_SR cpu_sr;

	if(ap_display_get_device() == DISP_DEV_TFT){
		if(DISPLAY_BUF_NUM == 1){
			OS_ENTER_CRITICAL();
			if (queue[0]) {
				data = queue[0];
			  #if DISPLAY_BUF_NUM_MAX > 1
				for(i=0; i<(DISPLAY_BUF_NUM_MAX - 1); i++) {
					queue[i] = queue[i+1];
				}
				queue[i] = 0;
			  #else
				queue[0] = 0;
			  #endif
				OS_EXIT_CRITICAL();
				return data;
			} else {
				OS_EXIT_CRITICAL();
				return NULL;
			}
		}		
	}

	OS_ENTER_CRITICAL();
	if (queue[0]) {
		data = queue[0];
	  #if DISPLAY_BUF_NUM_MAX > 1
		for(i=0; i<(DISPLAY_BUF_NUM_MAX - 1); i++) {
			queue[i] = queue[i+1];
		}
		queue[i] = 0;
	  #else
		queue[0] = 0;
	  #endif
		OS_EXIT_CRITICAL();
		return data;
	} else {
		OS_EXIT_CRITICAL();
		return NULL;
	}
}

INT32U ap_display_queue_query(INT32U *queue)
{
	if(queue[0]) return 1;
	else return 0;
}


INT32S  ap_display_queue_put(INT32U *queue, INT32U data)
{
	INT32U i;
	OS_CPU_SR cpu_sr;

	if(ap_display_get_device() == DISP_DEV_TFT){
		if(DISPLAY_BUF_NUM == 1){
			OS_ENTER_CRITICAL();
		#if DISPLAY_BUF_NUM_MAX > 1

			if(data == 0)
			{	
				OS_EXIT_CRITICAL();
				return STATUS_FAIL;
			}
			for(i=0; i<(DISPLAY_BUF_NUM_MAX - 1); i++) {
				if(data == queue[i])
				{
					OS_EXIT_CRITICAL();
					return STATUS_FAIL;
				}
			}
		
		#endif

			for (i=0; i<DISPLAY_BUF_NUM_MAX; i++) {
				if (!queue[i]) {
					queue[i] = data;

					OS_EXIT_CRITICAL();
					return STATUS_OK;
				}
			}

			OS_EXIT_CRITICAL();
			DBG_PRINT("DisPFAIL-3");
			return STATUS_FAIL;
		}		
	}


	OS_ENTER_CRITICAL();
#if DISPLAY_BUF_NUM_MAX > 1

	if(data == 0)
	{	
		OS_EXIT_CRITICAL();
		return STATUS_FAIL;
	}

	for(i=0; i<(DISPLAY_BUF_NUM_MAX - 1); i++) {
		if(data == queue[i])
		{
			OS_EXIT_CRITICAL();
			DBG_PRINT("DisPFAIL-1");
			return STATUS_FAIL;
		}
	}
	
#endif

	for (i=0; i<DISPLAY_BUF_NUM_MAX; i++) {
		if (!queue[i]) {
			queue[i] = data;

			OS_EXIT_CRITICAL();
			return STATUS_OK;
		}
	}

	OS_EXIT_CRITICAL();
	DBG_PRINT("DisPFAIL-2");
	return STATUS_FAIL;
}


void ap_display_icon_sts_set(INT32U msg)
{
	INT32U i, icon_idx;
	
	icon_idx = 0;
	for (i=0 ; i<3 ; i++) {
		icon_idx = ((msg >> (i<<3)) & 0xFF);
		if (icon_idx) {
			display_icon_sts[icon_idx >> 5] |= 1 << (icon_idx & 0x1F);
		}
	}
}

void ap_display_icon_sts_clear(INT32U msg)
{
	INT32U i, icon_idx;
	
	icon_idx = 0;
	for (i=0 ; i<3 ; i++) {
		icon_idx = ((msg >> (i<<3)) & 0xFF);
		if (icon_idx) {
			display_icon_sts[icon_idx >> 5] &= ~(1 << (icon_idx & 0x1F));
		}
	}
}


void ap_display_timer_browser(INT8U type)
{
    INT32S sec, total_sec;

	if (timer_force_en_browser == 1) {
		if(type == DISPLAY_BUFF_SRC_WAV_TIME){
			sec = audio_dac_get_curr_play_time();
			total_sec = audio_dac_get_total_time();
		}else{
			sec = vid_dec_get_current_time();
			total_sec = vid_dec_get_total_time();
		}

		if ( (sec == -1) || (total_sec == -1) ) {
		    display_os_time_browser = 0;
		    return;
		}
		if (sec == 0 || (sec != browse_curr_time)) {
		    browse_curr_time = sec;
		    display_rec_time.s = sec % 60;
		    sec /= 60;
		    display_rec_time.m = sec % 60;
		    sec /= 60;
			display_rec_time.h = sec % 100;
		}
	    if(total_sec != display_browser_total_time) {
			display_browser_total_time = total_sec;
		    display_total_time.s = total_sec % 60;
		    total_sec /= 60;
		    display_total_time.m = total_sec % 60;
		    total_sec /= 60;
			display_total_time.h = total_sec % 100;
		}
		display_os_time_browser = 1;
	} else {
	    display_os_time_browser = 0;
	}
}

void ap_display_MP3_Play_timer(void)
{
#if 0
    INT32S sec, total_sec;
    INT32U status;

    status = audio_playing_state_get();
	if(status==1){
		sec = audio_get_curr_play_time();
		total_sec = audio_get_total_time();
		if ( (sec == -1) || (total_sec == -1) ) {
		    display_os_time_browser = 0;
		    return;
		}
		if (sec == 0 || (sec != browse_curr_time)) {
		    browse_curr_time = sec;
		    display_rec_time.s = sec % 60;
		    sec /= 60;
		    display_rec_time.m = sec % 60;
		    sec /= 60;
			display_rec_time.h = sec % 100;
		}
	    if(total_sec != display_browser_total_time) {
			display_browser_total_time = total_sec;
		    display_total_time.s = total_sec % 60;
		    total_sec /= 60;
		    display_total_time.m = total_sec % 60;
		    total_sec /= 60;
			display_total_time.h = total_sec % 100;
		}
		display_MP3_Play_time = 1;
	} else {
	    display_MP3_Play_time = 0;
	}
#endif
}

INT32U ap_display_timer_rec_time_get(void)
{
	return display_rec_time.s + display_rec_time.m*60 + display_rec_time.h*3600;
}


extern INT8U ap_state_config_record_time_get(void);
void ap_display_timer(void)
{	
	//INT8U temp[6] = {0, 1, 2, 3, 5, 10};
	INT8U temp[4] = {0, 3, 5, 10};
	INT32S delta_time;
	INT32U current_time;
	INT8U  time_interval = temp[ap_state_config_record_time_get()];
	INT8U  video_lapse_flag;

	video_lapse_flag = ap_state_config_videolapse_get();
	if(timer_force_en) {
		current_time = sw_timer_get_counter_L();
		delta_time = (INT32S)current_time - (INT32S)last_os_time;
		if(delta_time > 0) {
			if(delta_time>>10) {
				last_os_time = current_time - (delta_time & 0x3ff);
				display_rec_time.s += delta_time>>10;
				if(display_rec_time.s > 59) {
					display_rec_time.s = 0;
					display_rec_time.m++;
					if (display_rec_time.m > 59) {
						display_rec_time.m = 0;
						display_rec_time.h++;
						if (display_rec_time.h > 99) {
							display_rec_time.h = 99;
						}
					}
				}
				if(video_lapse_flag==0)
				{
				if ((time_interval != 0) && (display_rec_time.m == time_interval)) { //stop timer counting
					timer_force_en = 0;
					display_rec_time.m = 0;
				}
			}
		}
	}
		if(video_lapse_flag!=0)
		{
			if(g_videolapse_frame_cnt>=25)
			{
				g_videolapse_frame_cnt=0;
				display_rec_lapse_time.s++;
				if(display_rec_lapse_time.s > 59) {
						display_rec_lapse_time.s = 0;
						display_rec_lapse_time.m++;
						if (display_rec_lapse_time.m > 59) {
							display_rec_lapse_time.m = 0;
							display_rec_lapse_time.h++;
							if (display_rec_lapse_time.h > 99) {
								display_rec_lapse_time.h = 99;
							}
						}
				}

				if ((time_interval != 0) && (display_rec_lapse_time.m == time_interval)) { //stop timer counting
					timer_force_en = 0;
					display_rec_lapse_time.m = 0;
				}
			}
		}
	}
}

void timer_counter_force_display(INT8U force_en)
{
#if 0
	INT32U current_time;
	INT32S delta_time;

    timer_force_en = force_en;

	current_time = sw_timer_get_counter_L();

	display_rec_time.s = 0;
	display_rec_time.h = 0;
	display_rec_time.m = 0;

	if(force_en) {
		if(display_os_time == 0) {
			last_os_time = current_time;
			display_os_time = 1;
		} else {
			last_os_time += 16*1024/128;		//since cyclic_recording_timer will be added (16/128)sec, so do this.

			delta_time = (INT32S)current_time - (INT32S)last_os_time;
			if(delta_time > 0) {
				display_rec_time.s += delta_time>>10;	//get sec
				last_os_time = current_time - (delta_time & 0x3ff);
			}
		}
	} else {
		display_os_time = 0;
	}
#else
    timer_force_en = force_en;
	if(force_en) {
		display_os_time = 1;
	} else {
		display_os_time = 0;
	}

	last_os_time = sw_timer_get_counter_L();

	display_rec_time.s = 0;
	display_rec_time.h = 0;
	display_rec_time.m = 0;
	display_rec_lapse_time.s = 0;
	display_rec_lapse_time.h = 0;
	display_rec_lapse_time.m = 0;
#endif
}

void timer_counter_force_display_browser(INT8U force_en)
{
    browse_curr_time = 0;
    timer_force_en_browser = force_en;
}

static INT16U ap_display_digital_draw(INT16U *frame_buff, INT8U digital, INT16U pos_x, INT16U pos_y, INT8U red_flag)
{
	INT32U x, y, offset_pixel, offset_data;

	for (y=0 ; y<display_num_item[digital].icon_h ; y++) {
		for (x=0 ; x<display_num_item[digital].icon_w ; x++) {
			offset_data = (y*display_num_item[digital].icon_w) + x;
			if (*(number_table[digital] + offset_data) == display_num_item[digital].transparent) {
				continue;
			}
			offset_pixel =	(pos_y + y)*TFT_WIDTH + x + pos_x;
			if (offset_pixel < TFT_WIDTH*TFT_HEIGHT) {
				if(red_flag){
					*(frame_buff + offset_pixel) = 0xf800;	//red
				}else{
					*(frame_buff + offset_pixel) = *(number_table[digital] + offset_data);
				}
			}
		}
	}
	pos_x += display_num_item[digital].icon_w;
	return pos_x;
}

static INT16U ap_display_tv_digital_draw(INT16U *frame_buff, INT8U digital, INT16U pos_x, INT16U pos_y, INT8U red_flag)
{
	INT32U x, y, offset_pixel, offset_data;

	for (y=0 ; y<display_num_item[digital].icon_h ; y++) {
		for (x=0 ; x<display_num_item[digital].icon_w ; x++) {
			offset_data = (y*display_num_item[digital].icon_w) + x;
			if (*(number_table[digital] + offset_data) == display_num_item[digital].transparent) {
				continue;
			}
			offset_pixel =	(pos_y + y)*TV_WIDTH + x + pos_x;
			if (offset_pixel < TV_WIDTH*TV_HEIGHT) {
				if(red_flag){
					*(frame_buff + offset_pixel) = 0xf800;	//red
				}else{
					*(frame_buff + offset_pixel) = *(number_table[digital] + offset_data);
				}
			}
		}
	}
	pos_x += display_num_item[digital].icon_w;
	return pos_x;
}

static INT16U ap_display_hdmi_digital_draw(INT16U *frame_buff, INT8U digital, INT16U pos_x, INT16U pos_y, INT8U red_flag)
{
#ifdef HDMI_JPG_DECODE_AS_GP420
	INT32U x, y, offset_pixel, offset_pixel_tmp, offset_data;
	INT8U data_byte;
	INT32U color, Y0, Y1, U, V;
	if(red_flag) color = 0x4c554cff;
	else color = 0xff80ff80;

	Y0 = (color >> 8) & 0xff;
	Y1 = (color>>24) & 0xff;
	U = (color >> 16) & 0xff;
	V = color & 0xff;

	offset_pixel_tmp = (pos_y >> 1)*1280*3 + (pos_x & ~0x0001);
	for (y=0; y<display_num_item_hdmi[digital].icon_h; y++) {
		for (x=0; x<display_num_item_hdmi[digital].icon_w; x++) {
			if((x & 0x07) == 0) {
				offset_data = (y*display_num_item_hdmi[digital].icon_w+x)/8;
				data_byte = *(number_table_hdmi[digital] + offset_data);
			}

			if(data_byte == 0) {
				x += 7;
				continue;
			} else if((data_byte & (1<<(x&0x07))) == 0) {
				continue;
			} else {
				offset_pixel = offset_pixel_tmp + x;
				if((x&0x0001) == 0) {
					*(INT8U *)((INT8U *)frame_buff + offset_pixel) = Y0;
				} else {
					*(INT8U *)((INT8U *)frame_buff + offset_pixel) = Y1;
				}
			}
		}

		if((y&0x0001) == 0) {
			offset_pixel_tmp += 1280;
			for (x=0; x<display_num_item_hdmi[digital].icon_w; x++) {
				if((x & 0x07) == 0) {
					offset_data = (y*display_num_item_hdmi[digital].icon_w+x)/8;
					data_byte = *(number_table_hdmi[digital] + offset_data);
				}

				if(data_byte == 0) {
					x += 7;
					continue;
				} else if(data_byte & (3<<(x&0x07))) {
					offset_pixel = offset_pixel_tmp + x;
					*(INT8U *)((INT8U *)frame_buff + offset_pixel) = U;
					*(INT8U *)((INT8U *)frame_buff + offset_pixel + 1) = V;
				}
				x += 1;
			}
		}
		offset_pixel_tmp += 1280;
	}
	pos_x += display_num_item_hdmi[digital].icon_w + 4;
	return pos_x;
#elif defined(HDMI_JPG_DECODE_AS_YUV422)
	INT32U x, y, offset_pixel, offset_data, offset_pixel_tmp, color;
	INT8U data_byte;

	if(red_flag) color = 0x4c554cff;
	else color = 0xff80ff80;

    offset_pixel_tmp = pos_y * HDMI_WIDTH + (pos_x & ~0x0001);
	for (y=0 ; y<display_num_item_hdmi[digital].icon_h ; y++) {
		for (x=0 ; x<display_num_item_hdmi[digital].icon_w ; x++) {

			if((x & 0x07) == 0) {
				offset_data = (y*display_num_item_hdmi[digital].icon_w+x)/8;
				data_byte = *(number_table_hdmi[digital] + offset_data);
			}

			if(data_byte == 0) {
				x += 7;
				continue;
			} else if((data_byte & (1<<(x&0x07))) == 0) {
				continue;
			} else if((x&0x0001) == 0) {
				offset_pixel = offset_pixel_tmp + x;
				*((INT32U *)(frame_buff + offset_pixel)) = color;
			}
		}
		offset_pixel_tmp += HDMI_WIDTH;
	}
	pos_x += display_num_item_hdmi[digital].icon_w + 4;
	return pos_x;
#endif	
}

void date_time_force_display(INT8U force_en,INT8U postion_flag)
{
	if(force_en){
		display_RTC_date_time = postion_flag;
	}else{
		display_RTC_date_time = 0;
	}
}


void ap_display_rec_time_draw(INT16U *frame_buff, void *time_ptr, INT16U pos_x, INT16U pos_y, INT8U red_flag)
{
	INT32U i;
	INT8U num_tmp0, num_tmp1;
	INT16U pos_x_shift = pos_x;
						
	for (i=0 ; i<3 ; i++) {
		num_tmp0 = *((INT8U *)time_ptr + i);
		num_tmp1 = num_tmp0/10;
		num_tmp0 -= num_tmp1*10;

		if(g_Disp_Device == DISP_DEV_TFT) { //TFT
			pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
			pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);		
			if (i < 2) 	pos_x_shift = ap_display_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y, red_flag);
		} else { //TV
			pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
			pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);		
			if (i < 2) 	pos_x_shift = ap_display_tv_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y, red_flag);
		}
	}
}

void ap_display_hdmi_rec_time_draw(INT16U *frame_buff, void *time_ptr, INT16U pos_x, INT16U pos_y, INT8U red_flag)
{
	INT32U i;
	INT8U num_tmp0, num_tmp1;
	INT16U pos_x_shift = pos_x;
						
	for (i=0 ; i<3 ; i++) {
		num_tmp0 = *((INT8U *)time_ptr + i);
		num_tmp1 = num_tmp0/10;
		num_tmp0 -= num_tmp1*10;

		pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);		
		if (i < 2) 	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y, red_flag);
	}
}

extern INT8U RTC_TEST_SHOW;

void ap_display_rec_date_time_draw_record(INT16U *frame_buff, INT16U pos_x, INT16U pos_y)
{
	TIME_T	osd_time;
	INT8U num_tmp0, num_tmp1;
	INT16U pos_x_shift;
	INT32S year;
	INT8U red_flag;
	INT8U red_flag1,red_flag2;
#if 0
	if(RTC_TEST_SHOW == 1){
		red_flag1 = 0;
		red_flag2 = 1;
	}else if(RTC_TEST_SHOW == 2){
		red_flag1 = 1;
		red_flag2 = 0;
	}else if(RTC_TEST_SHOW == 3){
		red_flag1 = 1;
		red_flag2 = 1;
	}else{
		red_flag1 = 0;
		red_flag2 = 0;
	}
#else
	red_flag1 = 0;
	red_flag2 = 0;
#endif
	red_flag = red_flag1;
	cal_time_get(&osd_time);
	// YEAR
	year = (osd_time.tm_year) - 2000;
	if ( (year<14)||(year>99) )
		 num_tmp0 = 14;
	else num_tmp0 = (INT8U)year;
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;	

	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, 2, pos_x, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, 0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, 2, pos_x, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, 0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	}

	// MONTH
	num_tmp0 = (INT8U)(osd_time.tm_mon);	
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	}

	// DAY
	num_tmp0 = (INT8U)(osd_time.tm_mday);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
	}


	red_flag = red_flag2;
	pos_x_shift += 10;
	// HOUR
	num_tmp0 = (INT8U)(osd_time.tm_hour);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
		pos_x_shift = ap_display_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y, red_flag);
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y, red_flag);
	}	

	// MINUTE
	num_tmp0 = (INT8U)(osd_time.tm_min);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
		pos_x_shift = ap_display_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y, red_flag);
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y, red_flag);
	}

	// SECOND
	num_tmp0 = (INT8U)(osd_time.tm_sec);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
	}
}
extern void ap_browse_get_file_date_time(TIME_T *osd_time);
void ap_display_rec_date_time_draw_browse(INT16U *frame_buff, INT16U pos_x, INT16U pos_y)
{
	TIME_T	osd_time;
	INT8U num_tmp0, num_tmp1;
	INT16U pos_x_tmp;
	INT16U pos_x_shift;
	INT16U pos_y_shift;
	INT32S year;
	INT8U red_flag;
	
	red_flag = 0;
	pos_x_tmp = pos_x+24;;
	ap_browse_get_file_date_time(&osd_time);
	// YEAR
	year = (osd_time.tm_year) - 2000;
	if ( (year<14)||(year>99) )
		 num_tmp0 = 14;
	else num_tmp0 = (INT8U)year;
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;	
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	}
	// MONTH
	num_tmp0 = (INT8U)(osd_time.tm_mon);	
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	}
	// DAY
	num_tmp0 = (INT8U)(osd_time.tm_mday);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	
	}

	pos_y_shift = pos_y + 15;
	pos_x_shift = pos_x_tmp;
	// HOUR
	num_tmp0 = (INT8U)(osd_time.tm_hour);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y_shift, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y_shift, red_flag);	
		pos_x_shift = ap_display_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y_shift, red_flag);
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y_shift, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y_shift, red_flag);	
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y_shift, red_flag);
	}

	// MINUTE
	num_tmp0 = (INT8U)(osd_time.tm_min);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	if(g_Disp_Device == DISP_DEV_TFT) { //TFT
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y_shift, red_flag);
		pos_x_shift = ap_display_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y_shift, red_flag);	
	} else { //TV
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y_shift, red_flag);
		pos_x_shift = ap_display_tv_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y_shift, red_flag);	
	}
}

void ap_display_hdmi_rec_date_time_draw_browse(INT16U *frame_buff, INT16U pos_x, INT16U pos_y)
{
	TIME_T	osd_time;
	INT8U num_tmp0, num_tmp1;
	INT16U pos_x_tmp;
	INT16U pos_x_shift;
	INT16U pos_y_shift;
	INT32S year;
	INT8U red_flag;
	
	red_flag = 0;
	pos_x_tmp = pos_x+60;
	ap_browse_get_file_date_time(&osd_time);
	// YEAR
	year = (osd_time.tm_year) - 2000;
	if ( (year<0)||(year>100) )
		 num_tmp0 = 0;
	else num_tmp0 = (INT8U)year;
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;	
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp1, pos_x, pos_y, red_flag);
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);	
	// MONTH
	num_tmp0 = (INT8U)(osd_time.tm_mon);	
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, NUM_TEXT_SLASH, pos_x_shift, pos_y, red_flag);
	// DAY
	num_tmp0 = (INT8U)(osd_time.tm_mday);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y, red_flag);
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y, red_flag);	

	pos_y_shift = pos_y + 38;
	pos_x_shift = pos_x_tmp;
	// HOUR
	num_tmp0 = (INT8U)(osd_time.tm_hour);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y_shift, red_flag);
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y_shift, red_flag);	
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, NUM_TEXT_COLON, pos_x_shift, pos_y_shift, red_flag);

	// MINUTE
	num_tmp0 = (INT8U)(osd_time.tm_min);
	num_tmp1 = num_tmp0/10;
	num_tmp0 -= num_tmp1*10;
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp1, pos_x_shift, pos_y_shift, red_flag);
	pos_x_shift = ap_display_hdmi_digital_draw(frame_buff, num_tmp0, pos_x_shift, pos_y_shift, red_flag);	

}

void ap_display_rec_date_time_draw(INT16U *frame_buff)
{
	if(g_Disp_Device==DISP_DEV_TFT) { //TFT
		if(display_RTC_date_time == DISPLAY_DATE_TIME_RECORD) {  //black edge
			ap_display_rec_date_time_draw_record(frame_buff, POSTION_Date_Time_Record_X, POSTION_Date_Time_Record_Y);
		} else if(display_RTC_date_time == DISPLAY_DATE_TIME_RECORD2) { //no black edge
			//ap_display_rec_date_time_draw_record(frame_buff, POSTION_Date_Time_Record_X2, POSTION_Date_Time_Record_Y2);
		} else if(display_RTC_date_time == DISPLAY_DATE_TIME_BROWSE) {
			//ap_display_rec_date_time_draw_browse(frame_buff, POSTION_Date_Time_Brose_X, POSTION_Date_Time_Brose_Y);
		}
	} else { //TV
		if(display_RTC_date_time == DISPLAY_DATE_TIME_RECORD) { //black edge
			ap_display_rec_date_time_draw_record(frame_buff, POSTION_Date_Time_Record_X_tv, POSTION_Date_Time_Record_Y_tv);
		} else if(display_RTC_date_time == DISPLAY_DATE_TIME_RECORD2) { //no black edge
			//ap_display_rec_date_time_draw_record(frame_buff, POSTION_Date_Time_Record_X2_tv, POSTION_Date_Time_Record_Y2_tv);
		} else if(display_RTC_date_time == DISPLAY_DATE_TIME_BROWSE) {
			//ap_display_rec_date_time_draw_browse(frame_buff, POSTION_Date_Time_Brose_X_tv, POSTION_Date_Time_Brose_Y_tv);
		}
	}
}
